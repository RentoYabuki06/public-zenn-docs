---
title: ""
emoji: "ğŸ·"
type: "tech" # tech: æŠ€è¡“è¨˜äº‹ / idea: ã‚¢ã‚¤ãƒ‡ã‚¢
topics: []
published: false
---

# ã¯ã˜ã‚ã«

42tokyoã®å…¥å­¦è©¦é¨“Piscineã‚’2024.3ã«å—é¨“ã—ã€ã¡ã‚ƒã‚“ã¨ã‚¢ãƒ«ã‚´ãƒªã‚ºãƒ ã®å‹‰å¼·ã‚’ã—ãŸã„ã¨ã„ã†æ€ã„ã§æœ¬æ ¼çš„ã«Atcoderã§ã®ãƒã‚¤ãƒ©ãƒ³ã‚¯ã‚’ç›®æŒ‡ã™ã“ã¨ã‚’å¿—ã—ã€ç´¹ä»‹ã—ã¦ã‚‚ã‚‰ã£ãŸã€Œ[ç«¶æŠ€ãƒ—ãƒ­ã‚°ãƒ©ãƒŸãƒ³ã‚°ã®é‰„å‰‡](https://amzn.asia/d/esAZNG9)ã€ã‚’1å‘¨ã—ã¦ã¿ã‚‹ã“ã¨ã«ã€‚

æœ€åˆã¯è»½ã„æ°—æŒã¡ã§å–ã‚Šçµ„ã¿å§‹ã‚ãŸã‚¢ãƒ«ã‚´ãƒªã‚ºãƒ ã®å‹‰å¼·ã§ã—ãŸãŒã€æ–°ãŸãªå•é¡ŒãŒæ¬¡ã€…ã¨è§£ã‘ã¦ã„ãã“ã¨ã‚„å®Ÿéš›ã«Atcoderã®ãƒ¬ãƒ¼ãƒˆãŒä¸ŠãŒã‚‹å¿«æ„ŸãŒã‚ã‚Šã€æ°—ã¥ã„ãŸã‚‰ã®ã‚ã‚Šè¾¼ã‚“ã§ã„ã¾ã—ãŸã€‚

ã‚¢ãƒ«ã‚´ãƒªã‚ºãƒ ã®å‹‰å¼·ã£ã¦äººé¡ã®å¡æ™ºã‚’æ„Ÿã˜ã¾ã™ã‚ˆã­()

ç´„1ãƒ¶æœˆã‹ã‘ã¦å…¨ã¦ã®æ¼”ç¿’å•é¡Œã‚’è§£ã„ãŸã®ã§ã€ã“ã“ã«è¨˜éŒ²ã‚’æ®‹ã—ã¦ãŠã“ã†ã¨æ€ã„ã¾ã™ã€‚

å…¨ã¦ã®ã‚³ãƒ¼ãƒ‰ã‚’ACç¢ºèªã—ã¦ã„ã‚‹ã¤ã‚‚ã‚Šã§ã™ãŒã€ä¸å‚™ãªã©ã‚ã‚Šã¾ã—ãŸã‚‰ã‚³ãƒ¡ãƒ³ãƒˆã‚„ç·¨é›†ãƒªã‚¯ã‚¨ã‚¹ãƒˆã‚’ã„ãŸã ã‘ã‚‹ã¨å¹¸ã„ã§ã™ã€‚

ã‚³ãƒ¼ãƒ‰ã¯[Github](https://github.com/RentoYabuki06/kyopro-tessoku-practice)ã§ã‚‚å…¬é–‹ã—ã¦ã„ã¾ã™ã€‚

æœ¬ã‚’åŸ·ç­†ã•ã‚ŒãŸç±³ç”°ã•ã‚“å…¬èªã§ã¯ãªã„ã®ã§ã€è§£ãæ–¹ã‚„è§£èª¬ãªã©ã«ä¸é©åˆ‡ãªã¨ã“ã‚ãŒã—ã°ã—ã°ã‚ã‚‹ã“ã¨ã€ã”äº†æ‰¿ãã ã•ã„ã€‚ç‰¹ã«å¤‰æ•°å®£è¨€ãŒmainé–¢æ•°ã®ä¸­ã ã£ãŸã‚Šå¤–ã ã£ãŸã‚Šã—ã¾ã™ï¼ˆè¦‹è¿”ã—ã¦ç™–ã«æ°—ã¥ãã¾ã—ãŸï¼‰ã€‚

ã¾ãŸã€å…¨ã¦ã®å•é¡Œã§ã€ä»¥ä¸‹ã®æ¨™æº–ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã®ã‚¤ãƒ³ã‚¯ãƒ«ãƒ¼ãƒ‰ã¨åå‰ç©ºé–“ã®æŒ‡å®šã¯çœç•¥ã—ã¦ãŠã‚Šã¾ã™ã€‚
```cpp
#include <bits/stdc++.h>
using namespace std; 
```

# 1ç«  ã‚¢ãƒ«ã‚´ãƒªã‚ºãƒ ã¨è¨ˆç®—é‡
## 1.0 ã‚¢ãƒ«ã‚´ãƒªã‚ºãƒ ã¨è¨ˆç®—é‡
ãã‚‚ãã‚‚ã‚¢ãƒ«ã‚´ãƒªã‚ºãƒ ã¯ãªã‚“ãã‚„ã€è¨ˆç®—é‡ã¨ã¯ãªã‚“ãã‚„ã€ã¨ã„ã†åŸºç¤ã®éƒ¨åˆ†ã‹ã‚‰è§£èª¬ã•ã‚Œã¦ã„ã¾ã™ã€‚

ç¾çŠ¶ã®ç†è§£ã ã¨ã€ã‚¢ãƒ«ã‚´ãƒªã‚ºãƒ ã¯ **ã€Œå•é¡Œã‚’è§£ããŸã‚ã®æ±ºã¾ã£ãŸæ‰‹é †ã€** ã§ã‚ã‚Šã€è¨ˆç®—é‡ã¯ã€Œã€ã§ã€è¨ˆç®—é‡ã‚’å®šç¾©ã™ã‚‹ç›®çš„ã¯ **ã€ŒåŒã˜ç’°å¢ƒã§æ‰‹é †ã‚’é€²ã‚ãŸå ´åˆã®å‡¦ç†ã®æ•°ã®å·®ã€** ã‚’å…±é€šè¨€èªåŒ–ã—ãŸã‚‚ã®ã§ã‚ã‚‹ã¨ã„ã†èªè­˜ã§ã™ã€‚

å®¶åº­ç”¨PCã®è¨ˆç®—é€Ÿåº¦ãŒæ¯ç§’10^9å›ç¨‹åº¦ã‚‰ã—ãã€ã“ã‚Œã‚’è¶…ãˆã‚‹ã‚‚ã®ã¯TLEï¼ˆæ™‚é–“è¶…éï¼‰ã¨ãªã‚Šæ­£è§£ã«ã¯ãªã‚‰ãªã„ãã†ã§ã™ã€‚ï¼ˆAtCoderã®ã¿ãªã®ã‹ã€ä¸–ç•Œå…±é€šãªã®ã‹ã¯ä¸æ˜ï¼‰

## 1.1 å°å…¥å•é¡Œ
### A01 - The First Problem
ä¸€è¾ºãŒNã®é•·ã•ã®é•·æ–¹å½¢ã®é¢ç©ã‚’æ±‚ã‚ã‚‹å•é¡Œã€‚N*Nã‚’å‡ºåŠ›ã™ã‚‹ã ã‘ãªã®ã§å°å­¦ç”Ÿã§ã‚‚ã§ãã‚‹ã“ã¨ã§ã™ãŒã€ãƒ—ãƒ­ã‚°ãƒ©ãƒ ã«ã™ã‚‹ã¨é›£ã—ã„ã€‚å…¥åŠ›ã®å—ã‘ä»˜ã‘æ–¹ã€å‡ºåŠ›ã®ä»•æ–¹ãªã©ã‚’èª¿ã¹ãªãŒã‚‰é€²ã¿ã¾ã™ã€‚

https://atcoder.jp/contests/tessoku-book/tasks/tessoku_book_a

```cpp
int main()
{
	int N;
	cin >> N;
	cout << N * N << endl;
}
```

### B01 - A+B Problem
A+Bã‚’å‡ºåŠ›ã™ã‚‹ãƒ—ãƒ­ã‚°ãƒ©ãƒ ã€‚ã“ã‚Œã‚‚å°å­¦ç”Ÿã§ã‚‚ã§ãã¾ã™ã­()

https://atcoder.jp/contests/tessoku-book/tasks/tessoku_book_bz

```cpp
int main()
{
	int A, B;
	cin >> A >> B;
	cout << A + B << endl;
}
```


## 1.2 å…¨æ¢ç´¢ï¼ˆ1ï¼‰
### A02 - Linear Search
Nå€‹ã®æ•´æ•°ã®ä¸­ã«XãŒå«ã¾ã‚Œã‚‹ã‹åˆ¤å®šã™ã‚‹å•é¡Œã€‚ã€Œå…¨æ¢ç´¢ã€ã¨ã„ã†ãƒ¯ãƒ¼ãƒ‰ã¨æ¡ä»¶åˆ†å²ãŒå‡ºã¦ãã‚‹ã®ã§ä¸€æ°—ã«ç«¶æŠ€ãƒ—ãƒ­ã‚°ãƒ©ãƒŸãƒ³ã‚°ã£ã½ããªã£ã¦ãã¾ã—ãŸã€‚

https://atcoder.jp/contests/tessoku-book/tasks/tessoku_book_b

```cpp
int main()
{
	int N, X;
	cin >> N >> X;
	for (int i = 0; i < N; i++)
	{
		int A;
		cin >> A;
		if (A == X)
		{
			cout << "Yes" << endl;
			return 0;
		}	
	}
	cout << "No" << endl;
}
```

### B02 - Divisor Check

Aä»¥ä¸ŠBä»¥ä¸‹ã®æ•´æ•°ã«ã€100ã®å½¹æ•°ã¯å­˜åœ¨ã™ã‚‹ã‹ã©ã†ã‹èª¿ã¹ã‚‹å•é¡Œã€‚Aå•é¡Œã¨ã‚„ã‚‹ã“ã¨ã¯ä¸€ç·’ã§ã™ã­ã€‚

https://atcoder.jp/contests/tessoku-book/tasks/tessoku_book_ca

```cpp
int main()
{
	int A, B;
	cin >> A >> B;
	for (int x = A; x <= B; x++)
	{
		if (100 % x == 0)
		{
			cout << "Yes" << endl;
			return 0;
		}
	}
	cout << "No" << endl;
	return 0;
}
```

## 1.3 å…¨æ¢ç´¢ï¼ˆ2ï¼‰
### A03 - Two Cards
æ•´æ•°ãŒæ›¸ã‹ã‚ŒãŸèµ¤ã¨é’ã®ã‚«ãƒ¼ãƒ‰ãŒãã‚Œãã‚ŒNæšã‚ã‚Šã€ãã‚Œã‚‰ã«ã¯æ•´æ•°ãŒæ›¸ã‹ã‚Œã¦ã„ã¾ã™ã€‚
èµ¤ã¨é’ã®ã‚«ãƒ¼ãƒ‰ã‚’ä¸€æšãšã¤å–ã£ãŸæ™‚ã«åˆè¨ˆãŒKã«ãªã‚‹çµ„ã¿åˆã‚ã›ã¯å­˜åœ¨ã™ã‚‹ã‹ã€‚

æœ€å¤§ã§ã‚‚çµ„ã¿åˆã‚ã›ã¯ N^2 é€šã‚Šã§ã€Nã¯100ä»¥ä¸‹ã®æ­£ã®æ•´æ•°ã¨ã„ã†åˆ¶é™ãŒã‚ã‚‹ã®ã§ã€ååˆ†å…¨æ¢ç´¢ã§é–“ã«åˆã„ã¾ã™ã­ã€‚

https://atcoder.jp/contests/tessoku-book/tasks/tessoku_book_c

```cpp
int N, K;
int P[110];
int Q[110];

int main()
{
	int N, K;
	cin >> N >> K;
	for (int i = 0; i < N; i++) cin >> P[i];
	for (int i = 0; i < N; i++) cin >> Q[i];
	for (int i = 0; i < N; i++)
	{
		for (int j = 0; j < N; j++)
		{
			if (P[i] + Q[j] == K)
			{
				cout << "Yes" << endl;
				return 0;
			}
		}
	}
	cout << "No" << endl;
	return 0;
}
```

### B03 - Supermarket 1

Nå€‹ã®å•†å“ã®ã†ã¡ã€ç•°ãªã‚‹3ã¤ã®å•†å“ã‚’é¸ã‚“ã§ä¾¡æ ¼ã‚’1000å††ã«ã§ãã‚‹ã‹èª¿ã¹ã‚‹å•é¡Œã€‚

æœ€å¤§ã§ã‚‚çµ„ã¿åˆã‚ã›ã¯ `N * (N-1) * (N - 2)`(ã»ã¼ N^3 )é€šã‚Šã§ã€Nã¯100ä»¥ä¸‹ã®æ­£ã®æ•´æ•°ã¨ã„ã†åˆ¶é™ãŒã‚ã‚‹ã®ã§ã€ååˆ†å…¨æ¢ç´¢ã§é–“ã«åˆã„ã¾ã™ã­ã€‚

https://atcoder.jp/contests/tessoku-book/tasks/tessoku_book_cb

```cpp
int N;
int A[110];

int main()
{
	cin >> N;
	for (int i = 0; i < N; i++) cin >> A[i];
	for (int i = 0; i < N; i++)
	{
		for (int j = 0; j < N; j++)
		{
			for (int k = 0; k < N; k++)
			{
				if (A[i] + A[j] + A[k] == 1000 && i != j && i != k && j != k)
				{
					cout << "Yes" << endl;
					return 0;
				}
			}
		}
	}
	cout << "No" << endl;
	return 0;
}
```

## 1.4 2é€²æ³•
### A04 - Binary Representation 1

10é€²æ•°ã®Nã‚’2é€²æ•°ã«å¤‰æ›ã—ã¦å‡ºåŠ›ã›ã‚ˆã¨ã„ã†å•é¡Œã€‚

`(1 << x)`ã®éƒ¨åˆ†ã¯ãƒ“ãƒƒãƒˆã‚·ãƒ•ãƒˆã‚’ç”¨ã„ã¦ã€2ã®nä¹—ã®æ¡ã«ãƒ“ãƒƒãƒˆãŒç«‹ã£ã¦ã„ã‚‹ã‹ã©ã†ã‹ã‚’åˆ¤å®šã—ã¦ã„ã¾ã™ã€‚ã“ã®è¾ºã‚Šã¯ã‚³ãƒ³ãƒ”ãƒ¥ãƒ¼ã‚¿ãŒ2é€²æ•°(0ã¨1ã®ãƒ“ãƒƒãƒˆ)ã§æƒ…å ±ã‚’ä¿å­˜ã—ã¦ã„ã‚‹ã“ã¨
ã‚’çŸ¥ã£ã¦ã„ãªã„ã¨å°‘ã—ãƒãƒ¼ãƒ‰ãƒ«ãŒé«˜ã„ã‹ã‚‚ã—ã‚Œã¾ã›ã‚“ã€‚

åŸºæ•°å¤‰æ›ãŒçµ¡ã‚“ã§ãã‚‹ã¨ã€æ€¥ã«æ•°å­¦ã£ã½ããªã£ã¦ãã¾ã™ã­ã€‚

https://atcoder.jp/contests/tessoku-book/tasks/tessoku_book_d

```cpp
int main()
{
	int N;
	cin >> N;
	for (int x = 9; x >= 0; x--)
	{
		int wari = (1 << x);
		cout << (N / wari) % 2;
	}
	cout << endl;
	return 0;
}
```

### B04 - Binary Representation 2

ä»Šåº¦ã¯é€†ã«2é€²æ•°ã‚’10é€²æ•°ã«å¤‰æ›ã™ã‚‹å•é¡Œã€‚

https://atcoder.jp/contests/tessoku-book/tasks/tessoku_book_cc

```cpp
int main()
{
	int N;
	cin >> N;
	int deci = 0;
	for (int i = 0; N > 0; i++)
	{
		deci += (N % 2) * (1 << i);
		N /= 10;
	}
	cout << deci << endl;
}
```

## 1.5 ãƒãƒ£ãƒ¬ãƒ³ã‚¸å•é¡Œ
### A05 - Three Cards

3æšã®ã‚«ãƒ¼ãƒ‰ã«Nä»¥ä¸‹ã®æ­£ã®æ•´æ•°ã‚’æ›¸ã„ã¦ã€åˆè¨ˆã‚’Kã«ã™ã‚‹æ–¹æ³•ãŒä½•é€šã‚Šã‚ã‚‹ã‹èª¿ã¹ã‚‹å•é¡Œã€‚

ç›´æ„Ÿçš„ã«ã¯3æšã®ã‚«ãƒ¼ãƒ‰ã‚’1ã‹ã‚‰Nã¾ã§å›ã—ã€çµ„ã¿åˆã‚ã›ã®å…¨ãƒ‘ã‚¿ãƒ¼ãƒ³ã‚’èª¿ã¹ã‚‹ã¨ã„ã†å…¨æ¢ç´¢ãŒæ€ã„ã¤ãã¾ã™ãŒã€è¨ˆç®—é‡ãŒ O(N^3) ã¨ãªã‚Šåˆ¶é™ã®NãŒ3000ä»¥ä¸‹ã§ã¯10^9ã‚’è¶…ãˆã¦ãã¦å®Ÿè¡Œæ™‚é–“ã«é–“ã«åˆã„ã¾ã›ã‚“ã€‚

ã€Œ2æšã®ã‚«ãƒ¼ãƒ‰ã®å€¤ãŒæ±ºã¾ã‚Œã°ã€ã‚ã¨ã®1æšã®å€¤ãŒæ±ºã¾ã‚‹ã€ã¨ã„ã†æ€§è³ªã«æ°—ãŒã¤ã„ã¦ã€3é‡ãƒ«ãƒ¼ãƒ—ã‚’2é‡ãƒ«ãƒ¼ãƒ—ã«ã—ã¦è¨ˆç®—é‡ã‚’å‰Šæ¸›ã§ãã‚‹ã‹ã¨ã„ã†ã¨ã“ã‚ãŒå•é¡Œã®è‚ã§ã—ãŸã€‚

https://atcoder.jp/contests/tessoku-book/tasks/tessoku_book_e

```cpp
int main()
{
	int N, K;
	cin >> N >> K;
	int count = 0;
	for (int i = 0; i < N; i++)
	{
		for (int j = 0; j < N; j++)
		{
			int tmp = K - (i + j + 2);
			if (tmp > 0 && tmp <= N) count++;
		}
	}
	cout << count << endl;
	return 0;
}
```


## ã‚³ãƒ©ãƒ 2 ãƒ“ãƒƒãƒˆæ¼”ç®—ã¨ãƒ“ãƒƒãƒˆå…¨æ¢ç´¢

# 2ç«  ç´¯ç©å’Œ
## 2.0 ç´¯ç©å’Œã¨ã¯
æ¯å›è¨ˆç®—ã™ã‚‹ã‚ˆã‚Šã€å‰ã‚‚ã£ã¦è¨ˆç®—ã—ã¦ãŠã„ãŸæ•°å­—ã‚’çµ„ã¿ã‚ã‚ã‚‹ã“ã¨ã§è¨ˆç®—é‡ã‚’å¤§ããå‰Šæ¸›ã§ãã‚‹ã“ã¨ã‚‚ã‚ã‚‹ã€‚

ä¾‹ãˆã°ã€éŠåœ’åœ°ã®læ—¥ã‹ã‚‰ræ—¥ã¾ã§ã®åˆè¨ˆæ¥å ´è€…æ•°ã‚’æ±‚ã‚ã‚‹å•é¡ŒãŒä¾‹ã«å‡ºã•ã‚Œã¦ã„ã‚‹ã€‚

læ—¥ã‹ã‚‰ræ—¥ã®åˆè¨ˆæ¥å ´è€…æ•°1å›æ±‚ã‚ã‚‹ã ã‘ãªã‚‰è¨ˆç®—ã™ã‚‹ã ã‘ã§ã„ã„ãŒã€l-3æ—¥ã‹ã‚‰r+1æ—¥ã¯ï¼Ÿã¨ã‹ã€l+1æ—¥ã‹ã‚‰r+12æ—¥ã¯ï¼Ÿãªã©ã€ã„ã‚ã‚“ãªãƒ‘ã‚¿ãƒ¼ãƒ³ã§çŸ¥ã‚ŠãŸã„æ™‚ã«ã¯æ¯å›è¨ˆç®—ã‚’è¡Œã†ã‚ˆã‚Šã‚‚å‰ã‚‚ã£ã¦næ—¥ã¾ã§ã®ç´¯ç©ã®æ¥å ´è€…ï¼ˆ **ç´¯ç©å’Œ** ï¼‰ã‚’è¨ˆç®—ã—ã¦ãŠãã»ã†ãŒåŠ¹ç‡çš„ã ã€‚


## 2.1 1æ¬¡å…ƒã®ç´¯ç©å’Œï¼ˆ1ï¼‰
### A06 - How Many Guests?
2.0ã§ä¾‹ã¨ã—ã¦å‡ºã¦ããŸéŠåœ’åœ°ã®æ¥å ´è€…æ•°ã‚’å‡ºåŠ›ã™ã‚‹å•é¡Œã€‚

https://atcoder.jp/contests/tessoku-book/tasks/math_and_algorithm_ai

```cpp
int main()
{
	int N, Q;
	cin >> N >> Q;
	int A[1000009], L[1000009], R[1000009], cum[1000009];
	for (int i = 0; i < N; i++) cin >> A[i];
	for (int i = 0; i < Q; i++) cin >> L[i] >> R[i];
	cum[0] = A[0];
	for (int i = 1; i < N; i++) cum[i] = cum[i - 1] + A[i];
	for (int i = 0; i < Q; i++)
	{
		if (L[i] == 1)
		{
			cout << cum[R[i] - 1] << endl;
		}
		else
		{
			cout << cum[R[i] - 1] - cum[L[i] - 2] << endl;
		}
	}
	return 0;
}
```

### B06 - Lottery 

ã‚ãŸã‚Š or ãƒã‚ºãƒ¬ ã®ãã˜ã‚’ Nå›å¼•ã„ãŸã€‚

Lå›ç›®ã‹ã‚‰Rå›ç›®ã¯ã‚ãŸã‚Šã¨ã¯ãšã‚Œã®ã©ã¡ã‚‰ãŒå¤šã„ã‹ï¼Ÿã¨ã„ã†å•é¡Œã€‚

ã‚ãŸã‚Šã¨ãƒã‚ºãƒ¬ã®å›æ•°ãã‚Œãã‚Œã®ç´¯ç©å’Œã‚’è¨ˆç®—ã—ã¦ãŠãã€‚

https://atcoder.jp/contests/tessoku-book/tasks/tessoku_book_ce

```cpp
int	N, A[100009], Q, L[100009], R[100009], hit[100009], miss[100009];

int main()
{
	cin >> N;
	for (int i = 0; i < N; i++) cin >> A[i];
	cin >> Q;
	for (int i = 0; i < Q; i++) cin >> L[i] >> R[i];
	if (A[0] == 0)
	{
		hit[0] = 0;
		miss[0] = 1;
	}
	else
	{
		hit[0] = 1;
		miss[0] = 0;
	}
	for (int i = 1; i < N; i++)
	{
		if (A[i] == 0)
		{
			hit[i] = hit[i - 1];
			miss[i] = miss[i - 1] + 1;
		}
		else
		{
			hit[i] = hit[i - 1] + 1;
			miss[i] = miss[i - 1];
		}
	}
	for (int i = 0; i < Q; i++)
	{
		if (L[i] == 1)
		{
			if (hit[R[i] - 1] > miss[R[i] - 1])
			{
				cout << "win" << endl;
			}
			else if (hit[R[i] - 1] < miss[R[i] - 1])
			{
				cout << "lose" << endl;
			}
			else{
				cout << "draw" << endl;
			}
		}
		else
		{
			if (hit[R[i] - 1] - hit[L[i] - 2] > miss[R[i] - 1] - miss[L[i] - 2])
			{
				cout << "win" << endl;
			}
			else if (hit[R[i] - 1] - hit[L[i] - 2] < miss[R[i] - 1] - miss[L[i] - 2])
			{
				cout << "lose" << endl;
			}
			else{
				cout << "draw" << endl;
			}
		}
	}
}
```

## 2.2 1æ¬¡å…ƒã®ç´¯ç©å’Œï¼ˆ2ï¼‰
### A07 - Event Attendance

Dæ—¥é–“è¡Œã‚ã‚Œã‚‹ã‚¤ãƒ™ãƒ³ãƒˆã«ã€NäººãŒå‡ºå¸­ã™ã‚‹ã€‚å‚åŠ è€…ãã‚Œãã‚ŒãŒLiæ—¥ã‹ã‚‰Riæ—¥ã¾ã§å‚åŠ ã™ã‚‹æ™‚ã€å„æ—¥ã®å‡ºå¸­è€…ã‚’å‡ºå¸­ã›ã‚ˆã€‚

å‡ºå¸­è€…ã®å‰æ—¥æ¯”ã‚’è¨˜éŒ²ã—ã¦ãŠã„ã¦ç´¯ç©å’Œã‚’å–ã‚‹ã¨åŠ¹ç‡çš„ã«æ±‚ã‚ã‚‰ã‚Œã‚‹ã€‚

å¾Œã‹ã‚‰è€ƒãˆãŸã‚‰å½“ç„¶ã ãŒã€åˆã‚ã¦ã¿ãŸæ™‚ã«ã¯ç”»æœŸçš„ã ãªã¨æ€ã£ãŸã€‚

https://atcoder.jp/contests/tessoku-book/tasks/tessoku_book_g

```cpp
int D, N, L[100009], R[100009], change[100009], total[100009];

int main()
{
	cin >> D >> N;
	for (int i = 0; i < N; i++) cin >> L[i] >> R[i];
	for (int i = 0; i < N; i++)
	{
		change[L[i] - 1]++;
		change[R[i]]--;
	}
	total[0] = change[0];
	for (int i = 1; i < D; i++)
	{
		total[i] = total[i - 1] + change[i];
	}
	for (int i = 0; i < D; i++) cout << total[i] << endl;
}
```

### B07 - Convenience Store 2

Tæ™‚é–“é–‹åº—ã™ã‚‹ã‚³ãƒ³ãƒ“ãƒ‹ã«ã€æ™‚åˆ»Liã‹ã‚‰Riã¾ã§å‡ºå‹¤ã™ã‚‹å¾“æ¥­å“¡ãŒNäººã„ã‚‹ã€‚æ™‚åˆ»t+0.5ã«ã¯ä½•äººã®å¾“æ¥­è€…ãŒåƒã„ã¦ã„ã‚‹ã‹æ±‚ã‚ã‚ˆã€‚

Aå•é¡Œã®å‰æ—¥æ¯”ã‚’å‰ã®æ™‚åˆ»ã‹ã‚‰ã®å¾“æ¥­å“¡ã®å¢—æ¸›æ¯”ã«ç½®ãæ›ãˆã¦è¨˜éŒ²ã™ã‚‹ã€‚

https://atcoder.jp/contests/tessoku-book/tasks/math_and_algorithm_al

```cpp
int T, N, L[500009], R[500009], change[500009], total[500009];

int main()
{
	cin >> T >> N;
	for(int i = 0; i < N; i++) cin >> L[i] >> R[i];
	for(int i = 0; i < N; i++)
	{
		change[L[i]]++;
		change[R[i]]--;
	}
	total[0] = change[0];
	cout << total[0] << endl;
	for(int i = 1; i < T; i++)
	{
		total[i] = total[i - 1] + change[i];
		cout << total[i] << endl;
	}
	return 0;
}
```

## 2.3 2æ¬¡å…ƒã®ç´¯ç©å’Œï¼ˆ1ï¼‰
### A08 - Two Dimensional Sum

H*W ã®ãƒã‚¹ã«ãã‚Œãã‚Œæ•´æ•°ãŒæ›¸ã‹ã‚Œã¦ã„ã‚‹ã€‚äºŒã¤ãƒã‚¹ãŒä¸ãˆã‚‰ã‚Œã€ãã‚Œã‚‰ã®ãƒã‚¹ã‚’å·¦ä¸Šã¨å³ä¸‹ã«é…ç½®ã—ãŸé•·æ–¹å½¢ã®åˆè¨ˆã®æ•°ã‚’å‡ºåŠ›ã›ã‚ˆã€ã¨ã„ã†å•é¡Œã€‚

ç´¯ç©å’Œã‚’2æ¬¡å…ƒã«æ‹¡å¼µã™ã‚‹ã€‚æ¨ªã¨ç¸¦ã«ãã‚Œãã‚Œç´¯ç©å’Œã‚’å–ã‚‹ãŒã€å¢—æ¸›ã®é‡è¤‡ãŒèµ·ãã‚‹ã“ã¨ã«æ³¨æ„ã€‚

https://atcoder.jp/contests/tessoku-book/tasks/tessoku_book_h

```cpp
int H, W, Q;
int X[1509][1509], cum[1509][1509];
int A[1000009], B[1000009], C[1000009], D[1000009];

int main()
{
	cin >> H >> W;
	for (int i = 1; i <= H; i++)
	{
		for (int j = 1; j <= W; j++)
		{
			cin >> X[i][j];
			cum[i][j] = 0;
		}
	}
	cin >> Q;
	for (int i = 1; i <= Q; i++) cin >> A[i] >> B[i] >> C[i] >> D[i];
	//æ¨ªæ–¹å‘ã®ç´¯ç©å’Œ
	for (int i = 1; i <= H; i++)
	{
		for (int j = 1; j <= W; j++)
		{
			cum[i][j] = cum[i][j - 1] + X[i][j];
		}
	}
	//ç¸¦æ–¹å‘ã®ç´¯ç©å’Œ
	for (int j = 1; j <= W; j++)
	{
		for (int i = 1; i <= H; i++)
		{
			cum[i][j] += cum[i - 1][j];
		}
	}
	for (int i = 1; i <= Q; i++)
	{
		int sum = 0;
		sum = cum[C[i]][D[i]] - cum[C[i]][B[i] - 1] - cum[A[i] - 1][D[i]] + cum[A[i] - 1][B[i] - 1];
		cout << sum << endl;
	}
	return 0;
}
```

### B08 - Counting Points

äºŒæ¬¡å…ƒå¹³é¢ä¸Šã«Nå€‹ã®ç‚¹ãŒã‚ã‚‹ã€‚xåº§æ¨™ãŒaä»¥ä¸Šcä»¥ä¸‹ã€yåº§æ¨™ãŒbä»¥ä¸Šdä»¥ä¸‹ã®ç‚¹ã¯ã„ãã¤ã‚ã‚‹ã‹ï¼Ÿã¨ã„ã†å•é¡Œã€‚

å„åº§æ¨™ã«ã„ãã¤ç‚¹ãŒã‚ã‚‹ã‹ã‚’äºŒæ¬¡å…ƒé…åˆ—ã§è¨˜éŒ²ã™ã‚‹ã€‚

https://atcoder.jp/contests/tessoku-book/tasks/tessoku_book_cg

```cpp
int N, Q;
int X[1000009], Y[1000009], a[1000009], b[1000009], c[1000009], d[1000009];
int dots[1509][1509];

int main()
{
	cin >> N;
	for (int i = 0; i <= 1505; i++)
	{
		for (int j = 1; j <= 1505; j++) dots[i][j] = 0;
	}
	for (int i = 1; i <= N; i++)
	{
		cin >> X[i] >> Y[i];
		dots[X[i]][Y[i]]++;
	}
	cin >> Q;
	for (int i = 1; i <= Q; i++) cin >> a[i] >> b[i] >> c[i] >> d[i];
	for (int i = 1; i <= 1505; i++)
	{
		for (int j = 1; j <= 1505; j++)
		{
			dots[i][j] += dots[i][j - 1];
		}
	}
	for (int j = 1; j <= 1505; j++)
	{
		for (int i = 1; i <= 1505; i++)
		{
			dots[i][j] += dots[i - 1][j];
		}
	}
	for (int i = 1; i <= Q; i++)
	{
		int sum = dots[c[i]][d[i]] - dots[c[i]][b[i] - 1] - dots[a[i] - 1][d[i]] + dots[a[i] - 1][b[i] - 1];
		cout << sum << endl;
	} 
	return 0;
}
```

## 2.4 2æ¬¡å…ƒã®ç´¯ç©å’Œï¼ˆ2ï¼‰
### A09 - Winter in ALGO Kingdom

H*Wã®ãƒã‚¹ã«é›ªãŒé™ã‚‹ã€‚äºŒã¤ãƒã‚¹ãŒNå›ä¸ãˆã‚‰ã‚Œã€ãã‚Œã‚‰ã®ãƒã‚¹ã‚’å·¦ä¸Šã¨å³ä¸‹ã«é…ç½®ã—ãŸé•·æ–¹å½¢ã®é ˜åŸŸã®ç©é›ªãŒ1cmãšã¤å¢—ãˆã‚‹ã€‚æœ€çµ‚çš„ã«å„ãƒã‚¹ã®ç©é›ªã‚’å‡ºåŠ›ã›ã‚ˆã€ã¨ã„ã†å•é¡Œã€‚

https://atcoder.jp/contests/tessoku-book/tasks/tessoku_book_i

```cpp
int H, W, N;
int A[1000009], B[1000009], C[1000009], D[1000009];
int dots[1509][1509];

int main()
{
	cin >> H >> W >> N;
	for (int i = 0; i <= 1505; i++)
	{
		for (int j = 0; j <= 1505; j++) dots[i][j] = 0;
	}
	for (int i = 1; i <= N; i++)
	{
		cin >> A[i] >> B[i] >> C[i] >> D[i];
		dots[A[i]][B[i]]++;
		dots[A[i]][D[i] + 1]--;
		dots[C[i] + 1][B[i]]--;
		dots[C[i] + 1][D[i] + 1]++;
	}
	for (int i = 1; i <= H; i++)
	{
		for (int j = 1; j <= W; j++) dots[i][j] += dots[i][j - 1];
	}
	for (int j = 1; j <= W; j++)
	{
		for (int i = 1; i <= H; i++) dots[i][j] += dots[i - 1][j];
	}
	for (int i = 1; i <= H; i++)
	{
		for (int j = 1; j <= W; j++)
		{
			if (j > 1) cout << " ";
			cout << dots[i][j];
		}
		cout << endl;
	}
	return 0;
}
```

### B09 - Papers

2æ¬¡å…ƒå¹³é¢ä¸Šã«Næšã®ç´™ãŒã‚ã‚‹ã€‚äºŒã¤ãƒã‚¹ãŒNå›ä¸ãˆã‚‰ã‚Œã€Næšã®ç´™ã¯ãã‚Œã‚‰ã®ãƒã‚¹ã‚’å·¦ä¸Šã¨å³ä¸‹ã«é…ç½®ã—ãŸé•·æ–¹å½¢ã®ä½ç½®ã‚ã‚‹ã€‚1æšä»¥ä¸Šã®ç´™ãŒç½®ã‹ã‚Œã¦ã„ã‚‹éƒ¨åˆ†ã®é¢ç©ã‚’æ±‚ã‚ã‚ˆã€ã¨ã„ã†å•é¡Œã€‚

å„åº§æ¨™ã«ä½•æšã®ç´™ãŒé‡ãªã£ã¦ã„ã‚‹ã‹ã‚’äºŒæ¬¡å…ƒç´¯ç©å’Œã§æ±‚ã‚ã¦ã€æœ€çµ‚çš„ã«0ã§ãªã„éƒ¨åˆ†ã®é¢ç©ã‚’è¶³ã—ã¦å‡ºåŠ›ã™ã‚‹ã€‚


https://atcoder.jp/contests/tessoku-book/tasks/tessoku_book_ch

```cpp
int N;
int A[1000009], B[1000009], C[1000009], D[1000009];
int dots[1509][1509];

int main()
{
	cin >> N;
	for (int i = 0; i <= 1505; i++)
	{
		for (int j = 0; j <= 1505; j++) dots[i][j] = 0;
	}
	for (int i = 1; i <= N; i++)
	{
		cin >> A[i] >> B[i] >> C[i] >> D[i];
		dots[A[i]][B[i]]++;
		dots[A[i]][D[i]]--;
		dots[C[i]][B[i]]--;
		dots[C[i]][D[i]]++;
	}
	for (int i = 0; i <= 1505; i++)
	{
		for (int j = 1; j <= 1505; j++) dots[i][j] += dots[i][j - 1];
	}
	for (int j = 0; j <= 1505; j++)
	{
		for (int i = 1; i <= 1505; i++) dots[i][j] += dots[i - 1][j];
	}
	int count = 0;
	for (int i = 0; i <= 1505; i++)
	{
		for (int j = 0; j <= 1505; j++)
		{
			if (dots[i][j] > 0) count++;
		}
	}
	cout << count << endl;
	return 0;
}
```

## 2.5 ãƒãƒ£ãƒ¬ãƒ³ã‚¸å•é¡Œ
### A10 - Resort Hotel

Nå€‹ã®éƒ¨å±‹ãŒã‚ã‚Šã€iå·å®¤ã¯Aiäººå…¥ã‚Œã‚‹ã€‚Dæ—¥é–“å·¥äº‹ãŒè¡Œã‚ã‚Œã€dæ—¥ç›®ã«ã¯Ldå·å®¤ã‹ã‚‰Rdå·å®¤ã¾ã§ã®ä½¿ç”¨ãŒã§ããªã„ã€‚dæ—¥ç›®ã«ä½¿ç”¨ã§ãã‚‹æœ€ã‚‚äººæ•°ã®å…¥ã‚Œã‚‹éƒ¨å±‹ã¯ä½•äººéƒ¨å±‹ã§ã‚ã‚‹ã‹æ±‚ã‚ã‚ˆã€ã¨ã„ã†å•é¡Œã€‚

ä¸­é–“ã«ã‚ã‚‹éƒ¨å±‹ãŒä½¿ç”¨ã§ããªããªã‚‹ã®ã§ã€å³ã‹ã‚‰ä¸€ç•ªå¤§ããªéƒ¨å±‹ã¨å·¦ã‹ã‚‰èª¿ã¹ãŸæ™‚ã«ä¸€ç•ªå¤§ããªéƒ¨å±‹ã‚’è¨˜éŒ²ã—ãŸé…åˆ—ã‚’ç”¨æ„ã—ã¦ãŠãã¨ä½¿ç”¨ã§ããªããªã‚‹éƒ¨å±‹ã®å·¦å´ã¨å³å´ã®ä¸€ç•ªå¤§ããªéƒ¨å±‹åŒå£«ã‚’æ¯”è¼ƒã™ã‚‹ã ã‘ã«ãªã‚‹ã€‚

https://atcoder.jp/contests/tessoku-book/tasks/tessoku_book_j

```cpp
int N, A[100009], D, L[100009], R[100009], left_maxroom[100009], right_maxroom[100009];

int main()
{
	cin >> N;
	for (int i = 0; i < N; i++) cin >> A[i];
	cin >> D;
	for (int i = 0; i < D; i++) cin >> L[i] >> R[i];
	left_maxroom[0] = A[0];
	right_maxroom[N - 1] = A[N - 1];
	for (int i = 1; i < N; i++)
	{
		if (A[i] > left_maxroom[i - 1])
		{
			left_maxroom[i] = A[i];
		}
		else
		{
			left_maxroom[i] = left_maxroom[i - 1];
		}
		if (A[N - 1 - i] > right_maxroom[N - i])
		{
			right_maxroom[N - 1 - i] = A[N - 1 - i];
		}
		else
		{
			right_maxroom[N - 1 - i] = right_maxroom[N - i];
		}
	}
	for (int i = 0; i < D; i++)
	{
		if (right_maxroom[R[i]] > left_maxroom[L[i] - 2])
		{
			cout << right_maxroom[R[i]] << endl;
		}
		else
		{
			cout << left_maxroom[L[i] - 2] << endl;
		}
	}
	return 0;
}
```

## ã‚³ãƒ©ãƒ 3 ã‚¢ãƒ«ã‚´ãƒªã‚ºãƒ ã§ä½¿ã†æ•°å­¦

# 3ç«  äºŒåˆ†æ¢ç´¢
## 3.0 äºŒåˆ†æ¢ç´¢ã¨ã¯
ç›¸æ‰‹ã®å¹´é½¢ãŒæ°—ã«ãªã£ãŸã¨ã™ã‚‹ã€‚1æ­³ã§ã™ã‹ï¼Ÿ2æ­³ã§ã™ã‹ï¼Ÿ...ã¨1æ­³ãšã¤1æ­³ãšã¤1æ­³ãšã¤ã‚¤ãƒ³ã‚¯ãƒªãƒ¡ãƒ³ãƒˆã—ã¦èãã®ã‚‚ã„ã„ãŒã€ã‚‚ã£ã¨æ—©ãè§£ã«è¾¿ã‚Šç€ã‘ã‚‹ã€‚

äººé–“ãŒ0æ­³ã‹ã‚‰100æ­³ã¾ã§ã®é–“ã®å¹´é½¢ã‚’ã¨ã‚‹ã¨ã™ã‚‹ã¨ã€

 - 50æ­³ä»¥ä¸‹ã§ã™ã‹ï¼Ÿâ†’ "yes"
 - 25æ­³ä»¥ä¸‹ã§ã™ã‹ï¼Ÿâ†’ "yes"
 - 12æ­³ä»¥ä¸‹ã§ã™ã‹ï¼Ÿâ†’ "no"
 - 19æ­³ä»¥ä¸‹ã§ã™ã‹ï¼Ÿâ†’ "no"
 - 22æ­³ä»¥ä¸‹ã§ã™ã‹ï¼Ÿâ†’ "no"
 - 23æ­³ä»¥ä¸‹ã§ã™ã‹ï¼Ÿâ†’ "yes"

ã¨ã‚ã‚Šã†ã‚‹å€¤ã®åŠåˆ†ã§åŒºåˆ‡ã‚Šç¶šã‘ã‚‹ã€ã¨ã„ã†äºŒåˆ†æ¢ç´¢æ³•ãŒè¨ˆç®—é‡ O(logN)ã§éå¸¸ã«åŠ¹ç‡çš„ã¨ã„ã†ã“ã¨ãŒçŸ¥ã‚‰ã‚Œã¦ã„ã‚‹ã€‚

## 3.1 é…åˆ—ã®äºŒåˆ†æ¢ç´¢
### A11 - Binary Search 1

å°ã•ã„é †ã«ä¸¦ã¹ã‚‰ã‚ŒãŸé…åˆ—ã®ä½•ç•ªç›®ã«è©²å½“è¦ç´ ãŒã‚ã‚‹ã‹ã‚’æ±‚ã‚ã‚‹å•é¡Œã€‚

ft_search()ã®éƒ¨åˆ†ã§äºŒåˆ†æ¢ç´¢æ³•ã‚’å®Ÿè£…ã—ã¦ã„ã‚‹ã€‚

https://atcoder.jp/contests/tessoku-book/tasks/tessoku_book_k

```cpp
int N, X;
int A[100009];

int	ft_search(int x)
{
	int L = 1;
	int R = N;
	while (L <= R)
	{
		int M = (L + R) / 2;
		if (x < A[M]) R = M - 1;
		if (x == A[M]) return M;
		if (x > A[M]) L = M + 1;
	}
	return -1;
}

int main()
{
	cin >> N >> X;
	for (int i = 1; i <= N; i++) cin >> A[i];
	int ans = ft_search(X);
	cout << ans << endl;
	return 0;
}
```

### B11 - Binary Search 2

ä¸ãˆã‚‰ã‚ŒãŸé…åˆ—Aã®ä¸­ã«Xã‚ˆã‚Šå°ã•ãªæ•°ã¯å¹¾ã¤å­˜åœ¨ã™ã‚‹ã‹ï¼Ÿã¨ã„ã†è³ªå•ã«Qå›ç­”ãˆã‚‹å•é¡Œã€‚

äºŒåˆ†æ¢ç´¢ã¯é…åˆ—ãŒã‚½ãƒ¼ãƒˆã•ã‚Œã¦ã„ã‚‹çŠ¶æ…‹ã§ãªã„ã¨è¡Œãˆãªã„ã®ã§ã€sortã—ã¦ã‹ã‚‰äºŒåˆ†æ¢ç´¢ï¼ˆlower_boundé–¢æ•°ï¼‰ã§é…åˆ—ã®ä¸­ã§XãŒå°ã•ã„æ–¹ã‹ã‚‰ä½•ç•ªç›®ã‹èª¿ã¹ã¦ã„ã‚‹ã€‚

lower_bound()ã¯ã‚¤ãƒ†ãƒ¬ãƒ¼ã‚¿ã‚’è¿”ã™ã®ã§ã€ `lower_bound(A, A + N, X) - A` ã¨ã™ã‚‹ã“ã¨ã§é…åˆ—ã®å‰ã‹ã‚‰ä½•ç•ªç›®ã«ä½ç½®ã™ã‚‹ã‹ã®ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹ã¨ã—ã¦å¾—ã‚‹ã“ã¨ãŒã§ãã‚‹ã€‚ï¼ˆindexã¯0ã‹ã‚‰å§‹ã¾ã‚‹ã“ã¨ã«æ³¨æ„ï¼‰

https://atcoder.jp/contests/tessoku-book/tasks/tessoku_book_cj

```cpp
int N, A[100009], Q, X;

int	main()
{
	cin >> N;
	for (int i = 0; i < N; i++) cin >> A[i];
	cin >> Q;
	sort(A, A + N);
	for (int i = 0; i < Q; i++)
	{
		cin >> X;
		int pos = lower_bound(A, A + N, X) - A;
		cout << pos << endl;
	}
	return 0;
}
```

## 3.2 ç­”ãˆã§äºŒåˆ†æ¢ç´¢
### A12 - Printer
Nãƒã‚¤ã®ãƒ—ãƒªãƒ³ã‚¿ãƒ¼ãŒã‚ã‚Šã€ãã‚Œãã‚ŒAiç§’é–“éš”ã§1æšãƒãƒ©ã‚·ã‚’å°åˆ·ã™ã‚‹ã€‚ã™ã¹ã¦ã®ãƒ—ãƒªãƒ³ã‚¿ãƒ¼ã®ã‚¹ã‚¤ãƒƒãƒã‚’åŒæ™‚ã«å…¥ã‚ŒãŸæ™‚ã€Kæšç›®ã®ãƒãƒ©ã‚·ãŒå°åˆ·ã•ã‚Œã‚‹ã®ã¯ä½•ç§’å¾Œã‹ã€‚

`ft_check(mid)`ã§ç­”ãˆãŒmidç§’ã‚ˆã‚Šå‰ã‹å¾Œã‹åˆ¤å®šã™ã‚‹ãƒ—ãƒ­ã‚°ãƒ©ãƒ ã‚’çµ„ã¿è¾¼ã‚“ã äºŒåˆ†æ¢ç´¢ã§å®Ÿè£…ã§ãã‚‹ã€‚

https://atcoder.jp/contests/tessoku-book/tasks/tessoku_book_l

```cpp
int N, K, A[100009];

bool	ft_check(long long x)
{
	long long sum = 0;
	for (int i = 1; i <= N; i++) sum += x / A[i];
	if (sum >= K) return true;
	return false;
}

int main()
{
	cin >> N >> K;
	for (int i = 1; i <= N; i++) cin >> A[i];
	long long L = 1;
	long long R = 1000000000;
	while (L <= R)
	{
		long long mid = (R + L) / 2;
		if (ft_check(mid)) R = mid - 1;
		else L = mid + 1;
	}
	cout << L << endl;
	return 0;
}
```

### B12 - Equation

`x^3 + x = N` ã‚’æº€ãŸã™æ­£ã®å®Ÿæ•°xã‚’å‡ºåŠ›ã›ã‚ˆã€‚èª¤å·®ãŒ1e3ä»¥ä¸‹ã§ã‚ã‚Œã°ã„ã„ã€‚

`x^3 + x`ã¯å˜èª¿å¢—åŠ ã®é–¢æ•°ãªãŸã‚ã€ç­”ãˆãŒxä»¥ä¸Šã‹ï¼Ÿã§äºŒåˆ†æ¢ç´¢ãŒå¯èƒ½ã€‚

https://atcoder.jp/contests/tessoku-book/tasks/tessoku_book_ck

```cpp
int N;

int main()
{
	cin >> N;
	float L = 1;
	float R = 100;
	for (int i = 0; i < 10000; i++)
	{
		float mid = (L + R) / 2;
		if ((mid * mid * mid) + mid > N) R = mid;
		else L = mid;
	}
	cout << L << endl;
	return 0;
}
```

## 3.3 ã—ã‚ƒãã¨ã‚Šæ³•
ABC353ã®Cå•é¡Œã«å‡ºã¦ãã¦è§£ã‘ãšæ‚”ã—ã„æ€ã„ã‚’ã—ãŸã®ãŒè¨˜æ†¶ã«æ–°ã—ã„ã€‚
ã—ã‚ƒãã¨ã‚Šæ³•ã¯é…åˆ—ã‚„ãƒªã‚¹ãƒˆã®ä¸­ã§é€£ç¶šã—ãŸéƒ¨åˆ†ã‚’åŠ¹ç‡ã‚ˆãæ¢ã™æ–¹æ³•ã§ã€
äºŒåˆ†æ¢ç´¢ã®O(logN)ã‚ˆã‚Šã‚‚æ—©ã„O(N)ã§å®Ÿè£…ã§ãã‚‹ã€‚

https://atcoder.jp/contests/abc353/editorial/9957

### A13 - Close Pairs

Nå€‹ã®æ•´æ•°ã‹ã‚‰äºŒã¤é¸ã¶ã€‚å·®ãŒKä»¥ä¸‹ã¨ãªã‚‹é¸ã³æ–¹ã¯ä½•é€šã‚Šã‚ã‚‹ã‹ã€‚

https://atcoder.jp/contests/tessoku-book/tasks/tessoku_book_m

```cpp
int N, K, A[100009], R[100009];

int main()
{
	cin >> N >> K;
	for (int i = 1; i <= N; i++) cin >> A[i];
	for (int i = 1; i <= N - 1; i++)
	{
		if (i == 1)  R[i] = 1;
		else R[i] = R[i - 1];
		while(R[i] < N && A[R[i] + 1] - A[i] <= K)
		{
			R[i] += 1;
		}
	}
	long long ans = 0;
	for (int i = 1; i <= N - 1; i++)
	{
		ans += (R[i] - i);
	}
	cout << ans << endl;
	return 0;
}
```

### B13 - Supermarket 2

Nå€‹ã®å•†å“ã«1ã‹ã‚‰Nã¾ã§ã®ç•ªå·ãŒã¤ã„ã¦ã„ã‚‹ã€‚éš£ã‚Šåˆã£ãŸç•ªå·ã®å•†å“ã‚’åˆè¨ˆé‡‘é¡Kå††ã„ãªã„ã§è³¼å…¥ã™ã‚‹æ–¹æ³•ã¯ä½•é€šã‚Šã‚ã‚‹ã‹ã€‚

ãŸã æ±‚ã‚ã‚‹ã ã‘ã§ã‚ã‚Œã° N*(N+1)/2 ã®å…¨é€šã‚Šã‚’èª¿ã¹ã‚‹æ–¹æ³•ã‚‚ã‚ã‚Šãã†ã ãŒã€è¨ˆç®—é‡ O(N)ã§æ±‚ã‚ã‚ˆã¨ã„ã†åˆ¶ç´„ãŒã‚ã‚Šã§ããªã„ã€‚

ã¾ãšç´¯ç©å’Œã‚’è¨ˆç®—ã—ã¦ãŠãã€ã—ã‚ƒãã¨ã‚Šæ³•ã‚’ç”¨ã„ã‚‹ã“ã¨ã§å®Ÿè£…ã§ãã‚‹ã€‚

https://atcoder.jp/contests/tessoku-book/tasks/tessoku_book_cl

```cpp
int N, K, A[100009], cum[100009], R[100009];
long long ans = 0;

int main()
{
	cin >> N >> K;
	for (int i = 1; i <= N; i++) cin >> A[i];
	cum[1] = A[1];
	for (int i = 2; i <= N; i++) cum[i] = cum[i - 1] + A[i];
	for (int i = 1; i <= N - 1; i++)
	{
		if (i == 1) R[i] = 0;
		else R[i] = R[i - 1];
		while (R[i] < N && cum[R[i] + 1] - cum[i - 1] <= K) R[i]++;
		ans += R[i] - i + 1;
	}
	if (A[N] <= K) ans++;
	cout << ans << endl;
	return 0;
}
```

## 3.4 åŠåˆ†å‰åˆ—æŒ™
### A14 - Four Boxes

4ã¤ã®ãƒœãƒƒã‚¯ã‚¹ã«ãã‚Œãã‚ŒNæšã®æ•´æ•°ãŒæ›¸ã„ã¦ã‚ã‚‹ã‚«ãƒ¼ãƒ‰ãŒå…¥ã£ã¦ã„ã‚‹ã€‚ãã‚Œãã‚Œã®ç®±ã‹ã‚‰1æšãšã¤ã‚«ãƒ¼ãƒ‰ã‚’å–ã‚Šå‡ºã—ã€åˆè¨ˆãŒKã¨ãªã‚‹å¯èƒ½æ€§ãŒã‚ã‚‹ã‹ã‚’åˆ¤å®šã›ã‚ˆã€‚

ç´ ç›´ã«4æšã®ã‚«ãƒ¼ãƒ‰ã®é¸ã³æ–¹ã‚’å…¨æ¢ç´¢ã™ã‚‹ã¨ã€N^4é€šã‚Šã¨ãªã‚Šé–“ã«åˆã„ã¾ã›ã‚“ã€‚

ãã“ã§ã€2ç®±ãšã¤ã«åˆ†ã‘ã¦ã€ãã‚Œãã‚Œã®ç®±ã‹ã‚‰å–ã‚Šå‡ºã—ãŸæ•°ã®åˆè¨ˆã®å…¨ã¦ã®ãƒ‘ã‚¿ãƒ¼ãƒ³ã‚’è¨˜éŒ²ã—ã¦ãŠãã¾ã™ã€‚ãã—ã¦ã€ãã‚Œã‚‰ã®å…¨ã¦ã®ãƒ‘ã‚¿ãƒ¼ãƒ³ã®ç®±äºŒã¤ã‹ã‚‰ä¸€æšãšã¤å–ã‚Šå‡ºã—ã¦è¶³ã—åˆã‚ã›ãŸæ™‚ã«åˆè¨ˆãŒKã«ãªã‚‹ã‹ã©ã†ã‹ã‚’èª¿ã¹ã¦ã„ãã¾ã™ã€‚è¨ˆç®—é‡ã¯å‰åŠãŒO(N^2)ã€å¾ŒåŠã§ã¯äºŒåˆ†æ¢ç´¢æ³•ã‚’N^2å›è¡Œã†ãŸã‚O(N^2 * logN) ã¨ãªã‚Šã¾ã™ã€‚

https://atcoder.jp/contests/tessoku-book/tasks/tessoku_book_n

```cpp
int  N, K, A[1009], B[1009], C[1009], D[1009], AB[1000009], CD[1000009];

int main()
{
	cin >> N >> K;
	for (int i = 1; i <= N; i++) cin >> A[i];
	for (int i = 1; i <= N; i++) cin >> B[i];
	for (int i = 1; i <= N; i++) cin >> C[i];
	for (int i = 1; i <= N; i++) cin >> D[i];
	for (int i = 1; i <= N; i++)
	{
		for (int j = 1; j <= N; j++)
		{
			AB[(i - 1) * N + j] = A[i] + B[j];
			CD[(i - 1) * N + j] = C[i] + D[j];
		}	
	}
	sort(CD + 1, CD + N * N + 1);
	for (int i = 1; i <= N * N; i++)
	{
		int pos = lower_bound(CD + 1, CD + N * N + 1, K - AB[i]) - CD;
		if (pos <= N * N && CD[pos] == K - AB[i])
		{
			cout << "Yes" << endl;
			return 0;
		}
	}
	cout << "No" << endl;
	return 0;
}
```

### B14 - Another Subset Sum

Næšã®ã‚«ãƒ¼ãƒ‰ã®ä¸­ã‹ã‚‰åˆè¨ˆãŒKã«ãªã‚‹ã‚ˆã†ãªé¸ã³æ–¹ã¯å­˜åœ¨ã™ã‚‹ã‹ã€ã¨ã„ã†å•é¡Œã€‚

ãã‚Œãã‚Œã®ã‚«ãƒ¼ãƒ‰ã‚’é¸ã¶ã‹é¸ã°ãªã„ã‹ã®2é€šã‚ŠãŒNæšã‚ã‚‹ã®ã§ã€maxã®è¨ˆç®—é‡ã¯2^Nã¨ãªã‚‹ã€‚

Aå•é¡Œã‚’å‚è€ƒã«N/2æšãšã¤ã«åˆ†ã‘ã¦å¯èƒ½æ€§ã®ã‚ã‚‹åˆè¨ˆã®æ•°ã‚’è¨˜éŒ²ã—ã¦ã€æœ€çµ‚çš„ã«Kã¨ãªã‚‹çµ„ã¿åˆã‚ã›ãŒå­˜åœ¨ã™ã‚‹ã‹ã€ã¨ã„ã†èª¿ã¹æ–¹ã ã¨å®Ÿè¡Œåˆ¶é™æ™‚é–“ã«é–“ã«åˆã†ã€‚

https://atcoder.jp/contests/tessoku-book/tasks/tessoku_book_cm

```cpp
int N, K, A[33], first[1000009], second[1000009];

int main()
{
	cin >> N >> K;
	for (int i = 0; i < N; i++) cin >> A[i];
	//å‰åŠã®çµ„ã¿åˆã‚ã›å…¨åˆ—æŒ™
	for (int i = 0; i < (1 << (N / 2)); i++)
	{
		int sum = 0;
		for (int j = 0; j <= N / 2; j++)
		{
			if ((i >> j) & 1) sum += A[j];
		}
		first[i] = sum;
	}
	//å¾ŒåŠã®çµ„ã¿åˆã‚ã›å…¨åˆ—æŒ™
	for (int i = 0; i < (1 << N - (N / 2)); i++)
	{
		int sum = 0;
		for (int j = 0; j <= N - (N / 2); j++)
		{
			if ((i >> j) & 1) sum += A[j + N / 2];
		}
		second[i] = sum;
	}
	sort(first, first + (1 << N / 2));
	for (int i = 1; i <= (1 << N - (N / 2)); i++)
	{
		int L = 0;
		int R =(1 << N / 2) - 1;
		while (L <= R)
		{
			int mid = (L + R) / 2;
			if (second[i] + first[mid] < K) L = mid + 1;
			else if (second[i] + first[mid] == K)
			{
				cout << "Yes" << endl;
				return 0;
			}
			else R = mid - 1;
		}
	}
	cout << "No" << endl;
	return 0;
}
```

## 3.5 ãƒãƒ£ãƒ¬ãƒ³ã‚¸å•é¡Œ
### A15 - Compression

è¨€è‘‰ã§èª¬æ˜ãŒã—ã¥ã‚‰ã„ãŒã€æ¨ªã®æ•°ã¨ã®å¤§å°é–¢ä¿‚ãŒå…¥ã‚Œæ›¿ã‚ã‚‰ãªã„åˆ¶é™ã®å…ƒã§ã€é…åˆ—ã®ãã‚Œãã‚Œã®è¦ç´ ã‚’ãªã‚‹ã¹ãå°ã•ãªæ•´æ•°ã«åœ§ç¸®ã—ãªã•ã„ã€ã¨ã„ã†å•é¡Œã€‚åº§æ¨™åœ§ç¸®ã¨è¨€ã‚ã‚Œã‚‹ã‚ˆã†ãªæ“ä½œã‚‰ã—ã„ã€‚

https://atcoder.jp/contests/tessoku-book/tasks/tessoku_book_o

```cpp
int N, A[100009], B[100009];

int main()
{
	cin >> N;
	for (int i = 1; i <= N; i++) cin >> A[i];
	vector<int> T;
	for (int i = 1; i <= N; i++) T.push_back(A[i]);
	sort(T.begin(), T.end());
	T.erase(unique(T.begin(), T.end()), T.end());

	for (int i = 1; i <= N; i++)
	{
		B[i] = lower_bound(T.begin(), T.end(), A[i]) - T.begin();
		B[i] += 1;
	}
	for (int i = 1; i <= N; i++)
	{
		if (i > 1) cout << " ";
		cout << B[i];
	}
	cout << endl;
	return 0;
}
```

# 4ç«  å‹•çš„è¨ˆç”»æ³•
ã“ã“ã¾ã§ã®ç« ã¯3,4æ™‚é–“ã»ã©ã§ã‚¯ãƒªã‚¢ã—ã¦ã“ã‚ŒãŸãŒã€ã“ã®ç« ã¯é‡ã‹ã£ãŸã€‚æ­£ç›´Piscineã§å‹•çš„è¨ˆç”»æ³•ã®åŸºç¤ã«ã¯è§¦ã‚Œã¦ã„ãŸã®ã§ã€ã‚µã‚¯ã‚µã‚¯ã“ãªã›ã‚‹ã¨è€ƒãˆã¦ã„ãŸãŒç”˜ã‹ã£ãŸã€‚äºŒæ—¥ã‹ã‘ã¦ä½•ã¨ã‹è»½ã„ç†è§£ãŒã§ããŸã‚¤ãƒ¡ãƒ¼ã‚¸ã€‚

## 4.0 å‹•çš„è¨ˆç”»æ³•ã¨ã¯
å‹•çš„è¨ˆç”»æ³•ã¯ã€ã‚ˆã‚Šå°ã•ãªå•é¡Œã®çµæœã‚’åˆ©ç”¨ã—ã¦å•é¡Œã‚’è§£ã„ã¦ã„ãæ–¹æ³•ã€‚
è¨ˆç®—ã®é‡è¤‡ãŒèµ·ã“ã‚‰ãªã„ãŸã‚ã€å…¨æ¢ç´¢ãªã©ã‚ˆã‚Šã‚‚éå¸¸ã«åŠ¹ç‡çš„ã«è§£ã‘ã‚‹ã¨ã„ã†ç†è§£ã‚’ã—ã¦ã„ã‚‹ã€‚

## 4.1 å‹•çš„è¨ˆç”»æ³•ã®åŸºæœ¬
### A16 - Dungeon 1

https://atcoder.jp/contests/tessoku-book/tasks/tessoku_book_p

ãƒ€ãƒ³ã‚¸ãƒ§ãƒ³ã®æœ€çŸ­ç§»å‹•æ™‚é–“ã‚’æ±‚ã‚ã‚‹å•é¡Œã€‚nç•ªç›®ã®éƒ¨å±‹ã¸ã®æœ€çŸ­ç§»å‹•æ™‚é–“ã¯(n-1)ç•ªç›®ã¨(n-2)ç•ªç›®ã®éƒ¨å±‹ã¸ã®æœ€çŸ­ç§»å‹•æ™‚é–“ã‚’åˆ©ç”¨ã—ã¦è§£ã„ã¦ã„ãã€‚

```cpp
int N, A[100009], B[100009], min_time[100009];

int main()
{
	cin >> N;
	for (int i = 2; i <= N; i++) cin >> A[i];
	for (int i = 3; i <= N; i++) cin >> B[i];
	min_time[1] = 0;
	min_time[2] = A[2];
	for (int i = 3; i <= N; i++)
	{
		min_time[i] = min(min_time[i - 1] + A[i], min_time[i - 2] + B[i]);
	}
	cout << min_time[N] << endl;
}
```

### B16 - Frog 1

ç§»å‹•ã‚³ã‚¹ãƒˆã®æœ€å°å€¤ã‚’æ±‚ã‚ã‚‹å•é¡Œã€‚ä¸Šã®ãƒ€ãƒ³ã‚¸ãƒ§ãƒ³ã¨åŒæ§˜ã«ã€nç•ªç›®ã®è¶³å ´ã¸ã®æœ€å°ã‚³ã‚¹ãƒˆã¯(n-1)ç•ªç›®ã¨(n-2)ç•ªç›®ã®è¶³å ´ã¸ã®æœ€å°ã‚³ã‚¹ãƒˆã‚’åˆ©ç”¨ã—ã¦è§£ã„ã¦ã„ãã€‚

https://atcoder.jp/contests/tessoku-book/tasks/dp_a

```cpp
int N, h[100009], min_cost[100009];

int main()
{
	cin >> N;
	for (int i = 1; i <= N; i++) cin >> h[i];
	min_cost[1] = 0;
	min_cost[2] = abs(h[2] - h[1]);
	for (int i = 3; i <= N; i++)
	{
		min_cost[i] = min(min_cost[i - 1] + abs(h[i] - h[i - 1]), min_cost[i - 2] + abs(h[i] - h[i - 2]));
 	}
	cout << min_cost[N] << endl;
	return 0;
}
```

## 4.2 å‹•çš„è¨ˆç”»æ³•ã®å¾©å…ƒ
### A17 - Dungeon 2

å…ˆã®ãƒ€ãƒ³ã‚¸ãƒ§ãƒ³å•é¡Œï¼ˆA16ï¼‰ã§æ±‚ã‚ãŸã€æœ€çŸ­ç§»å‹•æ™‚é–“ã‚’å®Ÿç¾ã§ãã‚‹çµŒè·¯ã‚’å‡ºåŠ›ã›ã‚ˆã€ã¨ã„ã†å•é¡Œã€‚

æœ€çŸ­çµŒè·¯ã‚’å…ˆã®æ–¹æ³•ã§æ±‚ã‚ã€‚ãã®æœ€çŸ­çµŒè·¯ã‚’ã‚´ãƒ¼ãƒ«ã‹ã‚‰é¡ã‚ŠãªãŒã‚‰æœ€çŸ­çµŒè·¯ã‚’è¨˜éŒ²ã—ã¦ã„ãã€‚

https://atcoder.jp/contests/tessoku-book/tasks/tessoku_book_q

```cpp
int N, A[100009], B[100009], min_time[100009];
vector<int> path;

int main()
{
	cin >> N;
	for (int i = 2; i <= N; i++) cin >> A[i];
	for (int i = 3; i <= N; i++) cin >> B[i];
	min_time[1] = 0;
	min_time[2] = A[2];
	for (int i = 3; i <= N; i++)
	{
		min_time[i] = min(min_time[i - 1] + A[i], min_time[i - 2] + B[i]);
	}
	int place  = N;
	while (1)
	{
		path.push_back(place);
		if (place == 1)
			break;
		if (min_time[place] == min_time[place - 1] + A[place])
			place -= 1;
		else
			place -= 2;
	}
	reverse(path.begin(), path.end());
	cout << path.size() << endl;
	for (int i = 0; i < path.size(); i++)
	{
		if (i > 0) cout << " ";
		cout << path[i];
	}
	cout << endl;
	return 0;
}
```

### B17 - Frog 1 with Restoration

B16ã§è§£ã„ãŸã‚«ã‚¨ãƒ«ã®ç§»å‹•ã‚³ã‚¹ãƒˆã‚’æœ€å°åŒ–ã™ã‚‹çµŒè·¯ã‚’å‡ºåŠ›ã—ã¦ãã ã•ã„ã€ã¨ã„ã†å•é¡Œã€‚
ã“ã¡ã‚‰ã‚‚å…ˆã»ã©ã¨åŒæ§˜ã€æœ€å°ã‚³ã‚¹ãƒˆã‚’å‹•çš„è¨ˆç”»æ³•ã§æ±‚ã‚ã€‚ãã®æœ€å°ã‚³ã‚¹ãƒˆã‚’å®Ÿç¾ã™ã‚‹ãƒ«ãƒ¼ãƒˆã‚’ã‚´ãƒ¼ãƒ«ã‹ã‚‰é¡ã‚ŠãªãŒã‚‰è¨˜éŒ²ã—ã¦ã„ãã€‚

https://atcoder.jp/contests/tessoku-book/tasks/tessoku_book_cp

```cpp
int N, h[100009], min_cost[100009];
vector<int> path;

int main()
{
	cin >> N;
	for (int i = 1; i <= N; i++) cin >> h[i];
	min_cost[1] = 0;
	min_cost[2] = abs(h[2] - h[1]);
	for (int i = 3; i <= N; i++)
	{
		min_cost[i] = min(min_cost[i - 1] + abs(h[i] - h[i - 1]), min_cost[i - 2] + abs(h[i] - h[i - 2]));
 	}
	int place = N;
	while(1)
	{
		path.push_back(place);
		if (place == 1)
			break;
		if (min_cost[place] == min_cost[place - 1] + abs(h[place] - h[place - 1]))
			place -= 1;
		else
			place -= 2;
	}
	reverse(path.begin(), path.end());
	cout << path.size() << endl;
	for(int i = 0; i < path.size(); i++)
	{
		if (i > 0) cout << " ";
		cout << path[i];
	}
	cout << endl;
	return 0;
}
```

## 4.3 äºŒæ¬¡å…ƒã®DPï¼ˆ1ï¼‰:éƒ¨åˆ†å’Œå•é¡Œ
ã‚³ãƒ©ãƒ 2ã«ãŠã„ã¦ãƒ“ãƒƒãƒˆå…¨æ¢ç´¢ã§è§£ã„ãŸéƒ¨åˆ†å’Œå•é¡Œã‚’ã•ã‚‰ã«åŠ¹ç‡çš„ã«å‹•çš„è¨ˆç”»æ³•ã§è§£ã„ã¦ã„ãã€‚

### A18 - Subset Sum

ã‚«ãƒ¼ãƒ‰ã‚’ä»»æ„ã®æšæ•°é¸æŠã—ãŸæ™‚ã«ã€åˆè¨ˆãŒã€‡ã€‡ã«ä¸€è‡´ã™ã‚‹å¯èƒ½æ€§ã¯ã‚ã‚‹ã‹ï¼Ÿã¨ã„ã†å•é¡Œã€‚
é…åˆ—ã‚’è¨­å®šã—ã€ã‚«ãƒ©ãƒ æ•°ãŒæŒ‡å®šã®åˆè¨ˆå€¤ã€rowæ•°ãŒã‚«ãƒ¼ãƒ‰ã®é¸æŠæšæ•°ã¨ã„ã†äºŒæ¬¡å…ƒé…åˆ—ã‚’ç”¨æ„ã—ã¦è§£ã„ã¦ã„ãã€‚ã“ã‚Œã‚’æœ€åˆã«è€ƒãˆãŸäººã¯ã™ã”ã„ãªã€‚ã‚¢ãƒ«ã‚´ãƒªã‚ºãƒ ã‚’å‹‰å¼·ã—ã¦ã„ã‚‹ã¨äººé¡ã®å¡æ™ºã‚’æ„Ÿã˜ã‚‹ã“ã¨ãŒã§ãã¦å¥½ãã€‚

https://atcoder.jp/contests/tessoku-book/tasks/tessoku_book_r

```cpp
int N, S, A[69];
bool dp[69][10009];

int main()
{
	cin >> N >> S;
	for (int i = 1; i <= N; i++) cin >> A[i];
	dp[0][0] = true;
	for (int i = 1; i <= S; i++) dp[0][i] = false;

	for (int i = 1; i <= N; i++)
	{
		for (int j = 0; j <= S; j++)
		{
			if (j >= A[i])
			{
				if (dp[i - 1][j] == true || dp[i - 1][j - A[i]] == true)
					dp[i][j] = true;
				else
					dp[i][j] = false;
			}
			else
			{
				if (dp[i - 1][j] == true)
					dp[i][j] = true;
				else
					dp[i][j] = false;
			}
		}
	}
	if (dp[N][S] == true) cout << "Yes" << endl;
	else cout << "No" << endl;
	return 0;
}
```

### B18 - Subset Sum with Restoration

ã“ã‚Œã¯å…ˆã®å•é¡Œã®ã€Œã‚«ãƒ¼ãƒ‰ã‚’ä»»æ„ã®æšæ•°é¸æŠã—ãŸæ™‚ã«ã€åˆè¨ˆãŒã€‡ã€‡ã«ä¸€è‡´ã™ã‚‹å¯èƒ½æ€§ã¯ã‚ã‚‹ã‹ï¼Ÿã€ã‚’èª¿ã¹ãŸä¸Šã§ã€ã‚‚ã—å¯èƒ½æ€§ãŒã‚ã‚‹ã®ã§ã‚ã‚Œã°ãã®ã‚«ãƒ¼ãƒ‰ã®çµ„ã¿åˆã‚ã›ã‚’å‡ºåŠ›ã—ã¦ãã ã•ã„ã€ã¨ã„ã†å•é¡Œã€‚

https://atcoder.jp/contests/tessoku-book/tasks/tessoku_book_cq

```cpp
int N, S, A[69];
bool dp[69][10009];
vector<int> Answer;

int main()
{
	cin >> N >> S;
	for (int i = 1; i <= N; i++) cin >> A[i];
	dp[0][0] = true;
	for (int i = 1; i <= S; i++) dp[0][i] = false;

	for (int i = 1; i <= N; i++)
	{
		for (int j = 0; j <= S; j++)
		{
			if (j >= A[i])
			{
				if (dp[i - 1][j] == true || dp[i - 1][j - A[i]] == true)
					dp[i][j] = true;
				else
					dp[i][j] = false;
			}
			else
			{
				if (dp[i - 1][j] == true)
					dp[i][j] = true;
				else
					dp[i][j] = false;
			}
		}
	}
	if (dp[N][S] == true)
	{
		int place = N;
		int num = S;
		while (1)
		{
			if (place == 0)
				break;
			if (dp[place - 1][num] == true)
			{
				place -= 1;
			}
			else
			{
				Answer.push_back(place);
				num -= A[place];
				place -= 1;
			}
		}
		reverse(Answer.begin(), Answer.end());
		cout << Answer.size() << endl;
		for (int i = 0; i < Answer.size(); i++)
		{
			if (i > 0) cout << " ";
			cout << Answer[i];
		}
		cout << endl;
	}
	else cout << "-1" << endl;
	return 0;
}
```

## 4.4 äºŒæ¬¡å…ƒã®DPï¼ˆ2ï¼‰:ãƒŠãƒƒãƒ—ã‚¶ãƒƒã‚¯å•é¡Œ
### A19 - Knapsack 1

ä»»æ„ã®é‡ã•ã€ä»»æ„ã®ä¾¡å€¤ã®Nå€‹ã®å“ç‰©ãŒã‚ã‚Šã€ãã‚Œãã‚Œã®é‡ã•ã¨ä¾¡å€¤ãŒæŒ‡å®šã•ã‚Œã‚‹ã®ã§ã€ä¾¡å€¤ãŒæœ€å¤§å€¤ã«ãªã‚‹ã‚ˆã†ã«é¸æŠã—ãŸæ™‚ã«åˆè¨ˆä¾¡å€¤ã¯ã„ãã‚‰ã«ãªã‚Šã¾ã™ã‹ã€‚ãŸã ã—ã€ãƒŠãƒƒãƒ—ã‚¶ãƒƒã‚¯ã«ã¯é‡ã•Wã¾ã§ã—ã‹å…¥ã‚Šã¾ã›ã‚“ã€ã¨ã„ã†å•é¡Œã€‚

https://atcoder.jp/contests/tessoku-book/tasks/tessoku_book_s

```cpp
long long N, W, w[109], v[109];
long long dp[109][100009];

int main()
{
	cin >> N >> W;
	for (int i = 1; i <= N; i++) cin >> w[i] >> v[i];
	for (int i = 0; i <= N; i++)
	{
		for (int i = 0; i <= W; i++) dp[N][W] = -1000000000000LL;
	}
	dp[0][0] = 0;
	for (int i = 1; i <= N; i++)
	{
		for (int j = 0; j <= W; j++)
		{
			if (j < w[i]) dp[i][j] = dp[i - 1][j];
			else dp[i][j] = max(dp[i - 1][j], dp[i - 1][j - w[i]]  + v[i]);
		}
	}
	long long ans = 0;
	for (int i = 0; i <= W; i++)
	{
		ans = max(ans, dp[N][i]);
	}
	cout << ans << endl;
	return 0;
}
```

### B19 - Knapsack 2

A19ã®ãƒŠãƒƒãƒ—ã‚¶ãƒƒã‚¯å•é¡Œã®ãã‚Œãã‚Œã®å“ç‰©ã®ä¾¡å€¤ãŒ1000æœªæº€ã«ãªã‚‹ä»£ã‚ã‚Šã«ã€WãŒ10ã®9ä¹—ã¾ã§ã®ç¯„å›²ã«ãªã‚‹ã®ã§ã€2ç§’ä»¥å†…ã«çµ‚ã‚ã‚‹ãƒ—ãƒ­ã‚°ãƒ©ãƒ ã‚’è€ƒãˆã¦ãã ã•ã„ã€‚ã¨ã„ã†å•é¡Œã€‚
é…åˆ—ã‚’ä¸€æ¬¡å…ƒã«ã™ã‚‹ã“ã¨ã¨ã€æ¨ªè»¸ã‚’é‡ã•ã§ã¯ãªãä¾¡å€¤ã®ç·é‡ã«å¤‰æ›´ã—ã€é…åˆ—ã«å…¥ã‚‹å€¤ã‚’ã€Œãã®ä¾¡å€¤ã‚’å¾—ã‚‹ãŸã‚ã®æœ€å°ã®é‡ã•ã€ã«å¤‰æ›´ã™ã‚‹ã“ã¨ã§æ­£è§£ã«ãªã£ãŸã€‚

https://atcoder.jp/contests/tessoku-book/tasks/tessoku_book_cr

```cpp
int N, weight[109], value[109];
long long W;

int main()
{
	cin >> N >> W;
	int total_value = 0;
	for (int i = 1; i <= N; i++)
	{
		cin >> weight[i] >> value[i];
		total_value += value[i];
	}
	vector<long long> dp(total_value + 1, 1000000000000000000);
	dp[0] = 0;
	for (int i = 1; i <= N; i++)
	{
		for (int j = total_value - value[i]; j >= 0; j--)
		{
			dp[j + value[i]] = min(dp[j + value[i]], dp[j] + weight[i]); 
		}
	}
	int ans = 0;
	for (int i = 0; i <= total_value; i++)
	{
		if (dp[i] <= W)
			ans = max(ans, i);
	}
	cout << ans << endl;
	return 0;
}
```

## 4.5 äºŒæ¬¡å…ƒã®DPï¼ˆ3ï¼‰:æœ€é•·å…±é€šéƒ¨åˆ†åˆ—å•é¡Œ
### A20 - LCS

äºŒã¤æ–‡å­—åˆ—ã‚’ä¸ãˆã‚‰ã‚Œã‚‹ã®ã§ã€æœ€é•·ã®å…±é€šéƒ¨åˆ†åˆ—ã‚’æ±‚ã‚ã‚‹å•é¡Œã€‚

https://atcoder.jp/contests/tessoku-book/tasks/tessoku_book_t

```cpp
int S_len, T_len, dp[2009][2009];
string S, T;

int main()
{
	cin >> S >> T;
	S_len = S.size();
	T_len = T.size();

	dp[0][0] = 0;
	for (int i = 0; i <= S_len; i++)
	{
		for (int j = 0; j <= T_len; j++)
		{
			if (i > 0 && j > 0 && S[i - 1] == T[j - 1])
			{
				dp[i][j] = max({dp[i - 1][j], dp[i][j - 1], dp[i - 1][j - 1] + 1});
			}
			else if (i > 0 && j > 0)
			{
				dp[i][j] = max(dp[i - 1][j], dp[i][j - 1]);
			}
			else if (i > 0)
			{
				dp[i][j] = dp[i - 1][j];
			}
			else if (j > 0)
			{
				dp[i][j] = dp[i][j - 1];
			}
		}
	}
	cout << dp[S_len][T_len] << endl;
	return 0;
}
```

### B20 - Edit Distance

[ç·¨é›†è·é›¢ï¼ˆãƒ¬ãƒ¼ãƒ™ãƒ³ã‚·ãƒ¥ã‚¿ã‚¤ãƒ³è·é›¢ï¼‰ã®æ±‚ã‚æ–¹](https://mathwords.net/hensyukyori)ã¨ã„ã†è¨˜äº‹ã‚’å‚è€ƒã«ã—ãªãŒã‚‰ç†è§£ã—ãŸã€‚ç›´æ„Ÿçš„ã«ã¯ã‚ã‹ã‚Šãšã‚‰ã„ã€‚
æœ€åˆä»¥ä¸‹ã®ã‚³ãƒ¼ãƒ‰ã§æå‡ºã—ãŸã¨ãã¯NGã ã£ãŸã€‚

https://atcoder.jp/contests/tessoku-book/tasks/tessoku_book_cs

```cpp
int S_len, T_len, dp[2009][2009];
string S, T;

int main()
{
    cin >> S >> T;
    S_len = S.size();
    T_len = T.size();
    dp[0][0] = 0;
    for (int i = 0; i <= S_len; i++)
    {
        for (int j = 0; j <= T_len; j++)
        {
            if (i > 0 && j > 0 && S[i - 1] == T[j - 1])
            {
                dp[i][j] = min(dp[i - 1][j], min(dp[i][j - 1], dp[i - 1][j - 1]));
            }
            else if (i > 0 && j > 0)
            {
                dp[i][j] = min(dp[i - 1][j], min(dp[i][j - 1], dp[i - 1][j - 1])) + 1;
            }
            else if (i > 0)
            {
                dp[i][j] = dp[i - 1][j] + 1;
            }
            else if (j > 0)
            {
                dp[i][j] = dp[i][j - 1] + 1;
            }
        }
    }
    cout << dp[S_len][T_len] << endl;
    return 0;
}

```

ä»¥ä¸‹ã®ãƒ—ãƒ­ã‚°ãƒ©ãƒ ã«ä¿®æ­£ã—ãŸã‚‰ACã ã£ãŸã®ã ãŒã€æ­£ç›´ä¸Šã®ã‚³ãƒ¼ãƒ‰ã®æ‚ªã‹ã£ãŸç‚¹ãŒã‚ã‹ã£ã¦ã„ãªã„ã€ã€

```cpp
int S_len, T_len, dp[2009][2009];
string S, T;

int main()
{
    cin >> S >> T;
    S_len = S.size();
    T_len = T.size();
    
    // DPãƒ†ãƒ¼ãƒ–ãƒ«ã®åˆæœŸåŒ–
    for (int i = 0; i <= S_len; i++)
    {
        for (int j = 0; j <= T_len; j++)
        {
            if (i == 0)
            {
                dp[i][j] = j;
            }
            else if (j == 0)
            {
                dp[i][j] = i;
            }
            else if (S[i - 1] == T[j - 1])
            {
                dp[i][j] = dp[i - 1][j - 1];
            }
            else
            {
                dp[i][j] = min(min(dp[i - 1][j], dp[i][j - 1]), dp[i - 1][j - 1]) + 1;
            }
        }
    }
    
    cout << dp[S_len][T_len] << endl;
    return 0;
}
```

## 4.6 äºŒæ¬¡å…ƒã®DPï¼ˆ4ï¼‰:åŒºé–“DP
### A21 - Block Game

æ¨ªä¸€åˆ—ã«ä¸¦ã‚“ã§ã„ã‚‹ãƒ–ãƒ­ãƒƒã‚¯ã‚’å¾—ç‚¹ãŒæœ€å¤§åŒ–ã™ã‚‹ã‚ˆã†ã«å–ã‚Šé™¤ã„ãŸæ™‚ã®å¾—ç‚¹ã‚’å‡ºåŠ›ã™ã‚‹ã·orã‚°ãƒ©ãƒ ã€‚

https://atcoder.jp/contests/tessoku-book/tasks/tessoku_book_u

```cpp
int N, P[2009], A[2009], dp[2009][2009];

int main()
{
	cin >> N;
	for (int i = 1; i <= N; i++) cin >> P[i] >> A[i];
	
	//dpã‚¹ã‚¿ãƒ¼ãƒˆä½ç½®ã¯ä¸€ç•ªç«¯ã‹ã‚‰ç«¯ã¾ã§ç”Ÿãæ®‹ã£ã¦ã„ã‚‹ã¨ã“ã‚
	dp[1][N] = 0;
	for (int len = N - 2; len >= 0; len--)
	{
		for (int l = 1; l <= N - len; l++)
		{
			int r = l + len;
			int score_left = 0;
			int score_right = 0;
			if (P[l - 1] <= r && P[l - 1] >= l) score_left = A[l - 1];
			if (P[r + 1] <= r && P[r + 1] >= l) score_right = A[r + 1];
			if (l == 1)
			{
				dp[l][r] = dp[l][r + 1] + score_right;
			}
			else if (r == N)
			{
				dp[l][r] = dp[l - 1][r] + score_left;
			}
			else
			{
				dp[l][r] = max(dp[l][r + 1] + score_right, dp[l - 1][r] + score_left);
			}
		}
	}
	int ans = 0;
	for (int i = 1; i <= N; i++) ans = max(ans, dp[i][i]);
	cout << ans << endl;
	return 0;
}
```

### B21 - Longest Subpalindrome

ä¸ãˆã‚‰ã‚ŒãŸæ–‡å­—åˆ—ã®ä¸­ã§ã€ä»»æ„ã®æ–‡å­—ã‚’å–ã‚Šé™¤ã„ã¦ã‚‚ã‚ˆã„æ™‚ã€æœ€é•·å¯èƒ½ãªå›æ–‡ã®æ–‡å­—æ•°ã¯ä½•æ–‡å­—ã‹ã€‚ã¨ã„ã†å•é¡Œã€‚

æ­£ç›´é›£ã—ãã¦chatGPTã‚’é ¼ã£ã¦ã—ã¾ã£ãŸã€‚åŸºæœ¬æ–¹é‡ã¯ä¸­å¿ƒæ‹¡å¼µæ³•ã‚’ç”¨ã„ã¦ã„ã‚‹ã€‚ç«¯ã®æ–‡å­—ãŒåŒã˜æ–‡å­—ã ã£ãŸã‚‰2æ–‡å­—æ–‡è¿½åŠ ã—ã¦ã„ãã¨ã„ã†ã‚·ãƒ³ãƒ—ãƒ«ãªå®Ÿè£…ãªã®ã ãŒã€å®Ÿè£…ã¨ãªã‚‹ã¨ãªãœã‹å‹•ã‹ãªã„ãƒ—ãƒ­ã‚°ãƒ©ãƒ ãŒç™ºç”Ÿã—ã¦ã—ã¾ã†ã€‚

ã“ã®å•é¡Œã¯è‡ªåˆ†ã®æ‰‹ã§å†å®Ÿè£…ã§ãã‚‹ã‹ã‚’å†ç¢ºèªã—ãªã‘ã‚Œã°ã€‚

https://atcoder.jp/contests/tessoku-book/tasks/tessoku_book_ct

```cpp
int main()
{
    int N;
    string S;
    
    cin >> N >> S;

    // dpãƒ†ãƒ¼ãƒ–ãƒ«ã®å®šç¾©ã¨åˆæœŸåŒ–
    vector<vector<int>> dp(N, vector<int>(N, 0));

    // 1æ–‡å­—ã‹ã‚‰ãªã‚‹å›æ–‡ã¯å¿…ãšä½œã‚Œã‚‹
    for (int i = 0; i < N; i++) 
        dp[i][i] = 1;

    // DPãƒ†ãƒ¼ãƒ–ãƒ«ã®æ›´æ–°
    for (int len = 2; len <= N; len++) //æ–‡å­—æ•°ãŒ2æ–‡å­—ã‹ã‚‰maxã®Næ–‡å­—ã¾ã§å¢—ã‚„ã™
    {
        for (int l = 0; l + len - 1 <= N - 1; l++) //å·¦ã®æ–‡å­—ã‚’ä¸€ã¤ãšã¤ãšã‚‰ã—ã¦ã„ã
        {
            int r = l + len - 1;
            // ã‚‚ã—å·¦å³ã®ç«¯ã®æ–‡å­—ãŒä¸€è‡´ã—ãŸå ´åˆ
            if (S[r] == S[l])
            {
                if (len == 2)
                {
					//æ–‡å­—åˆ—ãŒ2æ–‡å­—ã®æ™‚ã¯å¿…ãš2æ–‡å­—ã®å›æ–‡
                    dp[l][r] = 2;
                }
                else 
                {
					//dp[l][r]ã®æ–¹ãŒdp[l + 1][r - 1]ã‚ˆã‚Šã‚‚ã«æ–‡å­—å¤šã„â†’å¿…ãšå…ˆã«è¨ˆç®—ã—ã¦ã„ã‚‹
                    dp[l][r] = dp[l + 1][r - 1] + 2;
                }
            }
            // ä¸€è‡´ã—ãªã‹ã£ãŸå ´åˆã¯ã€ã©ã¡ã‚‰ã‹ã®æ–‡å­—ã‚’å–ã‚Šé™¤ã
            else
            {
                dp[l][r] = max(dp[l + 1][r], dp[l][r - 1]);
            }
        }
    }
    // æœ€å¤§ã®å›æ–‡é•·ã¯ä¸€ç•ªæ–‡å­—ãŒé•·ã„æ™‚
    cout << dp[0][N - 1] << endl;
    return 0;
}
```

## 4.7 é·ç§»å½¢å¼ã®å·¥å¤«
### A22 - Sugoroku

https://atcoder.jp/contests/tessoku-book/tasks/tessoku_book_v

```cpp
int N, A[100009], B[100009];

long long dp[100009];

int main()
{
	cin >> N;
	for (int i = 1; i <= N - 1; i++) cin >> A[i];
	for (int i = 1; i <= N - 1; i++) cin >> B[i];
	for (int i = 2; i <= N; i++) dp[i] = -1000000000;
	dp[1] = 0;
	for (int i = 1; i <= N - 1; i++)
	{
		dp[A[i]] = max(dp[i] + 100, dp[A[i]]);
		dp[B[i]] = max(dp[i] + 150, dp[B[i]]);
	}
	cout << dp[N] << endl;
	return 0;
}
```

### B22 ï¼ˆA16 - Dungeon 1ï¼‰

https://atcoder.jp/contests/tessoku-book/tasks/tessoku_book_p

ãƒ€ãƒ³ã‚¸ãƒ§ãƒ³ã®æœ€çŸ­ç§»å‹•æ™‚é–“ã‚’æ±‚ã‚ã‚‹å•é¡Œã€‚nç•ªç›®ã®éƒ¨å±‹ã¸ã®æœ€çŸ­ç§»å‹•æ™‚é–“ã¯(n-1)ç•ªç›®ã¨(n-2)ç•ªç›®ã®éƒ¨å±‹ã¸ã®æœ€çŸ­ç§»å‹•æ™‚é–“ã‚’åˆ©ç”¨ã—ã¦è§£ã„ã¦ã„ãã€‚

4.1ã§æ‰±ã£ãŸå•é¡Œã‚’é…ã‚‹é·ç§»æ–¹å¼ã§è§£ã„ã¦ã„ãã€‚

```cpp
int N, A[100009], B[100009];
long long dp[100009];

int main()
{
	cin >> N;
	for (int i = 2; i <= N; i++) cin >> A[i];
	for (int i = 3; i <= N; i++) cin >> B[i];
	for (int i = 0; i <= N; i++) dp[i] = 100000000000;
	dp[1] = 0;
	for (int i = 1; i <= N - 1; i++)
	{
		dp[i + 1] = min(dp[i] + A[i + 1] , dp[i + 1]);
		dp[i + 2] = min(dp[i] + B[i + 2], dp[i + 2]);
	}
	cout << dp[N] << endl;
	return 0;
}
```

## 4.8 ãƒ“ãƒƒãƒˆDP
### A23 - All Free

ã‚¯ãƒ¼ãƒãƒ³ã‚’æœ€å°ä½•æšä½¿ãˆã°Nå€‹ã®å•†å“ãŒç„¡æ–™ã«ãªã‚‹ã‹ã€ã¨ã„ã†å•é¡Œã€‚ç‰¹å®šã®å•†å“ã®çµ„ã¿åˆã‚ã›ãŒã€æœ€å°ä½•æšã®ã‚¯ãƒ¼ãƒãƒ³ã§ç„¡æ–™ã«ãªã‚‹ã‹ã‚’èª¿ã¹ã€ãã®æƒ…å ±ã‚’å…ƒã«ã€æ¬¡ã®ã‚¯ãƒ¼ãƒãƒ³ï¼‘æšã‚’ä½¿ã†ã¨ã©ã†ãªã‚‹ã‹ã‚’èª¿ã¹ã¦ã„ãã€‚ã¤ã¾ã‚Šã“ã®å•é¡Œã‚‚è²°ã†é·ç§»æ–¹å¼ã§è§£ã„ã¦ã„ãã€‚

https://atcoder.jp/contests/tessoku-book/tasks/tessoku_book_w


```cpp
int N, M, A[109][19];
int dp[109][1024];

int main()
{
	cin >> N >> M;
	//å…¥åŠ›
	for (int i = 1; i <= M; i++)
	{
		for (int j = 1; j <= N; j++) cin >> A[i][j];
	}
	//é…åˆ—ã®åˆæœŸåŒ–
	for (int i = 0; i <= M; i++)
	{
		for (int j = 0; j <= (1 << N); j++) dp[i][j] = 1000000000;
	}
	//å‹•çš„è¨ˆç”»æ³•
	dp[0][0] = 0;
	//ã‚¯ãƒ¼ãƒãƒ³1æšç›®ã‹ã‚‰Mæšç›®ã¾ã§æ¢ç´¢
	for (int i = 1; i <= M; i++)
	{
		for (int j = 0; j <= (1 << N); j++)
		{
			//ã™ã§ã«ç„¡æ–™ã«ãªã£ã¦ã„ã‚‹ã‹ã©ã†ã‹èª¿ã¹ã‚‹
			int already[19];
			for (int k = 1; k <= N; k++)
			{
				if ((j / (1 << (k - 1)) % 2) == 0) already[k] = 0;
				else already[k] = 1;
			}
			//ã‚¯ãƒ¼ãƒãƒ³åˆ¸ã®ã‚«ã‚¦ãƒ³ãƒˆ
			int coupon = 0;
			for (int k = 1; k <= N; k++)
			{
				if (A[i][k] == 1 || already[k] == 1)
				{
					coupon += (1 << (k - 1));
				}
			}
			//é·ç§»
			dp[i][j] = min(dp[i][j], dp[i - 1][j]);
			dp[i][coupon] = min(dp[i][coupon], dp[i - 1][j] + 1);
		}
	}
	if (dp[M][(1 << N) - 1] == 1000000000) cout << "-1" << endl;
	else cout << dp[M][(1 << N) - 1] << endl;
	return 0;
}
```

### B23 - Traveling Salesman Problem

è§£ãã®ã«3æ™‚é–“ã‹ã‹ã£ãŸå•é¡Œã€‚æœ€å°ã®è·é›¢ã«ãªã‚‹ã‚ˆã†ã«ã™ã¹ã¦ã®å»ºç‰©ã‚’å›ã£ãŸæ™‚ã«ä½•åˆ†ã‹ã‹ã‚‹ã‹èª¿ã¹ãªã•ã„ã€ã¨ã„ã†å•é¡Œã€‚**å·¡å›ã‚»ãƒ¼ãƒ«ã‚¹ãƒãƒ³å•é¡Œ**ã¨å‘¼ã°ã‚Œã¦ã„ã‚‹ã‚‰ã—ã„ã€‚

https://atcoder.jp/contests/tessoku-book/tasks/tessoku_book_cv

```cpp
int N, X[20], Y[20];
float dp[32768][20];

float ft_distance(int x1, int y1, int x2, int y2)
{
	return sqrt(pow(x1 - x2, 2) + pow(y1 - y2, 2));
}

int main()
{
	//å…¥åŠ›
	cin >> N;
	for (int i = 1; i <= N; i++) cin >> X[i] >> Y[i];
	
	//é…åˆ—ã®åˆæœŸåŒ–
	for (int i = 0; i < (1 << N); i++)
	{
		for (int j = 0; j <= N; j++) dp[i][j] = 100000000;
	}
	//åˆæœŸå€¤ã®ä»£å…¥
	dp[1][1] = 0;
	//å‹•çš„è¨ˆç”»æ³•
	//1ã®éƒ½å¸‚ã‹ã‚‰ã‚¹ã‚¿ãƒ¼ãƒˆã€ã™ã¹ã¦ã®éƒ½å¸‚ã‚’å·¡ã‚‹ç›´å‰ã¾ã§æ¢ç´¢
	for (int i = 1; i <= (1 << N) - 1; i++)
	{
		//ä»Šã„ã‚‹éƒ½å¸‚ã‚’jã€æ¬¡ã«ç§»å‹•ã™ã‚‹éƒ½å¸‚ã‚’kã¨ç½®ã„ã¦
		for (int j = 1; j <= N; j++)
		{
			if (!(i & (1 << (j - 1)))) continue;//æœªåˆ°é”ã®éƒ½å¸‚ã¯ã‚¹ã‚­ãƒƒãƒ—
			//æ¬¡ã«ç§»å‹•ã™ã‚‹éƒ½å¸‚ã‚’kã¨ãŠã
			for(int k = 2; k <= N; k++)
			{
				if (i & (1 << (k - 1))) continue;//ã™ã§ã«åˆ°é”ã—ã¦ã„ã‚‹éƒ½å¸‚ã¯ã‚¹ã‚­ãƒƒãƒ—
				dp[i | (1 << (k - 1))][k] = min(dp[i | (1 << (k - 1))][k], dp[i][j] + ft_distance(X[j], Y[j], X[k], Y[k]));
			}
		}
	}
	float ans = 100000000;
	for (int i = 1; i <= N; i++)
	{
		ans = min(ans, dp[(1 << N) - 1][i] + ft_distance(X[i], Y[i], X[1], Y[1]));
	}

	cout << ans << endl;
	return 0;
}
```

## 4.9 æœ€é•·å¢—åŠ éƒ¨åˆ†åˆ—å•é¡Œ
### A24 - LIS

æœ€åˆä½•ã‚‚è€ƒãˆãšã«å‹•çš„è¨ˆç”»æ³•ã§è¨˜è¿°ã—ãŸã‚‰é–“ã«åˆã‚ãªã‹ã£ãŸã€‚

https://atcoder.jp/contests/tessoku-book/tasks/tessoku_book_x

```cpp
//ä½•ã‚‚è€ƒãˆãšã«å‹•çš„è¨ˆç”»æ³•ã—ãŸã‚‰é–“ã«åˆã‚ãªã‹ã£ãŸ
int main()
{
	cin >> N;
	for (int i = 1; i <= N; i++) cin >> A[i];
	for (int i = 1; i <= N; i++)
	{
		dp[i] = 1;
		for (int j = 1; j < i; j++)
		{
			if (A[i] > A[j]) dp[i] = max(dp[i], dp[j] + 1);
		}
	}
	int ans = 1;
	for (int i = 1; i <= N; i++) ans = max(ans, dp[i]);
	cout << ans << endl;
	return 0;
}
```

ãã‚Œãã‚Œã®æ•°ã®éƒ¨åˆ†åˆ—ã‚’ä½œã‚‹ã®ã«æœ€å°ã®maxå€¤ã‚’è¨˜æ†¶ã—ã¦ãŠãé…åˆ—ã‚’ä½œã‚Šã€ã•ã‚‰ã«A[i]ã”ã¨ã«ã©ã®éƒ¨åˆ†ã‚’å¤‰æ›´ã™ã‚‹ã‹ã‚’äºŒåˆ†æ¢ç´¢æ³•ã‚’ç”¨ã„ã¦åŠ¹ç‡åŒ–ã—ãŸã‚‰é€šéã§ããŸã€‚

```cpp
int N, A[100009];
int dp[100009];


int main()
{
	cin >> N;
	for (int i = 1; i <= N; i++) cin >> A[i];
	int top = 1;
	for (int i = 1; i <= N; i++)
	{
		if (i == 1)
		{
			dp[1] = A[1];
		}
		else
		{
			if (dp[top] < A[i])
			{
				dp[top + 1] = A[i];
				top += 1;
			}
			else
			{
				int l = 1, r = top;
				while (l < r)
				{
					int mid = (l + r) / 2;
					if (dp[mid] < A[i])
					{
						l = mid + 1;
					}
					else
					{
						r = mid;
					}
				}
				dp[l] = A[i];
			}
		}
	}
	cout << top << endl;
	return 0;
}
```

### B24 - Many Boxes

ã“ã®å•é¡Œã¯é›£ã—ã‹ã£ãŸã€‚5æ™‚é–“è¿‘ãã‹ã‹ã£ã¦ã—ã¾ã£ãŸã€‚ã€‚

å˜ç´”ãªå‹•çš„è¨ˆç”»æ³•ãªã‚‰ã™ãå®Ÿè£…ã§ããŸãŒã€åŠåˆ†ãã‚‰ã„ã®æƒ³å®šã‚±ãƒ¼ã‚¹ã§TLEã«ãªã£ã¦ã—ã¾ã£ã¦ã„ãŸã€‚

https://atcoder.jp/contests/tessoku-book/tasks/tessoku_book_cw

```cpp
// æ¯”è¼ƒé–¢æ•°
bool customSort(const pair<int, int>& a, const pair<int, int>& b) {
    if (a.first == b.first) { // first ãŒåŒã˜å ´åˆ
        return a.second > b.second; // second ã‚’é™é †ã§æ¯”è¼ƒ
    }
    return a.first < b.first; // first ã‚’æ˜‡é †ã§æ¯”è¼ƒ
}

int main() {
    int N;
    cin >> N;

    vector<pair<int, int>> boxes(N);
    for (int i = 0; i < N; i++) {
        cin >> boxes[i].first >> boxes[i].second;
    }

    // ã‚«ã‚¹ã‚¿ãƒ ã®æ¯”è¼ƒé–¢æ•°ã‚’ä½¿ã£ã¦ã‚½ãƒ¼ãƒˆ
    sort(boxes.begin(), boxes.end(), customSort);

    int ans = 0;
    vector<int> height;
    for (int i = 0; i < N; i++) {
        auto it = lower_bound(height.begin(), height.end(), boxes[i].second);
        int index = it - height.begin();
        if (it == height.end() || *it != boxes[i].second) {
            if (index == height.size()) {
                height.push_back(boxes[i].second);
            } else {
                height[index] = boxes[i].second;
            }
        }
        ans = max(ans, index + 1);
    }

    cout << ans << endl;

    return 0;
}

```

## 4.10 ãƒãƒ£ãƒ¬ãƒ³ã‚¸å•é¡Œ

### A25 - Number of Routes

https://atcoder.jp/contests/tessoku-book/tasks/tessoku_book_y

```cpp
long long H, W;
char c[39][39];
long long dp[39][39];

int main()
{
	cin >> H >> W;
	for (int i = 1; i <= H; i++)
	{
		for (int j = 1; j <= W; j++) cin >> c[i][j];
	}
	for (int i = 1; i <= H; i++)
	{
		for (int j = 1; j <= W; j++)
		{
			if (i == 1 && j == 1) dp[i][j] = 1;
			else
			{
				dp[i][j] = 0;
				if (i > 1 && c[i - 1][j] == '.') dp[i][j] += dp[i - 1][j];
				if (j > 1 && c[i][j - 1] == '.') dp[i][j] += dp[i][j - 1];
			}
		}
	}
	cout << dp[H][W] << endl;
	return 0;
}
```

# 5ç«  æ•°å­¦çš„å•é¡Œ
## 5.0 æ•°å­¦çš„å•é¡Œã«ã¤ã„ã¦
## 5.1 ç´ æ•°åˆ¤å®š

### å•é¡Œ A26 Prime Check

https://atcoder.jp/contests/tessoku-book/tasks/tessoku_book_z

```cpp
int Q, X[10009];

int main ()
{
	cin >> Q;
	for (int i = 1; i <= Q; i++) cin >> X[i];
	for (int j = 1; j <= Q; j++)
	{
		if (X[j] < 2)
		{
			cout << "No" << endl;
		}
		else
		{
			int flag = 1;
			for (int i = 2; i <= X[j] / i; i++)
			{
				if (X[j] % i == 0)
				{
					cout << "No" << endl;
					flag = -1;
					break;
				}
			}
			if (flag == 1)
				cout << "Yes" << endl;
		}
	}
	return 0;
}
```

### B26 - Output Prime Numbers

ã‚¨ãƒ©ã‚¹ãƒˆãƒ†ãƒã‚¹ã®ãµã‚‹ã„ã‚’ç”¨ã„ã¦åŠ¹ç‡çš„ã«è¨˜è¿°ã™ã‚‹

https://atcoder.jp/contests/tessoku-book/tasks/tessoku_book_cy

```cpp
int N;
bool deleted[1000009];

int main()
{
	cin >> N;
	for (int i = 1; i <= N; i++) deleted[i] = false;
	for (int i = 2; i <= sqrt(N); i++)
	{
		if (deleted[i] == true)
			continue;
		for (int j = i * 2; j <= N; j += i) deleted[j] = true;
	}
	for (int i = 2; i <= N; i++)
	{
		if (deleted[i] == false) cout << i << endl;
	}
	return 0;
}
```

## 5.2 æœ€å¤§å…¬ç´„æ•°
### å•é¡Œ A27 Calculate GCD

https://atcoder.jp/contests/tessoku-book/tasks/math_and_algorithm_o

```cpp
int A, B, min_AB, ans;

int main()
{
	cin >> A >> B;
	min_AB = min(A, B);
	ans = 1;
	for (int i = 2; i <= min_AB; i++)
	{
		if (A % i == 0 && B % i == 0)
		{
			ans = i;
		}
	}
	cout << ans << endl;
	return 0;
}
```

### B27 - Calculate LCM

æœ€å¤§å…¬ç´„æ•°ã‚’ç”¨ã„ã¦æœ€å°å…¬å€æ•°ã‚’æ±‚ã‚ã‚‹å•é¡Œã€‚
Aå•é¡Œã¨åŒæ§˜ã®ã‚„ã‚Šæ–¹ã§ã¯TLEã«ãªã£ã¦ã—ã¾ã†ã€‚ãƒ¦ãƒ¼ã‚¯ãƒªãƒƒãƒ‰ã®äº’é™¤æ³•ã‚’ç”¨ã„ã¦æœ€å¤§å…¬ç´„æ•°ã¯åŠ¹ç‡çš„ã«è¨ˆç®—ã§ãã‚‹ã“ã¨ã‚’å­¦ã‚“ã ã€‚

https://atcoder.jp/contests/tessoku-book/tasks/tessoku_book_cz

```cpp
long long a, b, lcm;

long long ft_GCD(long long A, long long B)
{
	while(A > 0 && B > 0)
	{
		if (A >= B) A = A % B;
		else B = B % A;
	}
	if (A != 0) return A;
	return B;
}

int main()
{
	cin >> a >> b;
	lcm = a * b / ft_GCD(a, b);
	cout << lcm << endl;
	return 0;
}
```
## 5.3 ã‚ã¾ã‚Šã®è¨ˆç®—ï¼ˆ1ï¼‰ï¼šåŸºæœ¬
### å•é¡Œ A28 Black Board

å…¨ã¦è¶³ã—åˆã‚ã›ãŸä½™ã‚Šã‚’æ±‚ã‚ã‚‹å•é¡Œã€‚å¾‹å„€ã«å…¨ã¦è¶³ã—ã¦ã„ãŸã‚‰long longå‹ã‚’è¶…ãˆã¦ã—ã¾ã†ã®ã§ã€è¶³ã—ç®—ã®æ€§è³ªã‚’æ´»ã‹ã—ã¦æ¯å›ã®è¨ˆç®—ã§ä½™ã‚Šã‚’æ±‚ã‚ã¦ã„ã‚‹ã€‚

https://atcoder.jp/contests/tessoku-book/tasks/tessoku_book_ab


```cpp
int main()
{
	int N;
	cin >> N;

	long long A[100009];
	char T[100009];
	for (int i = 1; i <= N; i++) cin >> T[i] >> A[i];
	long long ans = 0;
	for (int i = 1; i <= N; i++)
	{
		if (T[i] == '+') ans += A[i];
		if (T[i] == '-') ans -= A[i];
		if (T[i] == '*') ans *= A[i];
		if (ans < 10000) ans += 10000;
		ans %= 10000;
		cout << ans % 10000 << endl;
	}
	return 0;
}
```

### B28 - Fibonacci Easy (mod 1000000007)

ãƒ•ã‚£ãƒœãƒŠãƒƒãƒæ•°åˆ—ã®ç¬¬Né …ã‚’æ±‚ã‚ã‚‹å•é¡Œã€‚Aå•é¡Œã¨åŒæ§˜ã€æ¯åº¦è¨ˆç®—ã®ãŸã³ã«ã‚ã¾ã‚Šã‚’æ±‚ã‚ã¦ã„ã‚‹ã€‚

https://atcoder.jp/contests/tessoku-book/tasks/math_and_algorithm_ap

```cpp
int main()
{
	int N;
	cin >> N;
	long long A[10000009];
	A[1] = 1;
	A[2] = 1;
	for (int i = 3; i <= N; i++)
	{
		A[i] = A[i - 1] + A[i - 2];
		A[i] %= 1000000007;
	}
	cout << A[N] % 1000000007 << endl;
	return 0;
} 
```

## 5.4 ã‚ã¾ã‚Šã®è¨ˆç®—ï¼ˆ2ï¼‰ï¼šç´¯ä¹—
### A29 - Power

ä½™ã‚Šã‚’å…ˆã«è¨ˆç®—ã—ã¦ãŠã„ã¦ã‚‚è¨ˆç®—çµæœãŒå¤‰ã‚ã‚‰ãªã„ã®ã¯è¶³ã—ç®—ã‚‚æ›ã‘ç®—ã‚‚åŒã˜ã€‚æ¯åº¦ã®è¨ˆç®—ã§ä½™ã‚Šã‚’æ±‚ã‚ã¦è¨ˆç®—ã—ã¦ã„ãã€‚æ—©ãã‚³ãƒ¼ãƒ‰ã®ã‚ˆã†ãªãƒ“ãƒƒãƒˆã‚’ä½¿ã„ãªã›ã‚‹ã‚ˆã†ã«ãªã‚ŠãŸã„ã€‚

https://atcoder.jp/contests/tessoku-book/tasks/math_and_algorithm_aq

```cpp
long long ft_power(long long a, long long b, long long m)
{
	long long p = a;
	long long ans = 1;
	for (int i = 0; i <= 30; i++)
	{
		int wari = (1 << i);
		if ((b / wari) % 2 == 1)
		{
			ans = (ans * p) % m;
		}
		p = (p * p) % m;
	}
	return ans;
}

int main()
{
	int a, b;
	long long ans;
	cin >> a >> b;
	cout << ft_power(a, b, 1000000007) << endl;
	return 0;
}
```

### B29 - Power Hard

Aå•é¡Œã¯intå‹ã®wariã¨ã„ã†åˆ¥ã®å¤‰æ•°ã§bã®ã©ã“ã«ãƒ“ãƒƒãƒˆãŒç«‹ã£ã¦ã„ã‚‹ã‹ã‚’ç¢ºèªã—ã¦è¡Œã£ãŸãŒã€intå‹ã‚’è¶…ãˆã¦ã—ã¾ã†ã‹ã‚‰ã‹ã€æ­£å¸¸ã«å‹•ä½œã—ãªã‹ã£ãŸã€‚

ãã®ãŸã‚ã€bã®ãƒ“ãƒƒãƒˆã‚’ç›´æ¥å‹•ã‹ã™å½¢ã«æ›¸ãæ›ãˆãŸã‚‰ACã¨ãªã£ãŸã€‚

https://atcoder.jp/contests/tessoku-book/tasks/tessoku_book_db

```cpp
unsigned long long ft_power(unsigned long long a, unsigned long long b, unsigned long long m)
{
	unsigned long long ans = 1;
	a %= m;
	while (b > 0)
	{
		if (b & 1)
			ans = (ans * a) % m;
		b >>= 1;
		a = (a * a) % m;
	}
	return ans ;
}

int main()
{
	unsigned long long a, b;
	cin >> a >> b;
	cout << ft_power(a, b, 1000000007) << endl;
	return 0;
}
```

## 5.5 ã‚ã¾ã‚Šã®è¨ˆç®—ï¼ˆ3ï¼‰ï¼šå‰²ã‚Šç®—
ã“ã“ã¾ã§è¶³ã—ç®—ãƒ»æ›ã‘ç®—ã®å ´åˆã¯ã†ã¾ãã„ãã¾ã—ãŸãŒã€å‰²ã‚Šç®—ã¨ãªã‚‹ã¨è©±ãŒå¤‰ã‚ã‚Šã¾ã™ã€‚

æ™®é€šã«æ¯åº¦ã®ä½™ã‚’æ±‚ã‚ã¦è¨ˆç®—ãŒã†ã¾ãã„ã‹ãªã„ã®ï¼ˆè©¦ã—ã¦ã¿ã¦ãã ã•ã„ï¼‰ã®ã§ã€ãƒ•ã‚§ãƒ«ãƒãƒ¼ã®å°å®šç†ã‚’ç”¨ã„ã¦å¼å¤‰å½¢ã‚’è¡Œã„ã¾ã™ã€‚
ãƒ•ã‚§ãƒ«ãƒãƒ¼ã®å°å®šç†ã¯[ã“ã¡ã‚‰](https://qiita.com/drken/items/6b4031ccbb2cab7436f3)ã®qiitaã®è¨˜äº‹ãŒã‚ã‹ã‚Šã‚„ã™ã„ã§ã™ã€‚ç«¶æŠ€ãƒ—ãƒ­ã‚°ãƒ©ãƒŸãƒ³ã‚°ã«ãŠã‘ã‚‹ä¾‹é¡Œã‚‚æŒ™ã’ã¦é ‚ã„ã¦ã„ã‚‹ã®ã§å•é¡Œæ¼”ç¿’ã«ã‚‚ã„ã„ã‹ã‚‚ã§ã™ã­ã€‚

### A30 - Combination

çµ„ã¿åˆã‚ã›ã®ãŒä½•é€šã‚Šã‚ã‚‹ã‹èª¿ã¹ã‚‹nCrã®è¨ˆç®—ã€‚ãªãœã‹æ›¸ç±ã«è¼‰ã£ã¦ã„ãŸè§£ç­”ä¾‹ã ã¨ACãŒå‡ºãªã‹ã£ãŸã€‚å‰è¿°ã®ft_power()é–¢æ•°ã‚’ç”¨ã„ã¦ré …åˆ†ã®æ›ã‘ç®—ã‚’ã—ã¦ã„ãã€‚

https://atcoder.jp/contests/tessoku-book/tasks/tessoku_book_ad

```cpp
unsigned long long ft_division(unsigned long long a, unsigned long long b, unsigned long long m)
{
	return (a * ft_power(b , m - 2, m)) % m;
}


int main()
{
	unsigned long long m = 1000000007;
	unsigned long long n;
	unsigned long long r;
	cin >> n >> r;

	unsigned long long ans = 1;
	for (int i = 1; i <= r; i++)
	{
		ans = (ans * ft_division(n - i + 1, r - i + 1, m)) % m;
	}
	
	cout << ans << endl;
	return 0;
}
```

### B30 - Combination 2

https://atcoder.jp/contests/tessoku-book/tasks/tessoku_book_dc

```cpp
unsigned long long ft_power(unsigned long long a, unsigned long long b, unsigned long long m)
{
	unsigned long long ans = 1;
	a %= m;
	while (b > 0)
	{
		if (b & 1)
			ans = (ans * a) % m;
		b >>= 1;
		a = (a * a) % m;
	}
	return ans ;
}

unsigned long long ft_division(unsigned long long a, unsigned long long b, unsigned long long m)
{
	return (a * ft_power(b , m - 2, m)) % m;
}


int main()
{
	unsigned long long m = 1000000007;
	unsigned long long H;
	unsigned long long W;
	cin >> H >> W;

	unsigned long long ans = 1;
	unsigned long long n = H + W - 2;
	unsigned long long r = H - 1;
	for (int i = 1; i <= r; i++)
	{
		ans = (ans * ft_division(n - i + 1, r - i + 1, m)) % m;
	}
	
	cout << ans << endl;
	return 0;
}
```

## 5.6 åŒ…é™¤åŸç†
### A31 - Divisors

å’Œé›†åˆã®è¦ç´ æ•°ã‚’æ±‚ã‚ã‚‹å•é¡Œã€‚

https://atcoder.jp/contests/tessoku-book/tasks/tessoku_book_ae

```cpp
int main()
{
	long long N;
	cin >> N;

	long long d3 = N / 3;
	long long d5 = N / 5;
	long long d15 = N / 15;

	long long ans = d3 + d5 -d15;
	cout << ans << endl;
	return 0;
}
```

### B31 - Divisors Hard

ã“ã¡ã‚‰ã¯3ã¤ã®é›†åˆã®å’Œé›†åˆã®è¦ç´ æ•°ã‚’æ±‚ã‚ã‚‹å•é¡Œã€‚

https://atcoder.jp/contests/tessoku-book/tasks/tessoku_book_dd

```cpp
int main()
{
	long long N;
	cin >> N;

	long long d3 = N / 3;
	long long d5 = N / 5;
	long long d7 = N / 7;
	long long d15 = N / 15;
	long long d35 = N / 35;
	long long d21 = N / 21;
	long long d105 = N / 105;

	long long ans = d3 + d5 + d7 -d15 - d21 -d35 + d105;
	cout << ans << endl;
	return 0;
}
```
## 5.7 ã‚²ãƒ¼ãƒ ï¼ˆ1ï¼‰:å¿…å‹æ³•
### A32 - Game 1

å±±ã®çŸ³ã‚’ãŠäº’ã„ãŒæœ€å–„æ‰‹ã§å–ã‚Šåˆã£ãŸæ™‚ã«ã©ã¡ã‚‰ãŒå‹ã¤ã‹ã‚’å‡ºåŠ›ã™ã‚‹å•é¡Œã€‚ç†è§£ã§ããŸã‚‰ç¾å®Ÿä¸–ç•Œã§ã‚‚ä»•æ›ã‘ã¦ã¿ãŸã„å•é¡Œã€‚

https://atcoder.jp/contests/tessoku-book/tasks/tessoku_book_af

```cpp
int main()
{
	int N, A, B;
	cin >> N >> A >> B;

	bool dp[100009];
	for (int i = 1; i <= N; i++)
	{
		if (i > A && dp[i - A] == false) dp[i] = true;
		else if (i > B && dp[i - B] == false) dp[i] = true;
		else dp[i] = false;
	}
	// çµæœã®å‡ºåŠ›
	if (dp[N] == true) cout << "First" << endl;
	else cout << "Second" << endl;
	return 0;
}
```

### B32 - Game 5


Aå•é¡Œã®å–ã‚Œã‚‹é¸æŠè‚¢ãŒKå€‹ã«å¢—ãˆãŸãƒãƒ¼ã‚¸ãƒ§ãƒ³ã€‚

https://atcoder.jp/contests/tessoku-book/tasks/tessoku_book_de

```cpp
int main()
{
	int N, K;
	cin >> N >> K;
	int a[109];
	for (int i = 1; i <= K; i++) cin >> a[i];

	bool dp[100009];
	dp[0] == false;
	for (int i = 1; i <= N; i++)
	{
		for (int j = 1; j <= K; j++)
		{
			if (i >= a[j] && dp[i - a[j]] == false)
			{
				dp[i] = true;
				break ;
			}
			dp[i] = false;
		}
	}
	// çµæœã®å‡ºåŠ›
	if (dp[N] == true) cout << "First" << endl;
	else cout << "Second" << endl;
	return 0;
}
```

## 5.8 ã‚²ãƒ¼ãƒ ï¼ˆ2ï¼‰:ãƒ‹ãƒ 

### A33 - Game 2

nå€‹ã®å±±ã‹ã‚‰çŸ³ã‚’å–ã£ã¦ã„ãã€çŸ³ã‚’å–ã‚Œãªããªã£ãŸã‚‰è² ã‘ã¨ã„ã†ã‚²ãƒ¼ãƒ ã®å‹è€…ã‚’æ±‚ã‚ã‚‹ã€‚ãƒ‹ãƒ å’Œã¨ã„ã†ã‚‚ã®ã‚’æ±‚ã‚ã‚Œã°ã„ã„ã‚‰ã—ã„ãŒã€ç†è§£ã¯ã¾ã ã§ãã¦ã„ãªã„ã€ã€


å¾Œã‹ã‚‰[ã“ã®è«–æ–‡](https://www.xmath.ous.ac.jp/~shibata/semi/2019_Nim.pdf)ã‚’èª­ã‚‚ã†ã¨æ€ã†ã®ã§å‚™å¿˜éŒ²ã¨ã—ã¦æ®‹ã—ã¦ãŠãã€‚

https://atcoder.jp/contests/tessoku-book/tasks/tessoku_book_ag


```cpp
int main()
{
	int N;
	int A[100009];
	cin >> N;
	for (int i = 1; i <= N; i++) cin >> A[i];

	// ãƒ‹ãƒ å’Œã‚’æ±‚ã‚ã‚‹
	int xor_sum = A[1];
	for (int i = 2; i <= N; i++) xor_sum = (xor_sum ^ A[i]);

	//å‡ºåŠ›
	if (xor_sum == 0) cout << "Second" << endl;
	else cout << "First" << endl;
	return 0;
}
```

### B33 - Game 6

ã€ŒH*Wã®ãƒã‚¹ç›®ã®ä¸€ã¤ã®ã‚³ãƒã‚’é¸ç¾ã€å·¦æ–¹å‘ã‹ä¸Šæ–¹å‘ã®1æ–¹å‘ã«1ãƒã‚¹ä»¥ä¸Šç§»å‹•ã•ã›ã‚‹ã€ãŸã‚ã€ã‚²ãƒ¼ãƒ ã®çµ‚äº†æ¡ä»¶ã¨ã—ã¦ã¯ã€ã™ã¹ã¦ã®ã‚³ãƒãŒå·¦ä¸Šã«æ¥ã‚‹ã“ã¨ã§ã‚ã‚‹ã€‚

ã‚³ãƒã‚’å‹•ã‹ã™ã¨ãã¯ä¸Šã‹å·¦ã®1æ–¹å‘ã—ã‹å‹•ã‹ã›ãªã„ã®ã§ã€ç¸¦ã¨æ¨ªã®è»¸ã‚’åˆ¥ã€…ã§nimå’Œã‚’ã¨ã‚‹ã¨å±±ã®æ•°ãŒ2Nã®ãƒ‹ãƒ ã«å¸°çµã§ãã‚‹ã€‚

https://atcoder.jp/contests/tessoku-book/tasks/tessoku_book_df

```cpp
int main()
{
	int N, H , W;
	int A[100009];
	int B[100009];
	cin >> N >> H >> W;
	for (int i = 1; i <= N; i++)
	{
		cin >> A[i] >> B[i];
		A[i] -= 1;
		B[i] -= 1;
	}

	// ãƒ‹ãƒ å’Œã‚’æ±‚ã‚ã‚‹
	int xor_sum_a = A[1];
	for (int i = 2; i <= N; i++) xor_sum_a = (xor_sum_a ^ A[i]);
	int xor_sum_b = B[1];
	for (int i = 2; i <= N; i++) xor_sum_b = (xor_sum_b ^ B[i]);
	// å‡ºåŠ›
	int xor_sum = xor_sum_a ^ xor_sum_b;
	if (xor_sum == 0) cout << "Second" << endl;
	else cout << "First" << endl;
	return 0;
}
```

## 5.9 ã‚²ãƒ¼ãƒ ï¼ˆ3ï¼‰:Grundyæ•°
### A34 - Game 3

iå€‹ã®çŸ³ã®å ´åˆã®Grundyæ•°ã‚’æ±‚ã‚ã¦ãŠã„ã¦ã€æœ€å¾Œã«ãƒ‹ãƒ å’Œã‚’æ±‚ã‚ã‚‹å•é¡Œã€‚

https://atcoder.jp/contests/tessoku-book/tasks/tessoku_book_ah

```cpp
int main()
{
	int N, X, Y;
	int A[100009];
	cin >> N >> X >> Y;
	for (int i = 1; i <= N; i++) cin >> A[i];

	// Grundyæ•°ã‚’æ±‚ã‚ã‚‹
	int grundy[100009];
	for (int i = 0; i <= 100000; i++)
	{
		bool Transit[3] = {false, false, false};
		if (i >= X) Transit[grundy[i-X]] = true;
		if (i >= Y) Transit[grundy[i-Y]] = true;
		if (Transit[0] == false) grundy[i] = 0;
		else if (Transit[1] == false) grundy[i] = 1;
		else grundy[i] = 2;
	}

	int xor_sum = 0;
	for (int i = 1; i <= N; i++) xor_sum = xor_sum ^ grundy[A[i]];
	if (xor_sum == 0) cout << "Second" << endl;
	else cout << "First" << endl;
	return 0;
}
```

### B34 - Game 7

ä¸Šã®Aå•é¡Œã®åˆ¶ç´„ãŒç‰¹æ®Šãªãƒãƒ¼ã‚¸ãƒ§ãƒ³ã€‚å±±ã‹ã‚‰å‰Šã‚‹ã®ã¯2 or 3ã«ç¸›ã‚‰ã‚Œã¦ã„ã¦ã€å±±ã®å€‹æ•°ãŒè†¨å¤§ãªåˆ¶ç´„ã§ã‚ã‚‹ã€‚è¦å‰‡æ€§ã‚’è¦‹ã¤ã‘ã‚ŒãŸã‚‰ã‚€ã—ã‚Aå•é¡Œã‚ˆã‚Šã‚‚ç°¡å˜ã‹ã‚‚ã—ã‚Œãªã„ã€‚

https://atcoder.jp/contests/tessoku-book/tasks/tessoku_book_dg

```cpp
int main()
{
	int N, X, Y;
	long long  A;
	cin >> N >> X >> Y;
	int xor_sum = 0;
	int grundy[5] = {0,0,1,1,2};
	for (int i = 1; i <= N; i++)
	{
		cin >> A;
		xor_sum = xor_sum ^ grundy[A % 5];
	}

	if (xor_sum == 0) cout << "Second" << endl;
	else cout << "First" << endl;
	return 0;
}
```

## 5.10 ãƒãƒ£ãƒ¬ãƒ³ã‚¸å•é¡Œ
### A35 - Game 4

ãªãœã‹ã‚‚ã†ã™ã§ã«æ‡ã‹ã—ã„å‹•çš„è¨ˆç”»æ³•ã€‚å•é¡Œã¯ç°¡å˜dãŒã€ä¼¼ãŸã‚ˆã†ãªè€ƒãˆæ–¹ã¯Minimaxæ³•ã¨ã„ã†ãƒªãƒãƒ¼ã‚·AIãªã©ã«ã‚‚ä½¿ç”¨ã•ã‚Œã¦ã„ã‚‹æ¦‚å¿µã‚‰ã—ã„ã€‚

https://atcoder.jp/contests/tessoku-book/tasks/tessoku_book_ai

```cpp
int main()
{
	int N;
	int A[2009];
	cin >> N;
	for (int i = 1; i <= N; i++) cin >> A[i];

	int dp[2009][2009];
	// æœ€ä¸‹å±¤ã®æ•°å­—ã‚’åŸ‹ã‚ã‚‹
	for (int j = 1; j <= N; j++) dp[N][j] = A[j];
	//ä¸Šã«ä¸Šã«åŸ‹ã‚ã¦ã„ã
	for (int i = N - 1; i >= 1; i--)
	{
		for (int j = 1; j <= i; j++) 
		{
			if (i % 2 == 1)
			{
				dp[i][j] = max(dp[i + 1][j], dp[i + 1][j + 1]);
			}
			else
			{
				dp[i][j] = min(dp[i + 1][j], dp[i + 1][j + 1]);
			}
		}
	}
	cout << dp[1][1] << endl;
	return 0;
}
```


# 6ç«  è€ƒå¯Ÿãƒ†ã‚¯ãƒ‹ãƒƒã‚¯
## 6.0 è€ƒå¯Ÿãƒ†ã‚¯ãƒ‹ãƒƒã‚¯å…¥é–€
ç«¶ãƒ—ãƒ­ã«ã¯ã‚¢ãƒ«ã‚´ãƒªã‚ºãƒ ã ã‘ã§ãªãã€æ•°ç†ãƒ‘ã‚ºãƒ«ã‚’è§£ãã‚ˆã†ãªè€ƒå¯ŸåŠ›ãƒ»ã²ã‚‰ã‚ãåŠ›ã‚‚å¿…è¦ã«ãªã£ã¦ãã‚‹ã“ã¨ãŒå¼·èª¿ã•ã‚Œã¦ã„ãŸã€‚ä¸€è¦‹è¤‡é›‘ã§é›£ã—ãã†ãªå•é¡Œã‚’è¦‹æ–¹ã‚’å¤‰ãˆã¦å˜ç´”åŒ–ã§ããŸæ™‚ã®å–œã³ã¯è¨ˆã‚ŠçŸ¥ã‚Œãªã„ã€‚

## 6.1 å¶å¥‡ã‚’è€ƒãˆã‚‹
### A36 - Travel

https://atcoder.jp/contests/tessoku-book/tasks/tessoku_book_aj

```cpp
int main()
{
	int N, K;
	cin >> N >> K;
	if ((2 * N - 2) <= K && ((2 * N - 2) - K) % 2 == 0)  cout << "Yes" << endl;
	else cout << "No" << endl;
	return 0;
}
```

### B36 - Switching Lights

å¶å¥‡ã«ç€ç›®ã™ã‚‹å•é¡Œã€‚ä½•åº¦æ“ä½œã—ã¦ã‚‚å¶å¥‡ã¯å…¥ã‚Œæ›¿ã‚ã‚‰ãªã„ã€‚

https://atcoder.jp/contests/tessoku-book/tasks/tessoku_book_di

```cpp
int main()
{
	int N, K;
	string S;
	cin >> N >> K;
	cin >> S;
	int count = 0;
	for(size_t i = 0; i < S.size();i++)
	{
		if (S[i] == '1') count++;
	}
	if (count % 2 == K % 2) cout << "Yes" << endl;
	else cout << "No" << endl;
	return 0;
}
```

## 6.2 è¶³ã•ã‚ŒãŸå›æ•°ã‚’è€ƒãˆã‚‹
### A37 - Travel 2

https://atcoder.jp/contests/tessoku-book/tasks/tessoku_book_ak

```cpp
int main()
{
	long long N, M, B;
	long long A[200009];
	long long C[200009];
	cin >> N >> M >> B;
	int sum_time_routeA = 0;
	int sum_time_routeC = 0;
	for (int i = 1; i <= N; i++) cin >> A[i];
	for (int i = 1; i <= M; i++) cin >> C[i];
	for (int i = 1; i <= N; i++) sum_time_routeA += A[i];
	for (int i = 1; i <= M; i++) sum_time_routeC += C[i];
	long long total_time = sum_time_routeA * M + sum_time_routeC * N + B * N * M; 
	cout << total_time << endl;
	return 0;
}
```

### B37 - Sum of Digits

f(n)ã‚’nã®å„æ¡ã®æ•°å­—ã‚’è¶³ã—åˆã‚ã›ãŸåˆè¨ˆã¨ã—ãŸæ™‚ã€1ã‹ã‚‰Nã¾ã§ã®æ•°å­—ã®f(n)ã®åˆè¨ˆã‚’å‡ºåŠ›ã›ã‚ˆã¨ã„ã†å•é¡Œã€‚kæ¡ç›®ãŒ+1ã•ã‚ŒãŸå ´åˆã«ã©ã®ãã‚‰ã„æ•°ãŒå¢—ãˆã‚‹ã‹ã‚’è€ƒãˆã‚‹ã€‚

https://atcoder.jp/contests/tessoku-book/tasks/tessoku_book_dj

```cpp
int main() {
    long long N;
    cin >> N;

    long long power = 1;
    long long ans = 0;
    long long accu = 0;

    while (power <= N) {
        long long digit = ((N % (power * 10)) - (N % power)) / power;
        if (digit > 0) {
            ans += accu * digit;
            ans += digit * (N % power + 1);
            while (digit > 1) {
                digit--;
                ans += digit * power;
            }
        }
        accu = accu * 10 + 45 * power;
        power *= 10;
    }

    cout << ans << endl;
    return 0;
}
```

## 6.3 ä¸Šé™å€¤ã‚’è€ƒãˆã‚‹
### A38 - Black Company 1

https://atcoder.jp/contests/tessoku-book/tasks/tessoku_book_al

```cpp
int main()
{
	int D, N;
	int L[10009], R[10009], H[10009];
	int max_worktime[10009];
	cin >> D >> N;
	for (int i = 1; i <= N; i++) cin >> L[i] >> R[i] >> H[i];
	for (int i = 1; i <= D; i++) max_worktime[i] = 24;
	for (int i = 1; i <= N; i++)
	{
		for (int j = L[i]; j <= R[i]; j++)
		{
			max_worktime[j] = min(max_worktime[j], H[i]);
		}
	}
	int total_worktime = 0;
	for (int i = 1; i <= D; i++) total_worktime += max_worktime[i];
	cout << total_worktime << endl;
	return 0;
}
```

### B38 - Heights of Grass

https://atcoder.jp/contests/tessoku-book/tasks/tessoku_book_dk

```cpp
int main()
{
	int N;
	string S;
	cin >> N >> S;
	int min_grass[3009];
	// ãã‚Œãã‚Œã®è‰ã®é«˜ã•ã®æœ€å°å€¤ã‚’åˆæœŸåŒ–
	min_grass[0] = 1;
	for (int i = 0; i < N - 1; i++)
	{
		if (S[i] == 'A')
		{
			min_grass[i + 1] = min_grass[i] + 1;
		} 
		if (S[i] == 'B')
		{
			min_grass[i + 1] = 1;
			// ã‚‚ã—1ã‹ã¤å³è‚©ä¸‹ãŒã‚Šã ã£ãŸã‚‰å·¦å´ã®è¦ç´ ã‚‚1è¿½åŠ 
			if (min_grass[i] == 1)
			{
				int j = 0;
				while (min_grass[i - j] == min_grass[i + 1 - j])
				{
					min_grass[i - j]++;
					j++;
				}
			}
		} 
	}
	int ans = 0;
	for (int i = 0; i < N; i++) ans += min_grass[i];
	cout << ans << endl;
	return 0;
}
```

## 6.4 ä¸€æ‰‹å…ˆã‚’è€ƒãˆã‚‹
### A39 - Interval Scheduling Problem

https://atcoder.jp/contests/tessoku-book/tasks/math_and_algorithm_bn

```cpp
int main()
{
	int N;
	int L[300009];
	int R[300009];
	vector<pair<int,int>> tmp;
	cin >> N;
	for (int i = 1; i <= N; i++)
	{
		cin >> L[i] >> R[i];
		tmp.push_back(make_pair(R[i], L[i]));
	}
	sort(tmp.begin(), tmp.end());
	for (int i = 1; i <= N; i++)
	{
		R[i] = tmp[i - 1].first;
		L[i] = tmp[i - 1].second;
	}


	int current = 0;
	int count = 0;
	for(int i = 1; i <= N; i++)
	{
		if (current <= L[i])
		{
			current = R[i];
			count++;
		}
	}
	cout << count << endl;
	return 0;
}
```

### B39 - Taro's Job

https://atcoder.jp/contests/tessoku-book/tasks/tessoku_book_dl

```cpp
int main()
{
	int N ,D, X[200009], Y[200009];
	vector<pair<int, int>> tmp;
	vector<int> work_available;
	cin >> N >> D;
	for (int i = 1; i <= N; i++)
	{
		cin >> X[i] >> Y[i];
		tmp.push_back(make_pair(X[i],Y[i]));
	}
	sort(tmp.begin(), tmp.end());
	for (int i = 1; i <= N; i++)
	{
		X[i] = tmp[i - 1].first;
		Y[i] = tmp[i - 1].second;
	}
	int j = 1;
	int total_money = 0;
	for (int i = 1; i <= D; i++)
	{
		while (i == X[j])
		{
			work_available.push_back(Y[j]);
			j++;
		}
		if (!work_available.empty())
		{
			auto max_elem = max_element(work_available.begin(), work_available.end());
			total_money += *max_elem;
			work_available.erase(max_elem);
		}
	}
	cout << total_money << endl;
	return 0;
}
```

## 6.5 å€‹æ•°ã‚’è€ƒãˆã‚‹
### A40 - Triangl

https://atcoder.jp/contests/tessoku-book/tasks/tessoku_book_an

```cpp
long long ft_choose(long long n)
{
	return  (n * (n - 1) * (n - 2)) / 6;
}

int main()
{
	long long N, A[109];
	cin >> N;
	for (int i = 1; i <= 100; i++) A[i] = 0;
	for (int i = 1; i <= N; i++)
	{
		int tmp;
		cin >> tmp;
		A[tmp]++;
	}
	long long ans = 0;
	for (int i = 1; i <= 100; i++)
	{
		if (A[i] >= 3)
			ans += ft_choose(A[i]);
	}
	cout << ans << endl;
	return 0;
}
```

### B40 - Divide by 100

https://atcoder.jp/contests/tessoku-book/tasks/tessoku_book_dm

```cpp
long long ft_choose(long long n)
{
	return  (n * (n - 1)) / 2;
}

long long ft_combi(long long a, long long b)
{
	return a * b;
}

int main()
{
	int N;
	long long A[109];
	cin >> N;
	for (int i = 0; i < 100; i++) A[i] = 0;
	for (int i = 1; i <= N; i++)
	{
		long long tmp;
		cin >> tmp;
		A[tmp % 100]++;
	}
	long long ans = 0;
	if (A[0] > 1)
		ans += ft_choose(A[0]);
	if (A[50] > 1)
		ans += ft_choose(A[50]);
	for (int i = 1; i < 50; i++)
	{
		ans += ft_combi(A[i], A[100 - i]);
	}
	cout << ans << endl;
	return 0;
}
```

## 6.6 å¾Œã‚ã‹ã‚‰è€ƒãˆã‚‹
### A41 - Tile Coloring

https://atcoder.jp/contests/tessoku-book/tasks/tessoku_book_ao

```cpp
int main()
{
	int N;
	int count_blue = 0;
	int count_red = 0;
	char S;
	cin >> N;
	for (int i = 1; i <= N; i++)
	{
		cin >> S;
		if (S == 'B')
		{
			count_blue++;
			count_red = 0;
		}
		else
		{
			count_blue = 0;
			count_red++;
		}
		if (count_blue >= 3 || count_red >= 3)
		{
			cout << "Yes" << endl;
			return 0;
		}
	}
	cout << "No" << endl;
	return 0;
}
```

### B41 - Reverse of Euclid

https://atcoder.jp/contests/tessoku-book/tasks/tessoku_book_dn

```cpp
int main()
{
	long long X, Y;
	long long A[1000009], B[1000009];
	cin >> X >> Y;
	long long count = 0;
	while (X > 1 || Y > 1)
	{
		A[count] = X;
		B[count] = Y;
		if (X > Y) X -= Y;
		else Y -= X;
		count++;
	}
	cout << count << endl;
	if (count > 0)
	{
		for (int i = count - 1; i >= 0; i--)
		{
			cout << A[i] << " " << B[i] << endl;
		}
	}
}
```

## 6.7 å›ºå®šã—ã¦å…¨æ¢ç´¢
### A42 - Soccer

https://atcoder.jp/contests/tessoku-book/tasks/tessoku_book_ap


```cpp
int main()
{
	int N, K;
	int A[309], B[309];
	int max_member[109][109];
	cin >> N >> K;
	for (int i = 1; i <= N; i++) cin >> A[i] >> B[i];
	for (int i = 1; i <= 100; i++)
	{
		for (int j = 1; j <= 100; j++) max_member[i][j] = 0;
	}
	for (int i = 1; i <= 100 - K; i++)
	{
		for (int j = 1; j <= 100 - K; j++)
		{
			for (int k = 1; k <= N; k++)
			{
				if ((i <= A[k] && A[k] <= i + K) && (j <= B[k] && B[k] <= j + K))
					max_member[i][j]++;
			}
		}
	}
	int ans = 0;
	for (int i = 1; i <= 100 - K; i++)
	{
		for (int j = 1; j <= 100 - K; j++)
		{
			ans = max(ans, max_member[i][j]);
		}
	}
	cout << ans << endl;
	return 0;
}
```

### B42 - Two Faced Card

https://atcoder.jp/contests/tessoku-book/tasks/tessoku_book_do

```cpp
int main()
{
	int N;
	long long A[100009], B[100009];
	cin >> N;
	for (int i = 1; i <= N; i++) cin >> A[i] >> B[i];
	long long truetrue = 0;
	long long truefalse = 0;
	long long falsetrue = 0;
	long long falsefalse = 0;
	for (int i = 1; i <= N; i++)
	{
		if ((A[i] >= 0 && B[i] >= 0) || (!(A[i] < 0 && B[i] < 0) && (A[i] + B[i]) > 0))
			truetrue += (A[i] + B[i]);
	}
	for (int i = 1; i <= N; i++)
	{
		if ((A[i] >= 0 && B[i] <= 0) || (!(A[i] < 0 && B[i] > 0) && (A[i] - B[i] > 0)))
			truefalse += (A[i] - B[i]);
	}
	for (int i = 1; i <= N; i++)
	{
		if ((A[i] <= 0 && B[i] >= 0) || (!(A[i] > 0 && B[i] < 0) && (B[i] - A[i]) > 0))
			falsetrue += (B[i] - A[i]);
	}
	for (int i = 1; i <= N; i++)
	{
		if ((A[i] <= 0 && B[i] <= 0) || (!(A[i] > 0 && B[i] > 0) && (A[i] + B[i]) < 0))
			falsefalse -= (A[i] + B[i]);
	}
	long long ans = max(truetrue, falsefalse);
	long long tmp = max(truefalse, falsetrue);
	ans = max(ans, tmp);
	cout << ans << endl;
	return 0;
}
```

## 6.8 å•é¡Œã‚’è¨€ã„æ›ãˆã‚‹
### A43 - Travel 3

https://atcoder.jp/contests/tessoku-book/tasks/tessoku_book_aq

```cpp
int main()
{
	int N, L;
	int A;
	char B;
	int ans = 0;
	cin >> N >> L;
	for (int i = 1; i <= N; i++)
	{
		cin >> A >> B;
		if (B == 'W') ans = max(ans, A);
		else ans = max(ans, L - A);
	}
	cout << ans << endl;
	return 0;
}
```

### B43 - Quiz Contest

https://atcoder.jp/contests/tessoku-book/tasks/tessoku_book_dp

```cpp
int main()
{
	int N, M;
	int student[200009];
	cin >> N >> M;
	for(int i = 1; i <= N; i++) student[i] = M;
	for(int i = 1; i <= M; i++)
	{
		int A;
		cin >> A;
		student[A]--;
	}
	for(int i = 1; i <= N; i++) cout << student[i] << endl;
	return 0;
}
```

## 6.9 ãƒ‡ãƒ¼ã‚¿ã®æŒã¡æ–¹ã‚’å·¥å¤«ã™ã‚‹
### A44 - Change and Reverse

https://atcoder.jp/contests/tessoku-book/tasks/tessoku_book_ar

```cpp
int main()
{
	int N, Q;
	int A[200009];
	bool reverse = false;
	cin >> N >> Q;
	for (int i = 1; i<= N; i++) A[i] = i;
	for (int i = 1; i<= Q; i++)
	{
		int query;
		cin >> query;
		if (query == 1)
		{
			int x,y;
			cin >> x >> y;
			if (reverse == false)
				A[x] = y;
			else A[N + 1 - x] = y;
		}
		if (query == 2)
		{
			reverse = !reverse;
		}
		if (query == 3)
		{
			int x;
			cin >> x;
			if (reverse == false)
				cout << A[x] << endl;
			else
				cout << A[N + 1 - x] << endl;
		}
	}
	return 0;
}
```

### B44 - Grid Operations

https://atcoder.jp/contests/tessoku-book/tasks/tessoku_book_dq

```cpp
int main()
{
	int N, Q;
	int A[509][509];
	int row[509];
	// å…¥åŠ›
	cin >> N;
	for (int i = 1; i <= N; i++)
	{
		for (int j = 1; j <= N; j++) cin >> A[i][j];
		row[i] = i;
	}
	cin >> Q;
	for (int i = 1; i <= Q; i++)
	{
		int q, x, y;
		cin >> q >> x >> y;
		if (q == 1)
		{
			swap(row[x], row[y]);
		}
		if (q == 2)
		{
			cout << A[row[x]][y] << endl;
		}
	}
	return 0;
}
```

## 6.10 ä¸å¤‰é‡ã«ç€ç›®ã™ã‚‹
### A45 - Card Elimination

https://atcoder.jp/contests/tessoku-book/tasks/tessoku_book_as

```cpp
int main()
{
	int N;
	char C;
	string S;
	cin >> N >> C >> S;
	int total = 0;
	for (int i = 0; i < S.size(); i++)
	{
		if (S[i] == 'B') total += 1; 
		if (S[i] == 'R') total += 2; 
	}
	if (C == 'W' && total % 3 == 0)
	{
		cout << "Yes" << endl;
		return 0;
	}
	if (C == 'B' && total % 3 == 1) 
	{
		cout << "Yes" << endl;
		return 0;
	}
	if (C == 'R' && total % 3 == 2) 
	{
		cout << "Yes" << endl;
		return 0;
	}
	cout << "No" << endl; 
	return 0;
}
```


### B45 - Blackboard 2

https://atcoder.jp/contests/tessoku-book/tasks/tessoku_book_dr

```cpp
int main()
{
	long long a, b, c;
	cin >> a >> b >> c;
	if (a + b + c == 0) cout << "Yes" << endl;
	else cout << "No" << endl;
	return 0;
}
```

# 7ç«  ãƒ’ãƒ¥ãƒ¼ãƒªã‚¹ãƒ†ã‚£ãƒƒã‚¯
## 7.0 ãƒ’ãƒ¥ãƒ¼ãƒªã‚¹ãƒ†ã‚£ãƒƒã‚¯ç³»ã‚³ãƒ³ãƒ†ã‚¹ãƒˆã¨ã¯
## 7.1 è²ªæ¬²æ³•
### A46 - Heuristic 1

https://atcoder.jp/contests/tessoku-book/tasks/tessoku_book_at


```cpp
int N;
int X[159], Y[159], route[159];
bool visited[159];

double ft_distance(int a, int b)
{
	return sqrt((X[a] - X[b]) *  (X[a] - X[b]) + (Y[a] - Y[b]) *  (Y[a] - Y[b]));
}

void	ft_donyoku()
{
	for (int i= 1; i <= N; i++) visited[i] = false;
	route[1] = 1;
	visited[1] = true;
	int current = 1;

	for (int i = 2; i <= N; i++)
	{
		double min_distance = 1000000.0;
		int next_place = -1;
		for (int j= 1; j <= N; j++)
		{
			if (visited[j] == true) continue;
			double new_distance = ft_distance(current, j);
			if (min_distance > new_distance)
			{
				min_distance = new_distance;
				next_place = j;
			}
		}
		visited[next_place] = true;
		route[i] = next_place;
		current = next_place;
	}
	route[N + 1] = 1;
}


int main()
{
	cin >> N;
	for (int i= 1; i <= N; i++) cin >> X[i] >> Y[i];

	ft_donyoku();
	for (int i= 1; i <= N + 1; i++) cout << route[i] << endl;
	return 0;
}
```

## 7.2 å±€æ‰€æ¢ç´¢æ³•
7.1ã¨åŒæ§˜ã®å•é¡Œã‚’å±€æ‰€æ¢ç´¢æ³•ï¼ˆå±±ç™»ã‚Šæ³•ï¼‰ã§è§£ãã€‚

```cpp
int N;
int X[159], Y[159], route[159];
bool visited[159];

double ft_distance(int a, int b)
{
	return sqrt((X[a] - X[b]) *  (X[a] - X[b]) + (Y[a] - Y[b]) *  (Y[a] - Y[b]));
}

int ft_rand(int a, int b)
{
	return a + rand() % (b - a + 1);
}

double ft_get_score()
{
	double sum = 0;
	for (int i = 1; i <= N ; i++) sum += ft_distance(route[i], route[i + 1]);
	return sum;
}


void	ft_local_search()
{
	// åˆæœŸè§£ã®ç”Ÿæˆ
	for (int i = 1; i <= N ; i++) route[i] = i;
	route[N + 1] = 1;
	double current_score = ft_get_score();

	for (int i = 0; i < 2000; i++)
	{
		// ãƒ©ãƒ³ãƒ€ãƒ ã«å³ç«¯ã¨å·¦ç«¯ã‚’æ±ºã‚ã‚‹
		int R = ft_rand(2, N);
		int L = ft_rand(2, N);
		if (R < L) swap(L, R);
		// é…åˆ—ã‚’é€†ã«ã—ã¦ã¿ã‚‹
		reverse(route + L, route + R + 1);
		double new_score = ft_get_score();
		// ã‚¹ã‚³ã‚¢æ”¹å–„ã—ãŸã‚‰ãã®ã¾ã¾ã€ã—ãªã‹ã£ãŸã‚‰æˆ»ã™
		if (new_score <= current_score) current_score = new_score;
		else reverse(route + L, route + R + 1);
	}
}

int main()
{
	cin >> N;
	for (int i= 1; i <= N; i++) cin >> X[i] >> Y[i];

	ft_local_search();
	for (int i= 1; i <= N + 1; i++) cout << route[i] << endl;
	return 0;
}
```

## 7.3 ç„¼ããªã¾ã—æ³•
é–¢æ•°ã®åå‰ãŒannealingã§ã¯ãªãlocal_searchã®ã¾ã¾ã«ãªã£ã¦ã„ã‚‹ã»ã©ã€7.2ã®å±±ç™»ã‚Šæ³•ã¨ã»ã¨ã‚“ã©åŒã˜ã‚³ãƒ¼ãƒ‰ã§ã™ã€‚

```cpp
int N;
int X[159], Y[159], route[159];
bool visited[159];

void	ft_local_search()
{
	// åˆæœŸè§£ã®ç”Ÿæˆ
	for (int i = 1; i <= N ; i++) route[i] = i;
	route[N + 1] = 1;
	double current_score = ft_get_score();

	for (int i = 0; i < 200000; i++)
	{
		// ãƒ©ãƒ³ãƒ€ãƒ ã«å³ç«¯ã¨å·¦ç«¯ã‚’æ±ºã‚ã‚‹
		int R = ft_rand(2, N);
		int L = ft_rand(2, N);
		if (R < L) swap(L, R);
		// é…åˆ—ã‚’é€†ã«ã—ã¦ã¿ã‚‹
		reverse(route + L, route + R + 1);
		double new_score = ft_get_score();

		// ç„¼ããªã¾ã—æ³•
		// æ¸©åº¦TãŒå¤§ãã„ã»ã©è¨±ã™ç¯„å›²ã‚‚å¤§ãããªã‚‹ï¼ˆåˆæœŸã¯å¤§ããï¼‰
		double T = 30 - 30 * i / 200000;
		// currentscore < newscore ã¨ãªã£ã¦ã„ã¦ã‚‚ã€ç¢ºç‡çš„ã«è¨±ã™
		double probability = exp(min(0.0, (current_score - new_score) / T));
		// ã‚¹ã‚³ã‚¢æ”¹å–„ã—ãŸã‚‰ãã®ã¾ã¾ã€ã—ãªã‹ã£ãŸã‚‰æˆ»ã™
		if (ft_rand_double() <= probability) current_score = new_score;
		else reverse(route + L, route + R + 1);
	}
}

int main()
{
	cin >> N;
	for (int i= 1; i <= N; i++) cin >> X[i] >> Y[i];

	ft_local_search();
	for (int i= 1; i <= N + 1; i++) cout << route[i] << endl;
	return 0;
}
```

## 7.4 ãƒ“ãƒ¼ãƒ ã‚µãƒ¼ãƒ
### A49 - Heuristic 2

https://atcoder.jp/contests/tessoku-book/tasks/tessoku_book_aw

```cpp
struct State
{
	int score;		// æš«å®šã®ã‚¹ã‚³ã‚¢
	int X[29];		// æš«å®šã®Xã®é…åˆ—
	char LastMove;	// æœ€å¾Œã®å‹•ã
	int LastPos;	// Beam@[i - 1][ï¼Ÿ]ã‹ã‚‰é·ç§»ã—ãŸã‹
};

bool	operator>(const State& a1, const State& a2)
{
	if (a1.score > a2.score) return true;
	else return false;
}

const int WIDTH = 10000; // ãƒ“ãƒ¼ãƒ å¹…
const int N = 20;
int T, P[109], Q[109], R[109];
int NumState[109];
State Beam[109][WIDTH];
char Answer[109];

void BeamSearch()
{
	// åˆæœŸçŠ¶æ…‹ã®è¨­å®š
	NumState[0] = 1;
	Beam[0][0].score = 0;
	for(int i= 1; i<= N; i++) Beam[0][0].X[i] = 0;

	// ãƒ“ãƒ¼ãƒ ã‚µãƒ¼ãƒ
	for(int i = 1; i <= T; i++)
	{
		vector<State> Candidate;
		for(int j = 0; j <= NumState[i -1]; j++)
		{
			// æ“ä½œAã®å ´åˆ
			State SousaA = Beam[i - 1][j];
			SousaA.LastMove = 'A';
			SousaA.LastPos = j;
			SousaA.X[P[i]] += 1;
			SousaA.X[Q[i]] += 1;
			SousaA.X[R[i]] += 1;
			for(int k = 1; k <= T; k++)
			{
				if (SousaA.X[k] == 0) SousaA.score += 1;
			}
			
			// æ“ä½œBã®å ´åˆ
			State SousaB = Beam[i - 1][j];
			SousaB.LastMove = 'B';
			SousaB.LastPos = j;
			SousaB.X[P[i]] += 1;
			SousaB.X[Q[i]] += 1;
			SousaB.X[R[i]] += 1;
			for(int k = 1; k <= T; k++)
			{
				if (SousaB.X[k] == 0) SousaB.score += 1;
			}
			Candidate.push_back(SousaA);
			Candidate.push_back(SousaB);
		}
		sort(Candidate.begin(), Candidate.end(), greater<State>());
		NumState[i] = min(WIDTH, (int)Candidate.size());
		for(int j = 0; j <= NumState[i]; j++) Beam[i][j] = Candidate[j];
	}
}

int main()
{
	// å…¥åŠ›
	cin >> T;
	for (int i = 1; i <= T; i++) cin >> P[i] >> Q[i] >> R[i];
	// ãƒ“ãƒ¼ãƒ ã‚µãƒ¼ãƒ
	BeamSearch();
	// ãƒ“ãƒ¼ãƒ ã‚µãƒ¼ãƒã®å¾©å…ƒ
	int current_place = 0;
	for (int i = T; i >= 1; i--)
	{
		Answer[i] = Beam[i][current_place].LastMove; 
		current_place = Beam[i][current_place].LastPos; 
	}
	// å‡ºåŠ›
	for (int i = 1; i <= T; i++) cout << Answer[i] << endl;;
}
```

## 7.5 ãƒãƒ£ãƒ¬ãƒ³ã‚¸å•é¡Œ
### A50 - å±±å‹è¶³ã—ç®—

å®Ÿéš›ã®å¤§ä¼šã§å‡ºé¡Œã•ã‚ŒãŸå•é¡Œã‚‰ã—ãã€éå¸¸ã«æ­¯å¿œãˆãŒã‚ã‚‹å•é¡Œã€‚ï¼ˆé›£ã—ã„ï¼‰

æ­£ç›´ã¾ã ç†è§£ã§ãã¦ã„ãªã„ã®ã§ã€å†å®Ÿè£…å¿…é ˆã€‚

https://atcoder.jp/contests/tessoku-book/tasks/future_contest_2018_qual_a

```cpp
#include <iostream>
#include <cmath>
#include <ctime>
#include <algorithm>
using namespace std;

int N = 100;
int Q = 1000;
int A[109][109], B[109][109];
int X[1009], Y[1009], H[1009];

// L ä»¥ä¸Š R ä»¥ä¸‹ã®ãƒ©ãƒ³ãƒ€ãƒ ãªæ•´æ•°ã‚’è¿”ã™é–¢æ•°
int RandInt(int L, int R) {
	return rand() % (R - L + 1) + L;
}

// ç¾åœ¨ã®ã‚¹ã‚³ã‚¢ã‚’è¿”ã™é–¢æ•°
int GetScore() {
	int sum = 0;
	for (int i = 0; i < N; i++) {
		for (int j = 0; j < N; j++) sum += abs(A[i][j] - B[i][j]);
	}
	return 200000000 - sum;
}

// X[t]=x, Y[t]=y, H[t]=h ã«å¤‰æ›´ã™ã‚‹é–¢æ•°
void Change(int t, int x, int y, int h) {
	for (int i = 0; i < N; i++) {
		for (int j = 0; j < N; j++) {
			B[j][i] -= max(0, H[t] - abs(X[t] - i) - abs(Y[t] - j));
		}
	}
	X[t] = x;
	Y[t] = y;
	H[t] = h;
	for (int i = 0; i < N; i++) {
		for (int j = 0; j < N; j++) {
			B[j][i] += max(0, H[t] - abs(X[t] - i) - abs(Y[t] - j));
		}
	}
}

void Yamanobori() {
	// å¤‰æ•°ã®è¨­å®šï¼ˆ5.95 ç§’ãƒ«ãƒ¼ãƒ—ã‚’å›ã™ï¼‰
	int TIMELIMIT = 5.95 * CLOCKS_PER_SEC;
	int CurrentScore = GetScore();
	int ti = clock();

	// å±±ç™»ã‚Šæ³•ã‚¹ã‚¿ãƒ¼ãƒˆ
	while (clock() - ti < TIMELIMIT) {
		int t = RandInt(1, Q);
		int old_x = X[t], new_x = X[t] + RandInt(-9, 9);
		int old_y = Y[t], new_y = Y[t] + RandInt(-9, 9);
		int old_h = H[t], new_h = H[t] + RandInt(-19, 19);
		if (new_x < 0 || new_x >= N) continue;
		if (new_y < 0 || new_y >= N) continue;
		if (new_h <= 0 || new_h > N) continue;

		// ã¨ã‚Šã‚ãˆãšå¤‰æ›´ã—ã€ã‚¹ã‚³ã‚¢ã‚’è©•ä¾¡ã™ã‚‹
		Change(t, new_x, new_y, new_h);
		int NewScore = GetScore();

		// ã‚¹ã‚³ã‚¢ã«å¿œã˜ã¦æ¡ç”¨ï¼ä¸æ¡ç”¨ã‚’æ±ºã‚ã‚‹
		if (CurrentScore < NewScore) CurrentScore = NewScore;
		else Change(t, old_x, old_y, old_h);
	}
}

int main() {
	// å…¥åŠ›
	for (int i = 0; i < N; i++) {
		for (int j = 0; j < N; j++) cin >> A[i][j];
	}

	// åˆæœŸè§£ã‚’ç”Ÿæˆ
	for (int i = 1; i <= 1000; i++) {
		X[i] = rand() % N; // 0 ä»¥ä¸Š N-1 ä»¥ä¸‹ã®ãƒ©ãƒ³ãƒ€ãƒ ãªæ•´æ•°
		Y[i] = rand() % N; // 0 ä»¥ä¸Š N-1 ä»¥ä¸‹ã®ãƒ©ãƒ³ãƒ€ãƒ ãªæ•´æ•°
		H[i] = 1;
		B[X[i]][Y[i]] += 1;
	}

	// å±±ç™»ã‚Šæ³•
	Yamanobori();

	// å‡ºåŠ›
	cout << "1000" << endl;
	for (int i = 1; i <= 1000; i++) {
		cout << X[i] << " " << Y[i] << " " << H[i] << endl;
	}
	return 0;
}
```

## column4 å†å¸°é–¢æ•° 

# 8ç«  ãƒ‡ãƒ¼ã‚¿æ§‹é€ ã¨ã‚¯ã‚¨ãƒªå‡¦ç†
## 8.0 ãƒ‡ãƒ¼ã‚¿æ§‹é€ ã¨ã¯
## 8.1 ã‚¹ã‚¿ãƒƒã‚¯
### A51 - Stack

https://atcoder.jp/contests/tessoku-book/tasks/tessoku_book_ay

```cpp
int Q;
int Query[100009];
string x[100009];
stack<string> S;


int main()
{
	cin >> Q;
	for (int i = 1; i <= Q; i++)
	{
		cin >> Query[i];
		if (Query[i] == 1)
			cin >> x[i]; 
	}
	// ã‚¯ã‚¨ãƒªå‡¦ç†
	for (int i = 1; i <= Q; i++)
	{
		if (Query[i] == 1) S.push(x[i]);
		if (Query[i] == 2) cout << S.top() << endl;
		if (Query[i] == 3) S.pop();
		
	}
	return 0;
}
```

### B51 - Bracket

https://atcoder.jp/contests/tessoku-book/tasks/tessoku_book_dx

```cpp
string S;
stack<int> brackets;

int main()
{
	cin >> S;
	for (size_t i = 0; i < S.size(); i++)
	{
		if (S[i] == '(')
			brackets.push(i);
		else
		{
			cout << brackets.top() + 1 << " " << i + 1 << endl;
			brackets.pop();
		}
	}
	return 0;
}
```

## 8.2 ã‚­ãƒ¥ãƒ¼
### A52 - Queue

https://atcoder.jp/contests/tessoku-book/tasks/tessoku_book_az

```cpp
int Q;
int Query[100009];
string x[100009];
queue<string> S;

int main()
{
	cin >> Q;
	for(int i = 1; i <= Q; i++)
	{
		cin >> Query[i];
		if (Query[i] == 1) cin >> x[i];
	}
	// ã‚¯ã‚¨ãƒªå‡¦ç†
	for(int i = 1; i <= Q; i++)
	{
		if (Query[i] == 1) S.push(x[i]);
		if (Query[i] == 2) cout << S.front() << endl;
		if (Query[i] == 3) S.pop();
	}
	return 0;
}
```

### B52 - Ball Simulation

https://atcoder.jp/contests/tessoku-book/tasks/tessoku_book_dy


```cpp
int N , X;
string A;
int ball_color[100009];
queue<int> ball;

int main()
{
	// å…¥åŠ›
	cin >> N >> X >> A;
	for (int i = 1; i <= N; i++)
	{
		if (A[i - 1] == '#')
			ball_color[i] = 1;
		if (A[i - 1] == '.')
			ball_color[i] = 2;
	}
	// åˆæœŸå€¤ã®è¨­å®š
	ball_color[X] = 3;
	ball.push(X);
	// ã‚¯ã‚¨ãƒªå‡¦ç†
	while(!ball.empty())
	{
		int pos = ball.front();
		ball.pop();
		if (ball_color[pos - 1] == 2 && pos - 1 > 0)
		{
			ball_color[pos - 1] = 3;
			ball.push(pos - 1);
		}
		if (ball_color[pos + 1] == 2 && pos + 1 <= N)
		{
			ball_color[pos + 1] = 3;
			ball.push(pos + 1);
		}
	}
	// å‡ºåŠ›
	for (int i = 1; i <= N; i++)
	{
		if (ball_color[i] == 1) cout << "#";
		if (ball_color[i] == 2) cout << ".";
		if (ball_color[i] == 3) cout << "@";
	}
	cout << endl;
	return 0;
}
```

## 8.3 å„ªå…ˆåº¦ã¤ãã‚­ãƒ¥ãƒ¼
è¦ç´ ã‚’æ˜‡é †ã‚„é™é †ã§ä¿å­˜ã—ã¦ãŠãã“ã¨ãŒã§ãã‚‹ã‚­ãƒ¥ãƒ¼ã€‚

ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã§ã¯é™é †ã«ãªã£ã¦ã„ã‚‹ã®ã§ã€å°ã•ã„ã‚‚ã®ã‹ã‚‰å–ã‚Šå‡ºã—ãŸã„æ™‚ã«ã¯æ˜‡é †ã¸å¤‰æ›´ã™ã‚‹å¿…è¦ãŒã‚ã‚‹ã€‚

å…·ä½“çš„ã«ã¯ã€`priority_queue<int>`ã¨è¨˜è¿°ã™ã‚‹ã¨ã€`priority_queue<int, vector<int>, less<int>>`
ã«ãªã£ã¦ã„ã‚‹ã®ã§ã€`priority_queue<int, vector<int>, greater<int>>`ã¸å¤‰æ›´ã—ã¦ã‚ã’ã‚‹å¿…è¦ãŒã‚ã‚‹ã€‚

### A53 - Priority Queue

https://atcoder.jp/contests/tessoku-book/tasks/tessoku_book_ba

```cpp
#include <iostream>
#include <queue>
#include <vector>

using namespace std;

int Q;
int Query[100009];
int x[100009];
priority_queue<int, vector<int>, greater<int>> S;

int main()
{
	cin >> Q;
	for(int i = 1; i <= Q; i++)
	{
		cin >> Query[i];
		if (Query[i] == 1) cin >> x[i];
	}
	// ã‚¯ã‚¨ãƒªå‡¦ç†
	for(int i = 1; i <= Q; i++)
	{
		if (Query[i] == 1) S.push(x[i]);
		if (Query[i] == 2) cout << S.top() << endl;
		if (Query[i] == 3) S.pop();
	}
	return 0;
}
```

## 8.4 é€£æƒ³é…åˆ—
é€£æƒ³é…åˆ—ã¯ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹ã‚’è‡ªç”±ã«æŒ‡å®šã§ãã‚‹é…åˆ—ã€ã¨ã„ã†è¡¨ç¾ãŒä¸€ç•ªã—ã£ãã‚ŠããŸã€‚

### A54 - Map

https://atcoder.jp/contests/tessoku-book/tasks/tessoku_book_bb


```cpp
int Q;
int query[100009];
int score[100009];
string name[100009];
map<string, int> student;

int main()
{
	// å…¥åŠ›
	cin >> Q;
	for (int i = 0; i < Q; i++)
	{
		cin >> query[i];
		if (query[i] == 1)
			cin >> name[i] >> score[i];
		else
			cin >> name[i];
	}
	// mapã«ä»£å…¥
	for (int i = 0; i < Q; i++)
	{
		if (query[i] == 1)
			student[name[i]] = score[i];
		else
			cout << student[name[i]] << endl;
	}
	return 0;
}
```

### B54 - Counting Same Values

https://atcoder.jp/contests/tessoku-book/tasks/tessoku_book_ea

```cpp
long long N;
long long A[100009];
map<long long, long long> count_num;

long long	ft_count(long long n)
{
	if (n < 2)
		return 0;
	return (n * (n - 1)) / 2;
}

int main()
{
	// å…¥åŠ›
	cin >> N;
	for (int i = 0; i < N; i++) cin >> A[i];

	// ã‚«ã‚¦ãƒ³ãƒˆ
	for (int i = 0; i < N; i++) count_num[A[i]]++;

	// åˆè¨ˆ
	long long ans = 0;
	for (auto& pair : count_num) {
		ans += ft_count(pair.second);
	}

	// å‡ºåŠ›
	cout << ans << endl;
	return 0;
}
```

## 8.5 é›†åˆã®ç®¡ç†
### A55 - Set

https://atcoder.jp/contests/tessoku-book/tasks/tessoku_book_bc

```cpp
int Q;
int Query[100009];
int Card[100009];
set<int> S;

int main()
{
	// å…¥åŠ›
	cin >> Q;
	for (int i = 1; i <= Q; i++)
		cin >> Query[i] >> Card[i];
	for (int i = 1; i <= Q; i++)
	{
		if (Query[i] == 1)
			S.insert(Card[i]);
		if (Query[i] == 2)
			S.erase(Card[i]);
		if (Query[i] == 3)
		{
			auto itr = S.lower_bound(Card[i]);
			if (itr == S.end())
				cout << "-1" << endl;
			else
				cout << (*itr) << endl;
		}
	}
	return 0;
}
```

### B55 - Difference

https://atcoder.jp/contests/tessoku-book/tasks/tessoku_book_eb


```cpp
int Q;
int Query[100009];
int Card[100009];
set<int> ondesk_card;

int main()
{
	// å…¥åŠ›
	cin >> Q;
	for (int i = 1; i <= Q; i++)
	{
		cin >> Query[i] >> Card[i];
	}
	// ã‚¯ã‚¨ãƒªå‡¦ç†
	for (int i = 1; i <= Q; i++)
	{
		if (Query[i] == 1)
		{
			ondesk_card.insert(Card[i]);
		}
		if (Query[i] == 2)
		{
			if (ondesk_card.empty())
				cout << "-1" << endl;
			else
			{	
				auto itr = ondesk_card.lower_bound(Card[i]);
                int minDiff = INT_MAX;
				if (ondesk_card.size() == 1)
					minDiff = abs(Card[i] - *ondesk_card.begin());
                if (itr != ondesk_card.end())
                {
                    minDiff = abs(Card[i] - *itr);
                }
                if (itr != ondesk_card.begin())
                {
                    itr--;
                    minDiff = min(minDiff, abs(Card[i] - *itr));
                }
				cout << minDiff << endl;
			}
		}
	}
}
```
## 8.6 æ–‡å­—åˆ—ã®ãƒãƒƒã‚·ãƒ¥

### A56 - String Hash

ãƒãƒƒã‚·ãƒ¥å€¤ã‚’ç”¨ã„ã¦æ–‡å­—åˆ—ã®æ¯”è¼ƒã‚’è¡Œã†ã€‚

https://atcoder.jp/contests/tessoku-book/tasks/tessoku_book_bd

```cpp
long long N, Q;
string S;
long long a[200009];
long long b[200009];
long long c[200009];
long long d[200009];

// ãƒãƒƒã‚·ãƒ¥å€¤ã‚’è¨ˆç®—ã™ã‚‹ãŸã‚ã®å¤‰æ•° 
long long mod = INT_MAX;	// ãªã‚‹ã¹ãå¤§ããªç´ æ•°
long long T[200009];		// æ–‡å­—åˆ—ã‚’æ•°ã«å¤‰æ›ã™ã‚‹ãŸã‚ã®ç®±
long long H[200009];
long long Power100[200009];

// S[l,r]ã®ãƒãƒƒã‚·ãƒ¥å€¤ã‚’è¿”ã™é–¢æ•°
// ã‚ã¾ã‚Šã®è¨ˆç®—ã«æ³¨æ„ï¼
long long ft_hash(int l, int r)
{
	long long val = H[r] -(H[l - 1] * Power100[r - l + 1] % mod);
	if (val < 0) val += mod;
	return val;
}


int main()
{
	// å…¥åŠ›
	cin >> N >> Q >> S;
	for (int i = 1; i <= Q; i++) cin >> a[i] >> b[i] >> c[i] >> d[i];
	
	// æ–‡å­—ã‚’æ•°å€¤ã«å¤‰æ›
	for (int i = 1; i <= N; i++) T[i] = (S[i - 1] - 'a') + 1;

	// 100ã®nä¹—ã‚’å‰è¨ˆç®—ã—ã¦ãŠã
	Power100[0] = 1;
	for (int i = 1; i <= N; i++) Power100[i] = 100LL * Power100[i - 1] % mod;

	// H[1],...,H[N]ã‚’è¨ˆç®—ã™ã‚‹
	H[0] = 0;
	for (int i = 1; i <= N; i++) H[i] = (100LL * H[i - 1] + T[i]) % mod;

	// ã‚¯ã‚¨ãƒªã«ç­”ãˆã‚‹
	for (int i = 1; i <= Q; i++)
	{
		long long hash1 = ft_hash(a[i], b[i]);
		long long hash2 = ft_hash(c[i], d[i]);
		if (hash1 == hash2) cout << "Yes" << endl;
		else cout << "No" << endl;
	}
	return 0;
}
```

### B56 - Palindrome Queries

https://atcoder.jp/contests/tessoku-book/tasks/tessoku_book_ec

```cpp
long long N, Q;
string S;
string S_rev;
long long L[200009];
long long R[200009];

// ãƒãƒƒã‚·ãƒ¥å€¤ã‚’è¨ˆç®—ã™ã‚‹ãŸã‚ã®å¤‰æ•° 
long long mod = 1000000007;	// ãªã‚‹ã¹ãå¤§ããªç´ æ•°
long long T[200009];		// æ–‡å­—åˆ—ã‚’æ•°ã«å¤‰æ›ã™ã‚‹ãŸã‚ã®ç®±
long long T_rev[200009];		// æ–‡å­—åˆ—ã‚’æ•°ã«å¤‰æ›ã™ã‚‹ãŸã‚ã®ç®±
long long H[200009];
long long H_rev[200009];
long long Power100[200009];

// S[l,r]ã®ãƒãƒƒã‚·ãƒ¥å€¤ã‚’è¿”ã™é–¢æ•°
// ã‚ã¾ã‚Šã®è¨ˆç®—ã«æ³¨æ„ï¼
long long ft_hash(int l, int r)
{
	long long val = H[r] -(H[l - 1] * Power100[r - l + 1] % mod);
	if (val < 0) val += mod;
	return val;
}

// é€†ã‹ã‚‰èª­ã‚“ã æ™‚ã®ãƒãƒƒã‚·ãƒ¥è¨ˆç®—
long long ft_hash_rev(int l, int r)
{
	long long val = H_rev[r] -(H_rev[l - 1] * Power100[r - l + 1] % mod);
	if (val < 0) val += mod;
	return val;
}

int main()
{
	// å…¥åŠ›
	cin >> N >> Q >> S;
	for (int i = 1; i <= Q; i++) cin >> L[i] >> R[i];
	
	S_rev = S;
	reverse(S_rev.begin(), S_rev.end());

	// æ–‡å­—ã‚’æ•°å€¤ã«å¤‰æ›
	for (int i = 1; i <= N; i++) T[i] = (S[i - 1] - 'a') + 1;
	for (int i = 1; i <= N; i++) T_rev[i] = (S_rev[i - 1] - 'a') + 1;


	// 100ã®nä¹—ã‚’å‰è¨ˆç®—ã—ã¦ãŠã
	Power100[0] = 1;
	for (int i = 1; i <= N; i++) Power100[i] = 100LL * Power100[i - 1] % mod;

	// H[1],...,H[N]ã‚’è¨ˆç®—ã™ã‚‹
	H[0] = 0;
	for (int i = 1; i <= N; i++) H[i] = (100LL * H[i - 1] + T[i]) % mod;
	// åè»¢ç‰ˆã‚‚è¨ˆç®—ã—ã¦ãŠã
	H_rev[0] = 0;
	for (int i = 1; i <= N; i++) H_rev[i] = (100LL * H_rev[i - 1] + T_rev[i]) % mod;
	

	// ã‚¯ã‚¨ãƒªã«ç­”ãˆã‚‹
	for (int i = 1; i <= Q; i++) {
		long long hash1 = ft_hash(L[i], R[i]);
		long long hash2 = ft_hash_rev(N - R[i] + 1, N - L[i] + 1);
		if (hash1 == hash2) cout << "Yes" << endl;
		else cout << "No" << endl;
	}
	return 0;
}
```

## 8.7 ãƒ€ãƒ–ãƒªãƒ³ã‚°

### A57 - Doubling

https://atcoder.jp/contests/tessoku-book/tasks/tessoku_book_be

```cpp
#include <iostream>

using namespace std;

int N, Q;
int A[100009];
int X[100009];
int Y[100009];
int dp[32][100009];		// åˆ¶ç´„ãŒ10^9ãªã®ã§2^10=1024ã‚ˆã‚Šã€2^30ã‚ã‚Œã°ååˆ†

int main()
{
	// å…¥åŠ›
	cin >> N >> Q;
	for (int i = 1; i <= N; i++) cin >> A[i];
	for (int i = 1; i <= Q; i++) cin >> X[i] >> Y[i];
	// å‰ã‚‚ã£ã¦è¨ˆç®—ã—ã¦ãŠã
	for (int i = 1; i <= N; i++) dp[0][i] = A[i];
	for (int d = 1; d <= 30; d++)
	{
		for (int i = 1; i <= N; i++) dp[d][i] = dp[d - 1][dp[d - 1][i]];
	}
	// ã‚¯ã‚¨ãƒªã®å‡¦ç†
	for (int i = 1; i <= Q; i++)
	{
		int pos = X[i];
		for (int d = 30; d >= 0; d--)
		{
			if ((Y[i] >> d) & 1) pos = dp[d][pos];
		}
		cout << pos << endl;
	}
	return 0;
}
```

## 8.8 ã‚»ã‚°ãƒ¡ãƒ³ãƒˆæœ¨ï¼šRMQ
### A58 - RMQ (Range Maximum Queries)

https://atcoder.jp/contests/tessoku-book/tasks/tessoku_book_bf

```cpp
class SegmentTree{
	public:
	int dat[300000];
	int siz = 1;

	// è¦ç´ datã®åˆæœŸåŒ–ã‚’è¡Œã†
	void	init(int N)
	{
		siz = 1;
		while (siz < N) siz *= 2;
		for (int i = 1; i < siz * 2; i++) dat[i] = 0;
	}

	// ã‚¯ã‚¨ãƒª1ã«å¯¾ã™ã‚‹å‡¦ç†
	void update(int pos, int x)
	{
		pos = pos + siz - 1;
		dat[pos] = x;
		while (pos >= 2)
		{
			pos /= 2;
			dat[pos] = max(dat[pos * 2], dat[pos * 2 + 1]);
		}
	}

	// ã‚¯ã‚¨ãƒª2ã«å¯¾ã™ã‚‹å‡¦ç†
	int query(int l, int r, int a, int b, int u)
	{
		if (r <= a || b <= l) return -1000000;
		if (l <= a && b <= r) return dat[u];
		int m = (a + b) / 2;
		int AnswerL = query(l, r, a, m, u * 2);
		int AnswerR = query(l, r, m, b, u * 2 + 1);
		return max(AnswerR, AnswerL);
	}
};

int N, Q;
int Query[100009];
int pos[100009];
int x[100009];
int l[100009];
int r[100009];
SegmentTree Z;

int main()
{
	// å…¥åŠ›
	cin >> N >> Q;
	for (int i = 1; i <= Q; i++)
	{
		cin >> Query[i];
		if (Query[i] == 1) cin >> pos[i] >> x[i];
		if (Query[i] == 2) cin >> l[i] >> r[i];
	}
	// ã‚¯ã‚¨ãƒªå‡¦ç†
	Z.init(N);
	for (int i = 1; i <= Q; i++)
	{
		if (Query[i] == 1) Z.update(pos[i], x[i]);
		if (Query[i] == 2)
		{
			int ans = Z.query(l[i], r[i], 1, Z.siz + 1, 1);
			cout << ans << endl;
		}
	}
	return 0;
}
```

### B58 - Jumping

https://atcoder.jp/contests/tessoku-book/tasks/tessoku_book_ee

```cpp
class SegmentTree {
private:
    vector<int> tree;
    int n;

public:
    SegmentTree(int size) {
        n = size;
        tree.resize(4 * n, INT_MAX);
    }

    void update(int idx, int value, int node = 1, int start = 0, int end = -1) {
        if (end == -1) end = n - 1;
        if (start == end) {
            tree[node] = value;
        } else {
            int mid = (start + end) / 2;
            if (idx <= mid) {
                update(idx, value, 2 * node, start, mid);
            } else {
                update(idx, value, 2 * node + 1, mid + 1, end);
            }
            tree[node] = min(tree[2 * node], tree[2 * node + 1]);
        }
    }

    int query(int L, int R, int node = 1, int start = 0, int end = -1) {
        if (end == -1) end = n - 1;
        if (R < start || L > end) return INT_MAX;
        if (L <= start && end <= R) return tree[node];
        int mid = (start + end) / 2;
        return min(query(L, R, 2 * node, start, mid), query(L, R, 2 * node + 1, mid + 1, end));
    }
};

int main() {
    int N, L, R;
    cin >> N >> L >> R;

    vector<int> X(N);
    for (int i = 0; i < N; i++) {
        cin >> X[i];
    }

    vector<int> dp(N, INT_MAX);
    dp[0] = 0;

    SegmentTree seg(N);
    seg.update(0, 0);

    for (int i = 1; i < N; i++) {
        int left = lower_bound(X.begin(), X.end(), X[i] - R) - X.begin();
        int right = upper_bound(X.begin(), X.end(), X[i] - L) - X.begin() - 1;
        if (left <= right) {
            int min_jump = seg.query(left, right);
            if (min_jump != INT_MAX) {
                dp[i] = min_jump + 1;
            }
        }
        seg.update(i, dp[i]);
    }

    cout << dp[N - 1] << endl;

    return 0;
}
```

## 8.9 ã‚»ã‚°ãƒ¡ãƒ³ãƒˆæœ¨ï¼šRSQ
### A59 - RSQ (Range Sum Queries)

https://atcoder.jp/contests/tessoku-book/tasks/tessoku_book_bg

```cpp
class SegmentTree {
private:
    vector<int> tree;
    int n;

public:
    SegmentTree(int size) {
        n = size;
        tree.resize(4 * n, INT_MAX);
    }

    void update(int idx, int value, int node = 1, int start = 0, int end = -1) {
        if (end == -1) end = n - 1;
        if (start == end) {
			// åŸºåº•ã‚±ãƒ¼ã‚¹ï¼šè‘‰ãƒãƒ¼ãƒ‰ã®æ›´æ–°
            tree[node] = value;
        } else {
            int mid = (start + end) / 2;
            if (idx <= mid) {
                update(idx, value, 2 * node, start, mid);		// å·¦å´ã®å­ãƒãƒ¼ãƒ‰ã®æ›´æ–°
            } else {
                update(idx, value, 2 * node + 1, mid + 1, end);	// å³å´ã®å­ãƒãƒ¼ãƒ‰ã®æ›´æ–°
            }
			// ç¾åœ¨ã®ãƒãƒ¼ãƒ‰ã®å€¤ã‚’æ›´æ–°
            tree[node] = min(tree[2 * node], tree[2 * node + 1]);
        }
    }

    int query(int L, int R, int node = 1, int start = 0, int end = -1) {
        if (end == -1) end = n - 1;
        if (R < start || L > end) return INT_MAX;		// ç¯„å›²å¤–ã¸ã¯ã¿ã ã™å ´åˆ
        if (L <= start && end <= R) return tree[node];	// å®Œå…¨ã«ç¯„å›²å¤–ã®å ´åˆ
        int mid = (start + end) / 2;
		// å·¦å³ã®å­ãƒãƒ¼ãƒ‰ã«å†èµ·çš„ã«ã‚¯ã‚¨ãƒªã‚’è¡Œã„ã€ãã®çµæœã®æœ€å°å€¤ã‚’è¿”ã™
        return min(query(L, R, 2 * node, start, mid), query(L, R, 2 * node + 1, mid + 1, end));
    }
};


int main() {
	// å…¥åŠ›
	int N, L, R;
    cin >> N >> L >> R;
    vector<int> X(N);
    for (int i = 0; i < N; i++) {
        cin >> X[i];
    }

	// é…åˆ—ã®åˆæœŸåŒ–
    vector<int> dp(N, INT_MAX);
    dp[0] = 0;

    SegmentTree seg(N);
    seg.update(0, 0);

	// ã‚»ã‚°ãƒ¡ãƒ³ãƒˆæœ¨ã‚’ç”¨ã„ãŸå‹•çš„è¨ˆç”»æ³•
    for (int i = 1; i < N; i++) {
        int left = lower_bound(X.begin(), X.end(), X[i] - R) - X.begin();
        int right = upper_bound(X.begin(), X.end(), X[i] - L) - X.begin() - 1;
        if (left <= right) {
			// ç¯„å›²å†…ã®æœ€å°ã‚¸ãƒ£ãƒ³ãƒ—æ•°ã‚’å–å¾—
            int min_jump = seg.query(left, right);
            if (min_jump != INT_MAX) {
                dp[i] = min_jump + 1;
            }
        }
        seg.update(i, dp[i]);
    }

	// æœ€çµ‚åœ°ç‚¹ã¾ã§ã®æœ€å°ã‚¹ãƒ†ãƒƒãƒ—æ•°ã‚’å‡ºåŠ›
    cout << dp[N - 1] << endl;

    return 0;
}

```

### B59 - Number of Inversions

https://atcoder.jp/contests/tessoku-book/tasks/tessoku_book_ef

```cpp

```

## 8.10 ãƒãƒ£ãƒ¬ãƒ³ã‚¸å•é¡Œ
### A60 - Stock Price

æƒ…å ±ã®å–æ¨é¸æŠãŒå¤§åˆ‡ãªå•é¡Œã€‚ã‚‚ã†çµ¶å¯¾ã«èµ·ç®—æ—¥ã«ãªã‚‰ãªã„ï¼ã¨ã„ã†æ—¥ã‚’stackã‹ã‚‰æ¶ˆå»ã—ã¦ã„ãã€‚

https://atcoder.jp/contests/tessoku-book/tasks/tessoku_book_bh

```cpp
int N, A[200009];
int Answer[200009];
stack<pair<int, int>> Level2;

int main() {
	// å…¥åŠ›
	cin >> N;
	for (int i = 1; i <= N; i++) cin >> A[i];

	// ã‚¹ã‚¿ãƒƒã‚¯ã®å¤‰åŒ–ã®å†ç¾
	for (int i = 1; i <= N; i++) {
		if (i >= 2) {
			Level2.push(make_pair(i - 1, A[i - 1]));
			while (!Level2.empty()) {
				int kabuka = Level2.top().second;
				if (kabuka <= A[i]) Level2.pop();
				else break;
			}
		}

		// èµ·ç®—æ—¥ã®ç‰¹å®š
		if (!Level2.empty()) Answer[i] = Level2.top().first;
		else Answer[i] = -1;
	}

	// å‡ºåŠ›
	for (int i = 1; i <= N; i++) {
		if (i >= 2) cout << " ";
		cout << Answer[i];
	}
	cout << endl;
	return 0;
}
```

# 9ç«  ã‚°ãƒ©ãƒ•ã‚¢ãƒ«ã‚´ãƒªã‚ºãƒ  
## 9.0 ã‚°ãƒ©ãƒ•ã¨ã¯
## ã‚³ãƒ©ãƒ 5 ã‚°ãƒ©ãƒ•ã«é–¢ã™ã‚‹ç”¨èª
## 9.1 ã‚°ãƒ©ãƒ•ã®å®Ÿè£…æ–¹æ³•

### A61 - Adjacent Vertices

https://atcoder.jp/contests/tessoku-book/tasks/tessoku_book_bi

```cpp
int N, M;
int A[100009], B[100009];
vector<int> Graph[100009];

int main()
{
	cin >> N >> M;
	for (int i = 1; i <= M; i++)
	{
		cin >> A[i] >> B[i];
		Graph[A[i]].push_back(B[i]);
		Graph[B[i]].push_back(A[i]);
	}
	for (int i = 1; i <= N; i++)
	{
		cout << i << ": {";
		for (int j = 0; j < Graph[i].size(); j++)
		{
			if (j > 0) cout << ", ";
			cout << Graph[i][j];
		}
		cout << "}" << endl;
	}
	return 0;
}
```

### B61 - Influencer

https://atcoder.jp/contests/tessoku-book/tasks/tessoku_book_eh

```cpp
int N, M;
int A[100009], B[100009];
vector<int> Friends[100009];

int main()
{
	cin >> N >> M;
	for (int i = 1; i <= M; i++)
	{
		cin >> A[i] >> B[i];
		Friends[A[i]].push_back(B[i]);
		Friends[B[i]].push_back(A[i]);
	}
	int max_friends = 0;
	int max_friends_student = 0;
	for (int i = 1; i <= N; i++)
	{
		int num_friends = Friends[i].size();
		if (max_friends < num_friends)
		{
			max_friends = num_friends;
			max_friends_student = i;
		}
	}
	cout << max_friends_student << endl;
	return 0;
}
```

## 9.2 æ·±ã•å„ªå…ˆæ¢ç´¢
### A62 - Depth First Search

https://atcoder.jp/contests/tessoku-book/tasks/math_and_algorithm_am


```cpp
int N, M;
int A[100009], B[100009];
vector<int> Graph[100009];
bool visited[100009];

void	ft_dfs(int place)
{
	visited[place] = true;
	for (int i = 0; i < Graph[place].size(); i++)
	{
		int new_place = Graph[place][i];
		if (visited[new_place] == false) ft_dfs(new_place);
	}
	return ;
}

int main()
{
	cin >> N >> M;
	for (int i = 1; i <= M; i++)
	{
		cin >> A[i] >> B[i];
		Graph[A[i]].push_back(B[i]);
		Graph[B[i]].push_back(A[i]);
	}
	// å…¨ã¦ã®é ‚ç‚¹ã‚’æœªè¸ã«åˆæœŸåŒ–
	for (int i = 1; i <= N; i++) visited[i] = false;
	// 1ã¤ç›®ã®é ‚ç‚¹ã‹ã‚‰å†å¸°é–¢æ•°ã«ã‚ˆã‚‹æ·±ã•å„ªå…ˆæ¢ç´¢
	ft_dfs(1);
	// å‡ºåŠ›
	for (int i = 1; i <= N; i++)
	{
		if (visited[i] == false)
		{
			cout << "The graph is not connected." << endl;
			return 0;
		}
	}
	cout << "The graph is connected." << endl;
	return 0;
}
```

### B62 - Print a Path

https://atcoder.jp/contests/tessoku-book/tasks/tessoku_book_ei

```cpp
int N, M;
int A[100009], B[100009];
vector<int> Graph[100009];
bool visited[100009];
vector<int> path;

void	ft_dfs(int place)
{
	visited[place] = true;
	path.push_back(place);
	if (place == N) return;
	for (int i = 0; i < Graph[place].size(); i++)
	{
		int new_place = Graph[place][i];
		if (visited[new_place] == false) ft_dfs(new_place);
		if (path.back() == N) return;
	}
	visited[place] = false;
	path.pop_back();
	return ;
}

int main()
{
	cin >> N >> M;
	for (int i = 1; i <= M; i++)
	{
		cin >> A[i] >> B[i];
		Graph[A[i]].push_back(B[i]);
		Graph[B[i]].push_back(A[i]);
	}
	// å…¨ã¦ã®é ‚ç‚¹ã‚’æœªè¸ã«åˆæœŸåŒ–
	for (int i = 1; i <= N; i++) visited[i] = false;
	// 1ã¤ç›®ã®é ‚ç‚¹ã‹ã‚‰å†å¸°é–¢æ•°ã«ã‚ˆã‚‹æ·±ã•å„ªå…ˆæ¢ç´¢
	ft_dfs(1);
	// å‡ºåŠ›
	for (int i = 0; i < path.size(); i++)
	{
		if (i > 0) cout << " ";
		cout << path[i];
	}
	cout << endl;
	return 0;
}
```


https://qiita.com/messhii222/items/4a66e5f0f9ad37b2f18d

## 9.3 å¹…å„ªå…ˆæ¢ç´¢
### A63 - Shortest Path 1

https://atcoder.jp/contests/tessoku-book/tasks/math_and_algorithm_an

```cpp
int N, M;
int A[100009], B[100009];
vector<int> Graph[100009];
int dist[100009];
queue<int> Q;

int main()
{
	// å…¥åŠ›
	cin >> N >> M;
	for (int i = 1; i <= M; i++)
	{
		cin >> A[i] >> B[i];
		Graph[A[i]].push_back(B[i]);
		Graph[B[i]].push_back(A[i]);
	}
	// åˆæœŸåŒ–
	for (int i = 1; i <= N; i++) dist[i] = -1;
	// å¹…å„ªå…ˆæ¢ç´¢
	Q.push(1);
	dist[1] = 0;
	while (!Q.empty())
	{
		// å…ˆé ­ã®è¦ç´ ã‚’å–å¾—ã—ã¦å‰Šé™¤
		int pos = Q.front();
		Q.pop();
		// æœªç¢ºå®šã®ãƒãƒ¼ãƒ‰ãŒã‚ã£ãŸã‚‰ç¾çŠ¶+1ã—ã¦ã‚­ãƒ¥ãƒ¼ã«åŠ ãˆã‚‹
		for (int i = 0; i < Graph[pos].size(); i++)
		{
			int next = Graph[pos][i];
			if (dist[next] == -1)
			{
				dist[next] = dist[pos] + 1;
				Q.push(next);
			}
		}
	}
	// å‡ºåŠ›
	for (int i = 1; i <= N; i++) cout << dist[i] << endl;
	return 0;
}
```

### B63 - å¹…å„ªå…ˆæ¢ç´¢

https://atcoder.jp/contests/tessoku-book/tasks/abc007_3

```cpp
int R, C, sy, sx, gy, gx;
char board[2509];
int dist[2509];
vector<int> Graph[2509];
queue<int> Q;

int main()
{
	// å…¥åŠ›
	cin >> R >> C >> sy >> sx >> gy >> gx;
	for (int i = 1; i <= C * R; i++) cin >> board[i];
	// åˆæœŸåŒ–
	for (int i = 1; i <= C * R; i++) dist[i] = -1;
	for (int i = 1; i <= C * R; i++)
	{
		if (board[i] == '.')
		{
			dist[i] = -1;
			if (i % C != 1)
			{
				if (board[i - 1] == '.') Graph[i].push_back(i - 1);
			}
			if (i % C != 0)
			{
				if (board[i + 1] == '.') Graph[i].push_back(i + 1);
			}
			if (i > C)
			{
				if (board[i - C] == '.') Graph[i].push_back(i - C);
			}
			if (i < C * (R - 1))
			{
				if (board[i + C] == '.') Graph[i].push_back(i + C);
			}
		}
	}
	// å¹…å„ªå…ˆæ¢ç´¢
	int start = (sy - 1) * C + sx;
	Q.push(start);
	dist[start] = 0;
	while (!Q.empty())
	{
		// å…ˆé ­ã®è¦ç´ ã‚’å–å¾—ã—ã¦å‰Šé™¤
		int pos = Q.front();
		Q.pop();
		// æœªç¢ºå®šã®ãƒãƒ¼ãƒ‰ãŒã‚ã£ãŸã‚‰ç¾çŠ¶+1ã—ã¦ã‚­ãƒ¥ãƒ¼ã«åŠ ãˆã‚‹
		for (int i = 0; i < Graph[pos].size(); i++)
		{
			int next = Graph[pos][i];
			if (dist[next] == -1 || dist[next] > dist[pos] + 1)
			{
				dist[next] = dist[pos] + 1;
				Q.push(next);
			}
		}
	}
	cout << dist[(gy - 1) * C + gx] << endl;
	return 0;
}
```

## 9.4 ãƒ€ã‚¤ã‚¯ã‚¹ãƒˆãƒ©æ³•

### A64 - Shortest Path 2

https://atcoder.jp/contests/tessoku-book/tasks/tessoku_book_bl

```cpp
#include <iostream>
#include <vector>
#include <queue>

using namespace std;

const int INF = 1e9;

int N, M;
int A[100009];
int B[100009];
int C[100009];
vector<pair<int, int>> graph[100009];
int cur[100009];

int main() {
    cin >> N >> M;
    for (int i = 1; i <= M; i++) {
        cin >> A[i] >> B[i] >> C[i];
        graph[A[i]].push_back(make_pair(B[i], C[i]));
        graph[B[i]].push_back(make_pair(A[i], C[i]));
    }

    // é…åˆ—ã®åˆæœŸåŒ–
    for (int i = 1; i <= N; i++) {
        cur[i] = INF;
    }

    // ã‚¹ã‚¿ãƒ¼ãƒˆåœ°ç‚¹ã‚’ã‚­ãƒ¥ãƒ¼ã«è¿½åŠ 
    cur[1] = 0;
    priority_queue<pair<int, int>, vector<pair<int, int>>, greater<pair<int, int>>> Q;
    Q.push(make_pair(cur[1], 1));

    // ãƒ€ã‚¤ã‚¯ã‚¹ãƒˆãƒ©æ³•
    while (!Q.empty()) {
        pair<int, int> top = Q.top();
        int pos = top.second;
        Q.pop();

        // cur[pos]ã®å€¤ãŒæ›´æ–°ã•ã‚Œã¦ã„ã‚‹å ´åˆã¯é£›ã°ã™
        if (cur[pos] < top.first) continue;

        for (int i = 0; i < graph[pos].size(); i++) {
            int next_place = graph[pos][i].first;
            int next_time = graph[pos][i].second;
            if (cur[next_place] > cur[pos] + next_time) {
                cur[next_place] = cur[pos] + next_time;
                Q.push(make_pair(cur[next_place], next_place));
            }
        }
    }

    // å‡ºåŠ›
    for (int i = 1; i <= N; i++) {
        if (cur[i] == INF)
            cout << "-1" << endl;
        else
            cout << cur[i] << endl;
    }

    return 0;
}
```

### B64 - Shortest Path with Restoration

https://atcoder.jp/contests/tessoku-book/tasks/tessoku_book_ek

```cpp
const int INF = 1e9;

int N, M;
int A[100009], B[100009], C[100009];
int cur[100009];
vector<pair<int, int>> Graph[100009];
priority_queue<pair<int, int>, vector<pair<int, int>>, greater<pair<int, int>>> Q;

int main()
{
	// å…¥åŠ›
	cin >> N >> M;
	for (int i = 1; i <= M; i++)
	{
		cin >> A[i] >> B[i] >> C[i]; 
		Graph[A[i]].push_back(make_pair(B[i], C[i]));
		Graph[B[i]].push_back(make_pair(A[i], C[i]));
	}
	//ã€€åˆæœŸå€¤ã®è¨­å®š
	for (int i = 1; i <= N; i++) cur[i] = INF;
	// ã‚¹ã‚¿ãƒ¼ãƒˆ
	cur[1] = 0;
	Q.push(make_pair(cur[1], 1));
	// ãƒ€ã‚¤ã‚¯ã‚¹ãƒˆãƒ©æ³•
	while (!Q.empty())
	{
		pair<int, int> top = Q.top();
		Q.pop();
		int pos = top.second;
		if (cur[pos] == INF) continue;
		for (int i = 0; i < Graph[pos].size(); i++)
		{
			int next_place = Graph[pos][i].first;
			int next_time = Graph[pos][i].second;
			if (cur[next_place] > cur[pos] + next_time)
			{
				cur[next_place] = cur[pos] + next_time;
				Q.push(make_pair(cur[next_place], next_place));
			}
		}
	}
	// çµŒè·¯ã‚’è¨˜æ†¶
	stack<int> path;
	int pos = N;
	path.push(pos);
	while (pos != 1)
	{
		for (int i = 0; i < Graph[pos].size(); i++)
		{
			int next_place = Graph[pos][i].first;
			int next_time = Graph[pos][i].second;
			if (cur[pos] == cur[next_place] + next_time)
			{
				path.push(next_place);
				pos = next_place;
				break;
			}
		}
	}
	// å‡ºåŠ›
	cout << path.top();
	path.pop();
	while (!path.empty())
	{
		cout << " " << path.top();
		path.pop();
	}
	cout << endl;
}
```

## 9.5 æœ¨ã«å¯¾ã™ã‚‹å‹•çš„è¨ˆç”»æ³•
### A65 - Road to Promotion

https://atcoder.jp/contests/tessoku-book/tasks/tessoku_book_bm

```cpp
int N;
int A[100009];
int dp[100009];
vector<int> Graph[100009];

int main()
{
	cin >> N;
	for (int i = 2; i <= N; i++)
	{
		cin >> A[i];
		Graph[A[i]].push_back(i);
	}
	for (int i = N; i > 0; i--)
	{
		dp[i] = 0;
		for (int j = 0; j < Graph[i].size(); j++) dp[i] += (dp[Graph[i][j]] + 1);
	}
	for (int i = 1; i <= N; i++)
	{
		if (i > 1) cout << " ";
		cout << dp[i];
	}
	cout << endl;
	return 0;
}
```

### B65 - Road to Promotion Hard

https://atcoder.jp/contests/tessoku-book/tasks/tessoku_book_el

```cpp
int N, T;
int A[100009];
int B[100009];
int dist[100009];
int dp[100009];
vector<int> Graph[100009];
queue<int> Q;
priority_queue<pair<int, int>> Queue;
bool member[100009];

int main()
{
	// å…¥åŠ›
	cin >> N >> T;
	for (int i = 1; i <= N; i++)
	{
		cin >> A[i] >> B[i];
		Graph[A[i]].push_back(B[i]);
		Graph[B[i]].push_back(A[i]);
		dist[i] = -1;
		dp[i] = -1;
		member[i] = false;
	}
	// å¹…å„ªå…ˆæ¢ç´¢ã§Tã¨ã®è·é›¢distã‚’æ±‚ã‚ã‚‹
	Q.push(T);
	dist[T] = 0;
	Queue.push(make_pair(dist[T], T));
	while(!Q.empty())
	{
		int pos = Q.front();
		Q.pop();
		for (int i = 0; i < Graph[pos].size(); i++)
		{
			int next = Graph[pos][i];
			if (dist[next] == -1)
			{
				dist[next] = dist[pos] + 1;
				Queue.push(make_pair(dist[next], next));
				Q.push(next);
			}
		}
	}
	// å‹•çš„è¨ˆç”»æ³•
	while (!Queue.empty())
	{
		int i = Queue.top().second;
		Queue.pop();
		dp[i] = 0;
		member[i] = true;
		for (int j = 0; j < Graph[i].size(); j++)
		{
			dp[i] = max(dp[i], dp[Graph[i][j]] + 1);
		}
	}
	// å‡ºåŠ›
	for (int i = 1; i <= N; i++)
	{
		if (i > 1) cout << " ";
		cout << dp[i];
	}
	cout << endl;
	return 0;
}
```

## 9.6 Union-Findæœ¨
### A66 - Connect Query

https://atcoder.jp/contests/tessoku-book/tasks/tessoku_book_bn

```cpp
#include <iostream>
#include <vector>

using namespace std;

int N, Q;
int Query[100009], U[100009], V[100009];
int par[100009];
int size_root[100009];

int ft_root(int a)
{
	while(true)
	{
		if (par[a] == -1) break;
		a = par[a];
	}
	return a;
}

void	ft_unite(int u, int v)
{
	int u_root = ft_root(u);
	int v_root = ft_root(v);
	if (u_root == v_root) return;
	if (size_root[u_root] < size_root[v_root])
	{
		par[u_root] = v_root;
		size_root[v_root] += size_root[u_root];
	}
	else
	{
		par[v_root] = u_root;
		size_root[u_root] += size_root[v_root];
	}
}

int main()
{
	// å…¥åŠ›
	cin >> N >> Q;
	for (int i = 1; i <= Q; i++) cin >> Query[i] >> U[i] >> V[i];
	// åˆæœŸåŒ–
	for (int i = 1; i <= N; i++)
	{
		par[i] = -1;
		size_root[i] = 1;
	}
	// ã‚¯ã‚¨ãƒªã®å‡¦ç†
	for (int i = 1; i <= Q; i++)
	{
		if (Query[i] == 1)
		{
			ft_unite(U[i], V[i]);
		}
		if (Query[i] == 2)
		{
			if (ft_root(U[i]) == ft_root(V[i])) cout << "Yes" << endl;
			else cout << "No" << endl;
		}
	}
	return 0;
}
```

### B66 - Typhoon

https://atcoder.jp/contests/tessoku-book/tasks/tessoku_book_em

```cpp
int N, M, Q;
int A[100009], B[100009];
int Query[100009], U[100009], V[100009];
int par[100009];
int size_root[100009];
bool del_station[100009];
stack<bool> ans;

int ft_root(int a)
{
	while(true)
	{
		if (par[a] == -1) break;
		a = par[a];
	}
	return a;
}

void	ft_unite(int u, int v)
{
	int u_root = ft_root(u);
	int v_root = ft_root(v);
	if (u_root == v_root) return;
	if (size_root[u_root] < size_root[v_root])
	{
		par[u_root] = v_root;
		size_root[v_root] += size_root[u_root];
	}
	else
	{
		par[v_root] = u_root;
		size_root[u_root] += size_root[v_root];
	}
}

int main()
{
	// å…¥åŠ›
	cin >> N >> M;
	for (int i = 1; i <= M; i++) cin >> A[i] >> B[i];
	for (int i = 1; i <= N; i++) del_station[i] = false;
	cin >> Q;
	for (int i = 1; i <= Q; i++)
	{
		cin >> Query[i] >> U[i];
		if (Query[i] == 2) cin >> V[i];
		if (Query[i] == 1) del_station[U[i]] = true;
	}
	// åˆæœŸåŒ–
	for (int i = 1; i <= N; i++)
	{
		par[i] = -1;
		size_root[i] = 1;
	}
	// å‰Šé™¤ã•ã‚Œãªã„è·¯ç·šã‚’è¿½åŠ 
	for (int i = 1; i <= M; i++)
	{
		if (del_station[i] ==  false) ft_unite(A[i], B[i]);
	}
	// ã‚¯ã‚¨ãƒªã®å‡¦ç†
	for (int i = Q; i > 0; i--)
	{
		if (Query[i] == 1)
		{
			ft_unite(A[U[i]], B[U[i]]);
		}
		if (Query[i] == 2)
		{
			if (ft_root(U[i]) == ft_root(V[i])) ans.push(true);
			else ans.push(false);
		}
	}
	while (!ans.empty())
	{
		if (ans.top() == true) cout << "Yes" << endl;
		else cout << "No" << endl;
		ans.pop();
	}
	return 0;
}
```
## 9.7 æœ€å°å…¨åŸŸæœ¨å•é¡Œ

### A67 - MST (Minimum Spanning Tree)

https://atcoder.jp/contests/tessoku-book/tasks/tessoku_book_bo

```cpp
int N, M;
int A[100009];
int B[100009];
int C[100009];
int par[100009];
int size_root[100009];
vector<pair<int, int>> sides;

void	ft_init()
{
	for (int i = 1; i <= N; i++) par[i] = -1;
	for (int i = 1; i <= N; i++) size_root[i] = 1;
}

int ft_root(int a)
{
	while(true)
	{
		if (par[a] == -1) break;
		a = par[a];
	}
	return a;
}

void	ft_unite(int u, int v)
{
	int u_root = ft_root(u);
	int v_root = ft_root(v);
	if (u_root == v_root) return;
	if (size_root[u_root] < size_root[v_root])
	{
		par[u_root] = v_root;
		size_root[v_root] += size_root[u_root];
	}
	else
	{
		par[v_root] = u_root;
		size_root[u_root] += size_root[v_root];
	}
}

int main()
{
	cin >> N >> M;
	for (int i = 1; i <= M; i++)
	{
		cin >> A[i] >> B[i] >> C[i];
		sides.push_back(make_pair(C[i], i));
	}
	// è¾ºãŒçŸ­ã„é †ç•ªã«ã‚½ãƒ¼ãƒˆ
	sort(sides.begin(), sides.end());
	// Union-find
	int total_len = 0;
	ft_init();
	for (int i = 0; i < sides.size(); i++)
	{
		int side = sides[i].second;
		if (ft_root(A[side]) != ft_root(B[side]))
		{
			ft_unite(A[side], B[side]);
			total_len += C[side];
		}
	}
	cout << total_len << endl;
	return 0;
}
```

### B67 - Max MST

A67ã®ã‚½ãƒ¼ãƒˆã‚’æ˜‡é †ã‹ã‚‰é™é †ã«å¤‰æ›´ã™ã‚‹ã ã‘ã€‚

https://atcoder.jp/contests/tessoku-book/tasks/tessoku_book_en

```cpp
int N, M;
int A[100009];
int B[100009];
int C[100009];
int par[100009];
int size_root[100009];
vector<pair<int, int>> sides;

void	ft_init()
{
	for (int i = 1; i <= N; i++) par[i] = -1;
	for (int i = 1; i <= N; i++) size_root[i] = 1;
}

int ft_root(int a)
{
	while(true)
	{
		if (par[a] == -1) break;
		a = par[a];
	}
	return a;
}

void	ft_unite(int u, int v)
{
	int u_root = ft_root(u);
	int v_root = ft_root(v);
	if (u_root == v_root) return;
	if (size_root[u_root] < size_root[v_root])
	{
		par[u_root] = v_root;
		size_root[v_root] += size_root[u_root];
	}
	else
	{
		par[v_root] = u_root;
		size_root[u_root] += size_root[v_root];
	}
}

int main()
{
	cin >> N >> M;
	for (int i = 1; i <= M; i++)
	{
		cin >> A[i] >> B[i] >> C[i];
		sides.push_back(make_pair(C[i], i));
	}
	// è¾ºãŒé•·ã„é †ç•ªã«ã‚½ãƒ¼ãƒˆ
	sort(sides.begin(), sides.end(), greater<pair<int, int>>());
	// Union-find
	int total_len = 0;
	ft_init();
	for (int i = 0; i < sides.size(); i++)
	{
		int side = sides[i].second;
		if (ft_root(A[side]) != ft_root(B[side]))
		{
			ft_unite(A[side], B[side]);
			total_len += C[side];
		}
	}
	cout << total_len << endl;
	return 0;
}
```

## 9.8 æœ€å¤§ãƒ•ãƒ­ãƒ¼å•é¡Œ
### A68 - Maximum Flow

Ford-Fulkersonæ³•ã‚’ç”¨ã„ã¦æœ€å¤§ãƒ•ãƒ­ãƒ¼ã‚’æ±‚ã‚ã‚‹å•é¡Œã€‚

https://qiita.com/0xkei10/items/10253708affb6baf76de

https://atcoder.jp/contests/tessoku-book/tasks/tessoku_book_bp

```cpp
#include <iostream>
#include <vector>
#include <algorithm>

using namespace std;

struct Edge{
	int to;
	int cap;
	int rev;
};

class MaximumFlow{
public:
	int size_ = 0;
	bool used[409];
	vector<Edge> Graph[409];

	// é ‚ç‚¹Nå€‹ã®æ®‹ä½™ã‚°ãƒ©ãƒ•ã®ä½œæˆo
	void	ft_init(int N)
	{
		size_ = N;
		for (int i = 0; i <= size_; i++) Graph[i].clear();
	}

	// é ‚ç‚¹aã‹ã‚‰bã«å‘ã‹ã†ã€ä¸Šé™c L/sã®è¾ºã‚’è¿½åŠ 
	void	ft_add_edge(int a, int b, int c)
	{
		int Current_size_a = Graph[a].size();
		int Current_size_b = Graph[b].size();
		Graph[a].push_back(Edge{b, c, Current_size_b});
		Graph[b].push_back(Edge{a, 0, Current_size_a});
	}

	// æ·±ã•å„ªå…ˆæ¢ç´¢
	// Fã¯ã‚¹ã‚¿ãƒ¼ãƒˆã‹ã‚‰posã«é”ã™ã‚‹ã¾ã§ã®æ®‹ä½™ã‚°ãƒ©ãƒ•ã®è¾ºã®è¦é ˜ã®æœ€å¤§å€¤
	// è¿”ã‚Šå€¤ã¯æµã—ãŸãƒ•ãƒ­ãƒ¼ã®å€¤ï¼ˆæµã›ãªã„å ´åˆã¯0ï¼‰
	int dfs(int pos, int goal, int F)
	{
		// ã‚´ãƒ¼ãƒ«ã«åˆ°é”ï¼šãƒ•ãƒ­ãƒ¼ã‚’æµã›ã‚‹ï¼
		if (pos == goal) return F;
		used[pos] = true;
		for (int i = 0; i < Graph[pos].size(); i++)
		{
			// å®¹é‡0ã®è¾ºã¯ä½¿ãˆãªã„
			if (Graph[pos][i].cap == 0) continue;
			// ã™ã§ã«è¨ªå•ã—ãŸé ‚ç‚¹ã«è¡Œã£ã¦ã‚‚æ„å‘³ãŒãªã„
			if (used[Graph[pos][i].to] == true) continue;
			// ç›®çš„åœ°ã¾ã§ã®ãƒ‘ã‚¹ã‚’æ¢ã™
			int flow = dfs(Graph[pos][i].to, goal, min(F, Graph[pos][i].cap));
			// ãƒ•ãƒ­ãƒ¼ã‚’æµã›ã‚‹å ´åˆã€æ®‹ä½™ã‚°ãƒ©ãƒ•ã®å®¹é‡ã‚’Flowã ã‘å¢—æ¸›ã•ã›ã‚‹
			if (flow >= 1)
			{
				Graph[pos][i].cap -= flow;
				Graph[Graph[pos][i].to][Graph[pos][i].rev].cap += flow;
				return flow;
			}
		}
		// å…¨ã¦ã®è¾ºã‚’æ¢ç´¢ã—ã¦ã‚‚è¦‹ã¤ã‹ã‚‰ãªã‹ã£ãŸå ´åˆ
		return 0;
	}

	// é ‚ç‚¹sã‹ã‚‰é ‚ç‚¹tã¾ã§ã®æœ€å¤§ãƒ•ãƒ­ãƒ¼ã®ç·æµé‡ã‚’æµã™
	int max_flow(int s, int t)
	{
		int total_flow = 0;
		while (true)
		{
			for (int i = 0; i <= size_; i++) used[i] = false;
			int F = dfs(s, t, 1000000000);

			// ãƒ•ãƒ­ãƒ¼ã‚’æµã›ãªããªã£ãŸã‚‰æ“ä½œçµ‚äº†
			if (F == 0) break;
			total_flow += F;
		}
		return total_flow;
	}
};

int N, M;
int A[409];
int B[409];
int C[409];
MaximumFlow Z;

int main()
{
	cin >> N >> M;
	for (int i = 1; i <= M; i++) cin >> A[i] >> B[i] >> C[i];

	// è¾ºã‚’è¿½åŠ 
	Z.ft_init(N);

	for (int i = 1; i <= M; i++) Z.ft_add_edge(A[i], B[i], C[i]);

	// å‡ºåŠ›
	cout << Z.max_flow(1, N) << endl;
	return 0;
}
```

### B68 - ALGO Express

ã“ã®å•é¡Œã¯3æ™‚é–“ãã‚‰ã„ç†è§£ã«ã‹ã‹ã£ãŸã€‚
ã€Œç‡ƒã‚„ã™åŸ‹ã‚ã‚‹å•é¡Œã€ã¨ã„ã†å•é¡Œã¨åŒå€¤ã‚‰ã—ã„ã€‚

https://atcoder.jp/contests/tessoku-book/tasks/tessoku_book_eo

https://koyumeishi.hatenablog.com/entry/2021/01/14/052223


ã“ã®zennã®è¨˜äº‹ã¯æœ€å¤§ãƒ•ãƒ­ãƒ¼ãƒ»æœ€å°ã‚«ãƒƒãƒˆå•é¡Œã‹ã‚‰ä¸å¯§ã«èª¬æ˜ã•ã‚Œã¦ã„ã‚‹ã€‚

https://zenn.dev/kiwamachan/articles/37a2c646f82c7d

```cpp
struct Edge{
	int to;		// è¡Œãå…ˆ
	int cap;	// å®¹é‡
	int rev;	// é€†è¾ºã®ä½ç½®
};

class MaximumFlow{
public:
	int size_ = 0;
	bool used[409];
	vector<Edge> Graph[409];

	// é ‚ç‚¹Nå€‹ã®æ®‹ä½™ã‚°ãƒ©ãƒ•ã®ä½œæˆ
	// clear()ã§ã™ã¹ã¦ã®è¦ç´ ã‚’å‰Šé™¤ï¼ˆåˆæœŸåŒ–ï¼‰
	void	ft_init(int N)
	{
		size_ = N;
		for (int i = 0; i <= size_; i++) Graph[i].clear();
	}

	// é ‚ç‚¹aã‹ã‚‰bã«å‘ã‹ã†ã€ä¸Šé™c L/sã®è¾ºã‚’è¿½åŠ 
	void	ft_add_edge(int a, int b, int c)
	{
		int Current_size_a = Graph[a].size();
		int Current_size_b = Graph[b].size();
		Graph[a].push_back(Edge{b, c, Current_size_b});	// å‘ã‹ã„ã®è¾ºã®ä½ç½®ã¯ç¾çŠ¶ã®è¾ºã®æ ¼ç´æ•°ã«ä¾å­˜ã™ã‚‹
		Graph[b].push_back(Edge{a, 0, Current_size_a});	// é€†æ–¹å‘ã«ã¯æµé‡0ã§è¨­å®š
	}

	// æ·±ã•å„ªå…ˆæ¢ç´¢ï¼ˆdeep first searchï¼‰ã€å†å¸°é–¢æ•°ã§ã‚‚ã‚ã‚‹
	// è¿”ã‚Šå€¤ã¯æµã—ãŸãƒ•ãƒ­ãƒ¼ã®å€¤ï¼ˆæµã›ãªã„å ´åˆã¯0ï¼‰
	int dfs(int pos, int goal, int F)	// Fã¯ã‚¹ã‚¿ãƒ¼ãƒˆã‹ã‚‰posã«é”ã™ã‚‹ã¾ã§ã®ã€Œæ®‹ä½™ã‚°ãƒ©ãƒ•ã®è¾ºã®å®¹é‡ã€ã®æœ€å¤§å€¤
	{	
		if (pos == goal) return F;	// ã‚´ãƒ¼ãƒ«ã«åˆ°é”ï¼šãƒ•ãƒ­ãƒ¼ã‚’æµã›ã‚‹ï¼
		used[pos] = true;
		for (int i = 0; i < Graph[pos].size(); i++)	// ç¾åœ¨ä½ç½®(pos)ã‹ã‚‰å‡ºã¦ã„ã‚‹è¾ºã®æ•°ã ã‘æ¢ç´¢
		{
			if (Graph[pos][i].cap == 0) continue;								// å®¹é‡0ã®è¾ºã¯ä½¿ãˆãªã„
			if (used[Graph[pos][i].to] == true) continue;						// ã™ã§ã«è¨ªå•ã—ãŸé ‚ç‚¹ã«è¡Œã£ã¦ã‚‚æ„å‘³ãŒãªã„
			int flow = dfs(Graph[pos][i].to, goal, min(F, Graph[pos][i].cap));	// ç›®çš„åœ°ã¾ã§ã®ãƒ‘ã‚¹ã‚’æ¢ã™ï¼ˆæ¬¡ã®è¡Œãå…ˆã€ã‚´ãƒ¼ãƒ«ã€æœ€å°å®¹é‡ã®æ›´æ–°ï¼‰
			if (flow >= 1)														// ãƒ•ãƒ­ãƒ¼ã‚’æµã›ã‚‹å ´åˆã€æ®‹ä½™ã‚°ãƒ©ãƒ•ã®å®¹é‡ã‚’Flowã ã‘å¢—æ¸›ã•ã›ã‚‹
			{
				Graph[pos][i].cap -= flow;
				Graph[Graph[pos][i].to][Graph[pos][i].rev].cap += flow;
				return flow;
			}
		}
		// å…¨ã¦ã®è¾ºã‚’æ¢ç´¢ã—ã¦ã‚‚è¦‹ã¤ã‹ã‚‰ãªã‹ã£ãŸå ´åˆ
		return 0;
	}

	// é ‚ç‚¹sã‹ã‚‰é ‚ç‚¹tã¾ã§ã®æœ€å¤§ãƒ•ãƒ­ãƒ¼ã®ç·æµé‡ã‚’æµã™
	int max_flow(int s, int t)
	{
		int total_flow = 0;
		while (true)
		{
			for (int i = 0; i <= size_; i++) used[i] = false;	// ã™ã¹ã¦ã®å ´æ‰€ã‚’æœªè¨ªå•ã«ã™ã‚‹
			int F = dfs(s, t, 1000000000);
			// ãƒ•ãƒ­ãƒ¼ã‚’æµã›ãªããªã£ãŸã‚‰æ“ä½œçµ‚äº†
			if (F == 0) break;
			total_flow += F;
		}
		return total_flow;
	}
};

int N, M;
int A[409];
int B[409];
int P[409];
MaximumFlow Z;
int total_profit;

int main()
{
	cin >> N >> M;
	total_profit = 150 * N; // æœ€å¤§ã®åˆ©ç›ŠãŒã¨ã‚ŒãŸã¨ä»®å®š
	
	for (int i = 1; i <= N; i++) cin >> P[i];
	for (int i = 1; i <= M; i++) cin >> A[i] >> B[i];

	// Nå€‹ã®é ‚ç‚¹ã‚’æº–å‚™ï¼ˆã‚¹ã‚¿ãƒ¼ãƒˆã‚’N+1, ã‚´ãƒ¼ãƒ«ã‚’N+2ã¨ã—ã¦é ‚ç‚¹ã‚’è¿½åŠ ï¼‰
	Z.ft_init(N + 2);
	// Mæœ¬ã®è¾ºã‚’è¿½åŠ 
	for (int i = 1; i <= N; i++) Z.ft_add_edge(N + 1, i, 150 - P[i]);	// ã‚¹ã‚¿ãƒ¼ãƒˆã‹ã‚‰ã¯ã€Œé¸ã¶ã€ã‚³ã‚¹ãƒˆã‚’è¿½åŠ 
	for (int i = 1; i <= N; i++) Z.ft_add_edge(i, N + 2, 150);		// ã‚´ãƒ¼ãƒ«ã¸ã¯ã€Œé¸ã°ãªã„ã€ã‚³ã‚¹ãƒˆã‚’è¿½åŠ 
	for (int i = 1; i <= M; i++) Z.ft_add_edge(B[i], A[i], 2000000);	// A[i]ã‚’é¸ã‚“ã ã®ã«B[i]ã‚’é¸ã°ãªã‹ã£ãŸã‚‰ç½°é‡‘ã¨ã—ã¦200ãƒã‚¤ãƒ³ãŠ

	// å‡ºåŠ›
	total_profit -= Z.max_flow(N + 1, N + 2);
	if (total_profit < 0) cout << 0 << endl;
	else cout << total_profit << endl;
	return 0;
}
```

## 9.9 äºŒéƒ¨ãƒãƒƒãƒãƒ³ã‚°å•é¡Œ
### A69 - Bipartite Matching

https://atcoder.jp/contests/tessoku-book/tasks/tessoku_book_bq


```cpp
struct Edge{
	int to;		// è¡Œãå…ˆ
	int cap;	// å®¹é‡
	int rev;	// é€†è¾ºã®ä½ç½®
};

class MaximumFlow{
public:
	int size_ = 0;
	bool used[409];
	vector<Edge> Graph[409];

	// é ‚ç‚¹Nå€‹ã®æ®‹ä½™ã‚°ãƒ©ãƒ•ã®ä½œæˆ
	// clear()ã§ã™ã¹ã¦ã®è¦ç´ ã‚’å‰Šé™¤ï¼ˆåˆæœŸåŒ–ï¼‰
	void	ft_init(int N)
	{
		size_ = N;
		for (int i = 0; i <= size_; i++) Graph[i].clear();
	}

	// é ‚ç‚¹aã‹ã‚‰bã«å‘ã‹ã†ã€ä¸Šé™c L/sã®è¾ºã‚’è¿½åŠ 
	void	ft_add_edge(int a, int b, int c)
	{
		int Current_size_a = Graph[a].size();
		int Current_size_b = Graph[b].size();
		Graph[a].push_back(Edge{b, c, Current_size_b});	// å‘ã‹ã„ã®è¾ºã®ä½ç½®ã¯ç¾çŠ¶ã®è¾ºã®æ ¼ç´æ•°ã«ä¾å­˜ã™ã‚‹
		Graph[b].push_back(Edge{a, 0, Current_size_a});	// é€†æ–¹å‘ã«ã¯æµé‡0ã§è¨­å®š
	}

	// æ·±ã•å„ªå…ˆæ¢ç´¢ï¼ˆdeep first searchï¼‰ã€å†å¸°é–¢æ•°ã§ã‚‚ã‚ã‚‹
	// è¿”ã‚Šå€¤ã¯æµã—ãŸãƒ•ãƒ­ãƒ¼ã®å€¤ï¼ˆæµã›ãªã„å ´åˆã¯0ï¼‰
	int dfs(int pos, int goal, int F)	// Fã¯ã‚¹ã‚¿ãƒ¼ãƒˆã‹ã‚‰posã«é”ã™ã‚‹ã¾ã§ã®ã€Œæ®‹ä½™ã‚°ãƒ©ãƒ•ã®è¾ºã®å®¹é‡ã€ã®æœ€å¤§å€¤
	{	
		if (pos == goal) return F;	// ã‚´ãƒ¼ãƒ«ã«åˆ°é”ï¼šãƒ•ãƒ­ãƒ¼ã‚’æµã›ã‚‹ï¼
		used[pos] = true;
		for (int i = 0; i < Graph[pos].size(); i++)	// ç¾åœ¨ä½ç½®(pos)ã‹ã‚‰å‡ºã¦ã„ã‚‹è¾ºã®æ•°ã ã‘æ¢ç´¢
		{
			if (Graph[pos][i].cap == 0) continue;								// å®¹é‡0ã®è¾ºã¯ä½¿ãˆãªã„
			if (used[Graph[pos][i].to] == true) continue;						// ã™ã§ã«è¨ªå•ã—ãŸé ‚ç‚¹ã«è¡Œã£ã¦ã‚‚æ„å‘³ãŒãªã„
			int flow = dfs(Graph[pos][i].to, goal, min(F, Graph[pos][i].cap));	// ç›®çš„åœ°ã¾ã§ã®ãƒ‘ã‚¹ã‚’æ¢ã™ï¼ˆæ¬¡ã®è¡Œãå…ˆã€ã‚´ãƒ¼ãƒ«ã€æœ€å°å®¹é‡ã®æ›´æ–°ï¼‰
			if (flow >= 1)														// ãƒ•ãƒ­ãƒ¼ã‚’æµã›ã‚‹å ´åˆã€æ®‹ä½™ã‚°ãƒ©ãƒ•ã®å®¹é‡ã‚’Flowã ã‘å¢—æ¸›ã•ã›ã‚‹
			{
				Graph[pos][i].cap -= flow;
				Graph[Graph[pos][i].to][Graph[pos][i].rev].cap += flow;
				return flow;
			}
		}
		// å…¨ã¦ã®è¾ºã‚’æ¢ç´¢ã—ã¦ã‚‚è¦‹ã¤ã‹ã‚‰ãªã‹ã£ãŸå ´åˆ
		return 0;
	}

	// é ‚ç‚¹sã‹ã‚‰é ‚ç‚¹tã¾ã§ã®æœ€å¤§ãƒ•ãƒ­ãƒ¼ã®ç·æµé‡ã‚’æµã™
	int max_flow(int s, int t)
	{
		int total_flow = 0;
		while (true)
		{
			for (int i = 0; i <= size_; i++) used[i] = false;	// ã™ã¹ã¦ã®å ´æ‰€ã‚’æœªè¨ªå•ã«ã™ã‚‹
			int F = dfs(s, t, 1000000000);
			// ãƒ•ãƒ­ãƒ¼ã‚’æµã›ãªããªã£ãŸã‚‰æ“ä½œçµ‚äº†
			if (F == 0) break;
			total_flow += F;
		}
		return total_flow;
	}
};

int		N;
char	C[159][159];
MaximumFlow Z;

int main()
{
	cin >> N;
	for (int i = 1; i <= N; i++)
	{
		for (int j = 1; j <= N; j++) cin >> C[i][j];
	}
	// é ‚ç‚¹ã‚’æº–å‚™
	Z.ft_init(N * 2 + 2);
	for (int i = 1; i <= N; i++)
	{
		for (int j = 1; j <= N; j++)
		{
			if (C[i][j] == '#') Z.ft_add_edge(i, N + j, 1);
		}
	}
	for (int i = 1; i <= N; i++)
	{
		Z.ft_add_edge(N * 2 + 1, i, 1);
		Z.ft_add_edge(N + i, N * 2 + 2, 1);
	}
	// å‡ºåŠ›
	cout << Z.max_flow(N * 2 + 1, N * 2 + 2) << endl;
	return 0;
}
```

### B69 - Black Company 2

https://atcoder.jp/contests/tessoku-book/tasks/tessoku_book_ep

```cpp
#include <iostream>
#include <vector>
#include <algorithm>

using namespace std;

struct Edge{
	int to;		// è¡Œãå…ˆ
	int cap;	// å®¹é‡
	int rev;	// é€†è¾ºã®ä½ç½®
};

class MaximumFlow{
public:
	int size_ = 0;
	bool used[409];
	vector<Edge> Graph[409];

	// é ‚ç‚¹Nå€‹ã®æ®‹ä½™ã‚°ãƒ©ãƒ•ã®ä½œæˆ
	// clear()ã§ã™ã¹ã¦ã®è¦ç´ ã‚’å‰Šé™¤ï¼ˆåˆæœŸåŒ–ï¼‰
	void	ft_init(int N)
	{
		size_ = N;
		for (int i = 0; i <= size_; i++) Graph[i].clear();
	}

	// é ‚ç‚¹aã‹ã‚‰bã«å‘ã‹ã†ã€ä¸Šé™c L/sã®è¾ºã‚’è¿½åŠ 
	void	ft_add_edge(int a, int b, int c)
	{
		int Current_size_a = Graph[a].size();
		int Current_size_b = Graph[b].size();
		Graph[a].push_back(Edge{b, c, Current_size_b});	// å‘ã‹ã„ã®è¾ºã®ä½ç½®ã¯ç¾çŠ¶ã®è¾ºã®æ ¼ç´æ•°ã«ä¾å­˜ã™ã‚‹
		Graph[b].push_back(Edge{a, 0, Current_size_a});	// é€†æ–¹å‘ã«ã¯æµé‡0ã§è¨­å®š
	}

	// æ·±ã•å„ªå…ˆæ¢ç´¢ï¼ˆdeep first searchï¼‰ã€å†å¸°é–¢æ•°ã§ã‚‚ã‚ã‚‹
	// è¿”ã‚Šå€¤ã¯æµã—ãŸãƒ•ãƒ­ãƒ¼ã®å€¤ï¼ˆæµã›ãªã„å ´åˆã¯0ï¼‰
	int dfs(int pos, int goal, int F)	// Fã¯ã‚¹ã‚¿ãƒ¼ãƒˆã‹ã‚‰posã«é”ã™ã‚‹ã¾ã§ã®ã€Œæ®‹ä½™ã‚°ãƒ©ãƒ•ã®è¾ºã®å®¹é‡ã€ã®æœ€å¤§å€¤
	{	
		if (pos == goal) return F;	// ã‚´ãƒ¼ãƒ«ã«åˆ°é”ï¼šãƒ•ãƒ­ãƒ¼ã‚’æµã›ã‚‹ï¼
		used[pos] = true;
		for (int i = 0; i < Graph[pos].size(); i++)	// ç¾åœ¨ä½ç½®(pos)ã‹ã‚‰å‡ºã¦ã„ã‚‹è¾ºã®æ•°ã ã‘æ¢ç´¢
		{
			if (Graph[pos][i].cap == 0) continue;								// å®¹é‡0ã®è¾ºã¯ä½¿ãˆãªã„
			if (used[Graph[pos][i].to] == true) continue;						// ã™ã§ã«è¨ªå•ã—ãŸé ‚ç‚¹ã«è¡Œã£ã¦ã‚‚æ„å‘³ãŒãªã„
			int flow = dfs(Graph[pos][i].to, goal, min(F, Graph[pos][i].cap));	// ç›®çš„åœ°ã¾ã§ã®ãƒ‘ã‚¹ã‚’æ¢ã™ï¼ˆæ¬¡ã®è¡Œãå…ˆã€ã‚´ãƒ¼ãƒ«ã€æœ€å°å®¹é‡ã®æ›´æ–°ï¼‰
			if (flow >= 1)														// ãƒ•ãƒ­ãƒ¼ã‚’æµã›ã‚‹å ´åˆã€æ®‹ä½™ã‚°ãƒ©ãƒ•ã®å®¹é‡ã‚’Flowã ã‘å¢—æ¸›ã•ã›ã‚‹
			{
				Graph[pos][i].cap -= flow;
				Graph[Graph[pos][i].to][Graph[pos][i].rev].cap += flow;
				return flow;
			}
		}
		// å…¨ã¦ã®è¾ºã‚’æ¢ç´¢ã—ã¦ã‚‚è¦‹ã¤ã‹ã‚‰ãªã‹ã£ãŸå ´åˆ
		return 0;
	}

	// é ‚ç‚¹sã‹ã‚‰é ‚ç‚¹tã¾ã§ã®æœ€å¤§ãƒ•ãƒ­ãƒ¼ã®ç·æµé‡ã‚’æµã™
	int max_flow(int s, int t)
	{
		int total_flow = 0;
		while (true)
		{
			for (int i = 0; i <= size_; i++) used[i] = false;	// ã™ã¹ã¦ã®å ´æ‰€ã‚’æœªè¨ªå•ã«ã™ã‚‹
			int F = dfs(s, t, 1000000000);
			// ãƒ•ãƒ­ãƒ¼ã‚’æµã›ãªããªã£ãŸã‚‰æ“ä½œçµ‚äº†
			if (F == 0) break;
			total_flow += F;
		}
		return total_flow;
	}
};

int		N, M;
char	C[159][25];
MaximumFlow Z;

int main()
{
	cin >> N >> M;
	for (int i = 1; i <= N; i++)
	{
		for (int j = 0; j <= 23; j++) cin >> C[i][j];
	}
	// é ‚ç‚¹ã‚’æº–å‚™
	Z.ft_init(N + 26);
	for (int i = 1; i <= N; i++)
	{
		for (int j = 0; j <= 23; j++)
		{
			if (C[i][j] == '1') Z.ft_add_edge(i, N + j + 1, 1);
		}
	}
	for (int i = 1; i <= N; i++) Z.ft_add_edge(N + 25, i, 10);
	for (int i = 1; i <= 24; i++) Z.ft_add_edge(N + i, N + 26, M);
	// å‡ºåŠ›
	if (Z.max_flow(N + 25, N +26) == M * 24) cout << "Yes" << endl;
	else cout << "No" << endl;
	return 0;
}
```

## 9.10 ãƒãƒ£ãƒ¬ãƒ³ã‚¸å•é¡Œ

### A70 - Lanterns

https://atcoder.jp/contests/tessoku-book/tasks/tessoku_book_br

```cpp
int N, M;
int A[19];
int X[109];
int Y[109];
int Z[109];
int dist[1029];
vector<int> Graph[1029];

int	ft_get_next(int pos, int idx)
{
	int lanterns[19];
	// 10é€²æ•°ã‹ã‚‰ãƒ©ãƒ³ã‚¿ãƒ³ã®æƒ…å ±ã‚’å–å¾—
	for (int i = 1; i <= N; i++) lanterns[i] = (pos >> (i - 1)) & 1;
	// ï¼“ã¤ã®ãƒ©ãƒ³ã‚¿ãƒ³ã®çŠ¶æ…‹ã‚’åè»¢
	lanterns[X[idx]] = 1 - lanterns[X[idx]];
	lanterns[Y[idx]] = 1 - lanterns[Y[idx]];
	lanterns[Z[idx]] = 1 - lanterns[Z[idx]];
	// ãƒ©ãƒ³ã‚¿ãƒ³ã®æƒ…å ±ã‚’10é€²æ•°ã«æˆ»ã™
	int ret = 0;
	for (int i = 1; i <= N; i++)
	{
		if (lanterns[i] == 1) ret += (1 << (i - 1));
	}
	return ret;
}

int main()
{
	// å…¥åŠ›
	cin >> N >> M;
	for (int i = 1; i <= N; i++) cin >> A[i];
	for (int i = 1; i <= M; i++) cin >> X[i] >> Y[i] >> Z[i];
	
	// ã‚°ãƒ©ãƒ•ã«è¾ºã‚’è¿½åŠ 
	// max(i << N)å€‹ã®çŠ¶æ…‹ã€Må€‹ã®çŠ¶æ…‹å¤‰æ›´ã®é¸æŠè‚¢
	for (int i = 0; i < (1 << N); i++)
	{
		for (int j = 1; j <= M; j++) Graph[i].push_back(ft_get_next(i ,j));
	}

	// ã‚¹ã‚¿ãƒ¼ãƒˆåœ°ç‚¹ã¨ã‚´ãƒ¼ãƒ«åœ°ç‚¹ã‚’æ±ºã‚ã‚‹
	int start = 0;
	// åˆæœŸçŠ¶æ…‹ã®ã‚»ãƒƒãƒˆ
	for (int i = 1; i <= N; i++)
	{
		if (A[i] == 1) start += (1 << (i - 1));
	}
	int goal = (1 << N) - 1;

	// é…åˆ—ã®åˆæœŸåŒ–ãƒ»ã‚¹ã‚¿ãƒ¼ãƒˆåœ°ç‚¹ã‚’ã‚­ãƒ¥ãƒ¼ã«å…¥ã‚Œã‚‹
	queue<int> Q;
	for (int i = 0; i < (1 << N); i++) dist[i] = -1;
	dist[start] = 0;
	Q.push(start);

	// å¹…å„ªå…ˆæ¢ç´¢
	while (!Q.empty())
	{
		int pos = Q.front();
		Q.pop();
		for (int i = 0; i < Graph[pos].size(); i++)
		{
			int next_place = Graph[pos][i];
			if (dist[next_place] == -1)
			{
				dist[next_place] = dist[pos] + 1;
				Q.push(next_place);
			}
		}
	}

	//å‡ºåŠ›
	cout << dist[goal] << endl;
	return 0;
}
```
## ã‚³ãƒ©ãƒ 6 Bellman-Fordæ³•
## ã‚³ãƒ©ãƒ 7 Warshall-Floydæ³•

# 10ç«  ç·åˆå•é¡Œ
## 10.1 ç·åˆå•é¡Œ(1)
### A71 - Homework

ã¤ã„ã«ç·åˆå•é¡Œçªå…¥ã€‚
æœ€åˆã®å•é¡Œã¯ã€å¤ä¼‘ã¿Næ—¥ã®é–“ã«1æ—¥1ã¤èª²é¡Œã‚’ã“ãªã—ã¦ã„ããŒã€å®¿é¡Œã®é›£æ˜“åº¦ã¨æ°—æ¸©ã®ç©ã ã‘åŠ´åŠ›ãŒã‹ã‹ã‚‹ã€‚å¿…è¦æœ€å°é™ã®åŠ´åŠ›ã¯ã„ãã¤ã‹ã€ã¨ã„ã†ã‚‚ã®ã€‚

ã‚ˆãã‚ˆãè€ƒãˆã‚Œã°ã€é«˜ã„é›£æ˜“åº¦ã®å®¿é¡Œã»ã©æ°—æ¸©ãŒä½ã„æ™‚ã«ã‚„ã£ãŸæ–¹ãŒã„ã„ã€‚
ã¨ã„ã†ã“ã¨ã§å®¿é¡Œã¯æ˜‡é †ã€æ°—æ¸©ã¯é™é †ã§ã‚½ãƒ¼ãƒˆã—ã¦ã‹ã‚‰ãã‚Œãã‚Œã®è¦ç´ åŒå£«ã®ç©ã®å’Œã‚’å–ã£ãŸã‚‚ã®ãŒæœ€å°ã®åŠ´åŠ›ã«ãªã‚‹ã€‚

https://atcoder.jp/contests/tessoku-book/tasks/tessoku_book_bs

```cpp
int N;

int main()
{
	cin >> N;
	vector<int> A(N);
	vector<int> B(N);
	for (int i = 0; i < N; i++) cin >> A[i];
	for (int i = 0; i < N; i++) cin >> B[i];
	sort(A.begin(), A.end());
	sort(B.begin(), B.end());
	reverse(B.begin(), B.end());
	int total = 0;
	for (int i = 0; i < N; i++) total += A[i] * B[i];
	cout << total << endl;
	return 0;
}
```

## 10.2 ç·åˆå•é¡Œ(2)
### A72 - Tile Painting

H*Wã®ã‚¿ã‚¤ãƒ«ã®ãƒã‚¹ãŒé»’ã¨ç™½ã§å¡—ã‚Šåˆ†ã‘ã‚‰ã‚Œã¦ã„ã‚‹ã€‚

ç‰¹å®šã®åˆ—ã‹è¡Œã‚’é¸ã³ã€å…¨ã¦é»’ã§å¡—ã‚‹æ“ä½œã‚’Kå›è¡Œãˆã‚‹æ™‚ã€æœ€å¤§ã§ã„ãã¤ã®ãƒã‚¹ã‚’é»’ãã™ã‚‹ã“ã¨ãŒã§ãã‚‹ã‹ã€‚

https://atcoder.jp/contests/tessoku-book/tasks/tessoku_book_bt

```cpp
int H, W, K;
char tile[19][109];
char tile_test[19][109];

int	ft_score()
{
	int score = 0;
	for (int i = 1; i <= H; i++)
	{
		for (int j = 1; j <= W; j++)
		{
			if (tile_test[i][j] == '#') score++;
		}
	}
	return score;
}

void ft_paint_column(int remainig_steps)
{
	vector<pair<int, int>> columns;
	for (int j = 1; j <= W; j++)
	{
		int count = 0;
		for (int i = 1; i <= H; i++)
		{
			if (tile_test[i][j] == '.') count++;
		}
		columns.push_back(make_pair(count, j));
	}
	sort(columns.begin(), columns.end());
	reverse(columns.begin(), columns.end());
	// ä½™ã£ã¦ã„ã‚‹å›æ•°åˆ†ã€ç™½ãŒå¤šã„åˆ—ã‹ã‚‰å¡—ã£ã¦ã„ã
	for (int k = 0; k < remainig_steps && k < W; k++)
	{
		for (int i = 1; i <= H; i++) tile_test[i][columns[k].second] = '#';
	}
}

int main()
{
	// å…¥åŠ›
	cin >> H >> W >> K;
	for (int i = 1; i <= H; i++)
	{
		for (int j = 1; j <= W; j++) cin >> tile[i][j];
	}
	// åˆ—ã®å…¨æ¢ç´¢
	int ans = 0;
	for (int i = 0; i < (1 << H); i++)
	{
		int remainig_steps = K;
		for (int i = 1; i <= H; i++)
		{
			for (int j = 1; j <= W; j++) tile_test[i][j] = tile[i][j];
		}
		for (int k = 0; k < H; k++)
		{
			if (remainig_steps < 1) break;
			if ((i >> k) & 1)
			{
				remainig_steps--;
				for (int j = 1; j <= W; j++) tile_test[k + 1][j] = '#';
			}
		}
		if(remainig_steps > 0) ft_paint_column(remainig_steps);
		ans = max(ans, ft_score());
	}
	cout << ans << endl;
	return 0;
}
```

## 10.3 ç·åˆå•é¡Œ(3)
### A73 - Marathon Route

https://atcoder.jp/contests/tessoku-book/tasks/tessoku_book_bu

```cpp
```


## 10.4 ç·åˆå•é¡Œ(4)
### A74 - Board Game

https://atcoder.jp/contests/tessoku-book/tasks/tessoku_book_bv

```cpp
```

## 10.5 ç·åˆå•é¡Œ(5)
### A75 - Examination

https://atcoder.jp/contests/tessoku-book/tasks/tessoku_book_bw

```cpp
```

## 10.6 ç·åˆå•é¡Œ(6)
### A76 - River Crossing 

https://atcoder.jp/contests/tessoku-book/tasks/tessoku_book_bx

```cpp
```


## 10.7 ç·åˆå•é¡Œ(7)
### A77 - Yokan Partyï¼ˆâ˜…4ï¼‰

https://atcoder.jp/contests/tessoku-book/tasks/typical90_a

```cpp
```


